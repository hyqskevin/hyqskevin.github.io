<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Kevin W build this air-castle to collect infos &amp; photos"><title>Laravel SQL migration | MonoShow</title><link rel="stylesheet" type="text/css" href="../../../../css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask sizes="any" href="../../../../favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="../../../../favicon.ico"><link rel="apple-touch-icon" href="../../../../apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="../../../../apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="../../../../atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Laravel SQL migration</h1><a id="logo" href="../../../../.">MonoShow</a><p class="description">Monologue from Kevin_W</p></div><div id="nav-menu"><a class="current" href="../../../../."><i class="fa fa-home"> 时间线</i></a><a href="../../../../archives/"><i class="fa fa-archive"> 档案袋</i></a><a href="../../../../categories/repo/"><i class="fa fa-file-text"> 知识仓库</i></a><a href="../../../../photo/"><i class="fa fa-camera"> Ins摄影集</i></a><a href="../../../../about/"><i class="fa fa-user"> 我是谁我在哪</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Laravel SQL migration</h1><div class="post-meta">Feb 27, 2019<span> | </span><span class="category"><a href="../../../../categories/study/">study</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.8k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 7</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#迁移步骤"><span class="toc-number">1.</span> <span class="toc-text">迁移步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#创建表"><span class="toc-number">2.</span> <span class="toc-text">创建表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建表中的列"><span class="toc-number">2.1.</span> <span class="toc-text">创建表中的列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改、重命名、删除列"><span class="toc-number">2.2.</span> <span class="toc-text">修改、重命名、删除列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加索引键"><span class="toc-number">2.3.</span> <span class="toc-text">添加索引键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除索引"><span class="toc-number">2.4.</span> <span class="toc-text">删除索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#外键约束（loading…）"><span class="toc-number">2.5.</span> <span class="toc-text">外键约束（loading…）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#检查列表是否存在"><span class="toc-number">3.</span> <span class="toc-text">检查列表是否存在</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置表的存储引擎，在-schema-构建器上设置-engine-属性"><span class="toc-number">4.</span> <span class="toc-text">设置表的存储引擎，在 schema 构建器上设置 engine 属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重命名-删除表"><span class="toc-number">5.</span> <span class="toc-text">重命名/删除表</span></a></li></ol></div></div><div class="post-content"><p>结合 Laravel 的 Schema 构建器构建应用的数据库表结构，类似于数据库的版本控制，允许团队成员间编辑并共享应用的数据库表结构<br>Laravel 的 Schema 门面提供了与数据库系统无关的创建和操纵表的支持，在 Laravel 所支持的所有数据库系统中提供一致的、优雅的、流式的 API，将 SQL 转成 PHP 去执行</p>
<p>部署环境(WAMP)<br>php 7.3.1<br>composer 1.8.4<br>laravel 5.8.0<br>MySQL 5.7.24</p>
<a id="more"></a>
<h2 id="迁移步骤"><a href="#迁移步骤" class="headerlink" title="迁移步骤"></a>迁移步骤</h2><ol>
<li>MySQL 数据库创建 Database</li>
<li>到 laravel 目录下修改<code>.env</code>文件符合数据库配置</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DB_CONNECTION=mysql</span><br><span class="line">DB_HOST=127.0.0.1</span><br><span class="line">DB_PORT=3306</span><br><span class="line">DB_DATABASE=your_database_name</span><br><span class="line">DB_USERNAME=root</span><br><span class="line">DB_PASSWORD=</span><br></pre></td></tr></table></figure>
<ol>
<li>到 laravel 目录创建新的迁移<br><code>php artisan make:migration create_table_name</code><br>创建的数据表在<code>laravel\database\migration</code>目录下</li>
</ol>
<p><code>--table</code>和<code>--create</code>选项可以用于指定表名以及该迁移是否要创建一个新的数据表。这些选项只需要简单放在上述迁移命令后面并指定表名<br><code>php artisan make:migration create_users_table --create=users</code><br><code>php artisan make:migration add_votes_to_users_table --table=users</code></p>
<ol>
<li><p>编写迁移数据表<br>迁移类包含了两个方法：<code>up</code>和<code>down</code>。<code>up</code>方法用于新增表，列或者索引到数据库，而<code>down</code>方法就是<code>up</code>方法的反操作<br>用到 Laravel 的<code>schema</code>构建器来创建和修改表，后面给出具体实现方法</p>
</li>
<li><p>运行迁移表到数据库<br><code>php artisan migrate</code></p>
</li>
</ol>
<p>强制运行这些命令而不被提示，可以使用—force（不推荐）<br><code>php artisan migrate --force</code></p>
<p>在 MySQL 中可以看到 Database 下有新的表<br><img src="https://hyqskevin.github.io/pic/laravel/laraveltest.png" class="[database laraveltest]"></p>
<ol>
<li>执行回滚</li>
</ol>
<p>在 Database 下有 migration 表，使得 laravel 可以回滚<br><img src="https://hyqskevin.github.io/pic/laravel/migration.png" class="[migration rollback]"></p>
<p>执行文件中的<code>public function down()</code>,回滚最后一批运行的迁移<br><code>php artisan migrate:rollback</code><br>回滚所有的应用迁移<br><code>php artisan migrate:reset</code><br>先回滚所有数据库迁移<br><code>php artisan migrate:refresh</code><br>回滚或重建指定数量的迁移,refresh 命令提供的 step 选项<br><code>php artisan migrate:refresh --step=5</code></p>
<ol>
<li>在迁移之前进行试验<br><code>php artisan migrate --pretend</code></li>
</ol>
<h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><p>使用 Schema 门面上的 create 方法来创建新的数据表。create 方法接收两个参数，第一个是表名，第二个是获取用于定义新表的 Blueprint 对象的闭包<br><code>Schema::create(&#39;table_name&#39;, function (Blueprint $table){ })</code></p>
<h3 id="创建表中的列"><a href="#创建表中的列" class="headerlink" title="创建表中的列"></a>创建表中的列</h3><p>在 Schema 中创建表中的列结构 <code>$table-&gt;类型(&#39;名称&#39;);</code></p>
<ul>
<li>常用属性</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$table-&gt;bigIncrements(<span class="string">'id'</span>);	<span class="comment">//自增ID，类型为bigint</span></span><br><span class="line">$table-&gt;bigInteger(<span class="string">'votes'</span>);	<span class="comment">//等同于数据库中的BIGINT类型</span></span><br><span class="line">$table-&gt;binary(<span class="string">'data'</span>);	<span class="comment">//等同于数据库中的BLOB类型</span></span><br><span class="line">$table-&gt;boolean(<span class="string">'confirmed'</span>);	<span class="comment">//等同于数据库中的BOOLEAN类型</span></span><br><span class="line">$table-&gt;char(<span class="string">'name'</span>, <span class="number">4</span>);	<span class="comment">//等同于数据库中的CHAR类型</span></span><br><span class="line">$table-&gt;date(<span class="string">'created_at'</span>);	<span class="comment">//等同于数据库中的DATE类型</span></span><br><span class="line">$table-&gt;dateTime(<span class="string">'created_at'</span>);	<span class="comment">//等同于数据库中的DATETIME类型</span></span><br><span class="line">$table-&gt;dateTimeTz(<span class="string">'created_at'</span>);	<span class="comment">//等同于数据库中的DATETIME类型（带时区）</span></span><br><span class="line">$table-&gt;decimal(<span class="string">'amount'</span>, <span class="number">5</span>, <span class="number">2</span>);	<span class="comment">//等同于数据库中的DECIMAL类型，带一个精度和范围</span></span><br><span class="line">$table-&gt;double(<span class="string">'column'</span>, <span class="number">15</span>, <span class="number">8</span>);	<span class="comment">//等同于数据库中的DOUBLE类型，带精度, 总共15位数字，小数点后8位.</span></span><br><span class="line">$table-&gt;enum(<span class="string">'choices'</span>, [<span class="string">'foo'</span>, <span class="string">'bar'</span>]);	<span class="comment">//等同于数据库中的 ENUM类型</span></span><br><span class="line">$table-&gt;float(<span class="string">'amount'</span>);	<span class="comment">//等同于数据库中的 FLOAT 类型</span></span><br><span class="line">$table-&gt;increments(<span class="string">'id'</span>);	<span class="comment">//数据库主键自增ID</span></span><br><span class="line">$table-&gt;integer(<span class="string">'votes'</span>);	<span class="comment">//等同于数据库中的 INTEGER 类型</span></span><br><span class="line">$table-&gt;ipAddress(<span class="string">'visitor'</span>);	<span class="comment">//等同于数据库中的 IP 地址</span></span><br><span class="line">$table-&gt;json(<span class="string">'options'</span>);	<span class="comment">//等同于数据库中的 JSON 类型</span></span><br><span class="line">$table-&gt;jsonb(<span class="string">'options'</span>);	<span class="comment">//等同于数据库中的 JSONB 类型</span></span><br><span class="line">$table-&gt;longText(<span class="string">'description'</span>);	<span class="comment">//等同于数据库中的 LONGTEXT 类型</span></span><br><span class="line">$table-&gt;macAddress(<span class="string">'device'</span>);	<span class="comment">//等同于数据库中的 MAC 地址</span></span><br><span class="line">$table-&gt;mediumIncrements(<span class="string">'id'</span>);	<span class="comment">//自增ID，类型为无符号的mediumint</span></span><br><span class="line">$table-&gt;mediumInteger(<span class="string">'numbers'</span>);	<span class="comment">//等同于数据库中的 MEDIUMINT类型</span></span><br><span class="line">$table-&gt;mediumText(<span class="string">'description'</span>);	<span class="comment">//等同于数据库中的 MEDIUMTEXT类型</span></span><br><span class="line">$table-&gt;morphs(<span class="string">'taggable'</span>);	<span class="comment">//添加一个 INTEGER类型的 taggable_id 列和一个 STRING类型的 taggable_type列</span></span><br><span class="line">$table-&gt;nullableTimestamps();	<span class="comment">//和 timestamps()一样但允许 NULL值.</span></span><br><span class="line">$table-&gt;rememberToken();	<span class="comment">//添加一个 remember_token 列： VARCHAR(100) NULL.</span></span><br><span class="line">$table-&gt;smallIncrements(<span class="string">'id'</span>);	<span class="comment">//自增ID，类型为无符号的smallint</span></span><br><span class="line">$table-&gt;smallInteger(<span class="string">'votes'</span>);	<span class="comment">//等同于数据库中的 SMALLINT 类型</span></span><br><span class="line">$table-&gt;softDeletes();	<span class="comment">//新增一个 deleted_at 列 用于软删除.</span></span><br><span class="line">$table-&gt;string(<span class="string">'email'</span>);	<span class="comment">//等同于数据库中的 VARCHAR 列  .</span></span><br><span class="line">$table-&gt;string(<span class="string">'name'</span>, <span class="number">100</span>);	<span class="comment">//等同于数据库中的 VARCHAR，带一个长度</span></span><br><span class="line">$table-&gt;text(<span class="string">'description'</span>);	<span class="comment">//等同于数据库中的 TEXT 类型</span></span><br><span class="line">$table-&gt;time(<span class="string">'sunrise'</span>);	<span class="comment">//等同于数据库中的 TIME类型</span></span><br><span class="line">$table-&gt;timeTz(<span class="string">'sunrise'</span>);	<span class="comment">//等同于数据库中的 TIME 类型（带时区）</span></span><br><span class="line">$table-&gt;tinyInteger(<span class="string">'numbers'</span>);	<span class="comment">//等同于数据库中的 TINYINT 类型</span></span><br><span class="line">$table-&gt;timestamp(<span class="string">'added_on'</span>);	<span class="comment">//等同于数据库中的 TIMESTAMP 类型</span></span><br><span class="line">$table-&gt;timestampTz(<span class="string">'added_on'</span>);	<span class="comment">//等同于数据库中的 TIMESTAMP 类型（带时区）</span></span><br><span class="line">$table-&gt;timestamps();	<span class="comment">//添加 created_at 和 updated_at列</span></span><br><span class="line">$table-&gt;timestampsTz();	<span class="comment">//添加 created_at 和 updated_at列（带时区）</span></span><br><span class="line">$table-&gt;unsignedBigInteger(<span class="string">'votes'</span>);	<span class="comment">//等同于数据库中无符号的 BIGINT 类型</span></span><br><span class="line">$table-&gt;unsignedInteger(<span class="string">'votes'</span>);	<span class="comment">//等同于数据库中无符号的 INT 类型</span></span><br><span class="line">$table-&gt;unsignedMediumInteger(<span class="string">'votes'</span>);	<span class="comment">//等同于数据库中无符号的 MEDIUMINT 类型</span></span><br><span class="line">$table-&gt;unsignedSmallInteger(<span class="string">'votes'</span>);	<span class="comment">//等同于数据库中无符号的 SMALLINT 类型</span></span><br><span class="line">$table-&gt;unsignedTinyInteger(<span class="string">'votes'</span>);	<span class="comment">//等同于数据库中无符号的 TINYINT 类型</span></span><br><span class="line">$table-&gt;uuid(<span class="string">'id'</span>);	<span class="comment">//等同于数据库的UUID</span></span><br></pre></td></tr></table></figure>
<ul>
<li>常用约束</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">-&gt;after(<span class="string">'column'</span>)	<span class="comment">//将该列置于另一个列之后 (仅适用于MySQL)</span></span><br><span class="line">-&gt;comment(<span class="string">'my comment'</span>)	<span class="comment">//添加注释信息</span></span><br><span class="line">-&gt;default($value)	<span class="comment">//指定列的默认值</span></span><br><span class="line">-&gt;first()	<span class="comment">//将该列置为表中第一个列 (仅适用于MySQL)</span></span><br><span class="line">-&gt;nullable()	<span class="comment">//允许该列的值为NULL</span></span><br><span class="line">-&gt;storedAs($expression)	<span class="comment">//创建一个存储生成列（只支持MySQL）</span></span><br><span class="line">-&gt;unsigned()	<span class="comment">//设置 integer 列为 UNSIGNED</span></span><br><span class="line">-&gt;virtualAs($expression)	<span class="comment">//创建一个虚拟生成列（只支持MySQL）</span></span><br></pre></td></tr></table></figure>
<ul>
<li>格式示例</li>
</ul>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CreateTableName</span> <span class="keyword">extends</span> <span class="title">Migration</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Run the migrations.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">up</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Schema::create(<span class="string">'table_name'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(Blueprint $table)</span> </span>&#123;</span><br><span class="line">        $table-&gt;bigIncrements(<span class="string">'id'</span>);</span><br><span class="line">        $table-&gt;string(<span class="string">'name'</span>);</span><br><span class="line">        $table-&gt;string(<span class="string">'email'</span>)-&gt;unique();</span><br><span class="line">        $table-&gt;timestamp(<span class="string">'email_verified_at'</span>)-&gt;nullable();</span><br><span class="line">        $table-&gt;string(<span class="string">'password'</span>);</span><br><span class="line">        $table-&gt;rememberToken();</span><br><span class="line">        $table-&gt;timestamps();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Reverse the migrations.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">down</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Schema::dropIfExists(<span class="string">'table_name'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="修改、重命名、删除列"><a href="#修改、重命名、删除列" class="headerlink" title="修改、重命名、删除列"></a>修改、重命名、删除列</h3><p><code>-&gt;change()</code>方法允许你修改已存在的列为新的类型，或者修改列的属性<br><code>-&gt;renameColumn()</code>方法可以重命名一个列<br><code>-&gt;dropColumn</code>方法可以删除列</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">Schema::table(<span class="string">'users'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($table)</span> </span>&#123;</span><br><span class="line">    $table-&gt;string(<span class="string">'name'</span>, <span class="number">50</span>)-&gt;change();  <span class="comment">//name列的尺寸从 25 增加到 50</span></span><br><span class="line">    $table-&gt;renameColumn(<span class="string">'from'</span>, <span class="string">'to'</span>);  <span class="comment">//重命名 from 为 to</span></span><br><span class="line">    $table-&gt;dropColumn(<span class="string">'votes'</span>);  <span class="comment">//删除一个列</span></span><br><span class="line">    $table-&gt;dropColumn([<span class="string">'votes'</span>, <span class="string">'avatar'</span>, <span class="string">'location'</span>]);  <span class="comment">//删除多个列</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>需要添加 doctrine/dbal 依赖到 composer.json 文件</li>
<li>暂不支持 enum 类型的列的修改和重命名</li>
</ul>
<h3 id="添加索引键"><a href="#添加索引键" class="headerlink" title="添加索引键"></a>添加索引键</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$table-&gt;primary(<span class="string">'id'</span>);	<span class="comment">//添加主键索引</span></span><br><span class="line">$table-&gt;primary([<span class="string">'first'</span>, <span class="string">'last'</span>]);	<span class="comment">//添加混合索引</span></span><br><span class="line">$table-&gt;unique(<span class="string">'email'</span>);	<span class="comment">//添加唯一索引</span></span><br><span class="line">$table-&gt;unique(<span class="string">'state'</span>, <span class="string">'my_index_name'</span>);	<span class="comment">//指定自定义索引名称</span></span><br><span class="line">$table-&gt;index(<span class="string">'state'</span>);	<span class="comment">//添加普通索引</span></span><br></pre></td></tr></table></figure>
<h3 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$table-&gt;dropPrimary(<span class="string">' '</span>);	<span class="comment">//删除主键索引</span></span><br><span class="line">$table-&gt;dropUnique(<span class="string">' '</span>);	<span class="comment">//删除唯一索引</span></span><br><span class="line">$table-&gt;dropIndex(<span class="string">' '</span>);	 <span class="comment">//删除普通索引</span></span><br></pre></td></tr></table></figure>
<h3 id="外键约束（loading…）"><a href="#外键约束（loading…）" class="headerlink" title="外键约束（loading…）"></a>外键约束（loading…）</h3><h2 id="检查列表是否存在"><a href="#检查列表是否存在" class="headerlink" title="检查列表是否存在"></a>检查列表是否存在</h2><p>使用 <code>hasTable</code> 和 <code>hasColumn</code> 方法检查表或列是否存在</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (Schema::hasTable(<span class="string">'users'</span>)) &#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Schema::hasColumn(<span class="string">'users'</span>, <span class="string">'email'</span>)) &#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="设置表的存储引擎，在-schema-构建器上设置-engine-属性"><a href="#设置表的存储引擎，在-schema-构建器上设置-engine-属性" class="headerlink" title="设置表的存储引擎，在 schema 构建器上设置 engine 属性"></a>设置表的存储引擎，在 schema 构建器上设置 engine 属性</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">Schema::create(<span class="string">'users'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($table)</span> </span>&#123;</span><br><span class="line">    $table-&gt;engine = <span class="string">'InnoDB'</span>;</span><br><span class="line">    $table-&gt;increments(<span class="string">'id'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="重命名-删除表"><a href="#重命名-删除表" class="headerlink" title="重命名/删除表"></a>重命名/删除表</h2><p>在<code>public function up()</code>中添加<br><code>Schema::rename(&#39;your_table_name&#39;,&#39;change_name&#39;);</code><br>更新<code>public function down()</code>中的表名</p>
<p>在<code>public function down()</code>中添加<br><code>Schema::drop(&#39;users&#39;);</code> 或 <code>Schema::dropIfExists(&#39;users&#39;);</code><br>用于迁移的回滚</p>
<hr>
<p>参考：<br><a href="https://laravelacademy.org/post/9580.html" target="_blank" rel="noopener">Laravel 数据库迁移</a><br><a href="https://laravel.com/docs/5.7/migrations" target="_blank" rel="noopener">Database Migration</a></p>
</div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>KevinW</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/2019/02/27/migration/">https://hyqskevin.github.io/2019/02/27/migration/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0 CN</a> 许可协议。转载请注明出处！</li></ul></div><br><div class="tags"><a href="../../../../tags/laravel/">laravel</a></div><div class="post-nav"><a class="pre" href="../../28/session-cookie/">session_cookie</a><a class="next" href="../../23/mysql-regular/">mysql like子句和正则表达式匹配</a></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 学习分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../../../../categories/code/">code</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/language-learning/">language-learning</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/notes/">notes</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/paper/">paper</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/repo/">repo</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/study/">study</a><span class="category-list-count">29</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="../../../../tags/others/" style="font-size: 15px;">others</a> <a href="../../../../tags/MTG/" style="font-size: 15px;">MTG</a> <a href="../../../../tags/Webpack/" style="font-size: 15px;">Webpack</a> <a href="../../../../tags/Babel/" style="font-size: 15px;">Babel</a> <a href="../../../../tags/Vue/" style="font-size: 15px;">Vue</a> <a href="../../../../tags/algorithm/" style="font-size: 15px;">algorithm</a> <a href="../../../../tags/book/" style="font-size: 15px;">book</a> <a href="../../../../tags/boosting/" style="font-size: 15px;">boosting</a> <a href="../../../../tags/Kaggle/" style="font-size: 15px;">Kaggle</a> <a href="../../../../tags/c/" style="font-size: 15px;">c++</a> <a href="../../../../tags/sklearn/" style="font-size: 15px;">sklearn</a> <a href="../../../../tags/flask/" style="font-size: 15px;">flask</a> <a href="../../../../tags/time-series/" style="font-size: 15px;">time_series</a> <a href="../../../../tags/ensemble-learning/" style="font-size: 15px;">ensemble_learning</a> <a href="../../../../tags/bp-nn/" style="font-size: 15px;">bp_nn</a> <a href="../../../../tags/hexo/" style="font-size: 15px;">hexo</a> <a href="../../../../tags/bootstrap2-0/" style="font-size: 15px;">bootstrap2.0</a> <a href="../../../../tags/php/" style="font-size: 15px;">php</a> <a href="../../../../tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="../../../../tags/python/" style="font-size: 15px;">python</a> <a href="../../../../tags/mysql/" style="font-size: 15px;">mysql</a> <a href="../../../../tags/laravel/" style="font-size: 15px;">laravel</a> <a href="../../../../tags/machine-learning/" style="font-size: 15px;">machine_learning</a> <a href="../../../../tags/pandas/" style="font-size: 15px;">pandas</a> <a href="../../../../tags/slam/" style="font-size: 15px;">slam</a> <a href="../../../../tags/Linux-device/" style="font-size: 15px;">Linux_device</a> <a href="../../../../tags/session/" style="font-size: 15px;">session</a> <a href="../../../../tags/cookie/" style="font-size: 15px;">cookie</a> <a href="../../../../tags/log/" style="font-size: 15px;">log</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="../../../../2020/11/26/EDH-combo/">Temer EDH combo</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2020/11/10/vue-notes/">Vue功能实现和使用技巧</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2020/07/13/Webpack_3/">Webpack程序打包学习笔记(3) —— Babel</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2020/07/05/Webpack_2/">Webpack程序打包学习笔记(2)</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2020/06/28/Webpack_1/">Webpack程序打包学习笔记(1)</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2020/05/28/better-scroll/">BetterScroll插件实现页面滚动效果</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2020/05/12/swiper/">swiper滑动插件</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2020/05/10/js同步和异步/">javascript异步，消息队列和事件循环</a></li><li class="post-list-item"><a class="post-list-link" href="../../../11/10/json-server/">json数据模拟</a></li><li class="post-list-item"><a class="post-list-link" href="../../../08/20/imbalanced_data_analysis/">imblearn API</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="../../../../." rel="nofollow">MonoShow.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="../../../../js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="../../../../js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="../../../../js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" color="0,0,0" opacity="0.5" zindex="-2" count="50" src="//lib.baomitu.com/canvas-nest.js/2.0.3/canvas-nest.umd.js"></script><script type="text/javascript" src="../../../../js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="../../../../js/smartresize.js?v=0.0.0"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"left","width":100,"height":200},"mobile":{"show":true},"log":false});</script></body></html>