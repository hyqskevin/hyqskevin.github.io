<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MonoShow</title>
  
  <subtitle>Monologue from Kevin_W</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://hyqskevin.github.io/"/>
  <updated>2019-03-13T16:06:54.104Z</updated>
  <id>https://hyqskevin.github.io/</id>
  
  <author>
    <name>Kevin W</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Autonomous Vehicles translate -- abstract &amp; previous &amp; history</title>
    <link href="https://hyqskevin.github.io/2019/03/14/abstract-previous-history/"/>
    <id>https://hyqskevin.github.io/2019/03/14/abstract-previous-history/</id>
    <published>2019-03-13T16:03:14.000Z</published>
    <updated>2019-03-13T16:06:54.104Z</updated>
    
    <content type="html"><![CDATA[<p>Computer Vision for Autonomous Vehicles:Problems, Datasets and State-of-the-Art<br>自动驾驶技术的计算机视觉：问题，数据和前沿技术<br>摘要，前沿和技术历史</p><p>!<--more--></--more--></p><h2 id="Abstract-摘要"><a href="#Abstract-摘要" class="headerlink" title="Abstract 摘要"></a>Abstract 摘要</h2><ul><li>Recent years have witnessed amazing progress in AI related fields such as computer vision, machine learning and autonomous vehicles. |As with any rapidly growing field, however, it becomes increasingly difficult to stay up-to-date or enter the field as a beginner. |While several topic specific survey papers have been written, to date no general survey on problems, datasets and methods in computer vision for autonomous vehicles exists.|This paper attempts to narrow this gap by providing a state-of-the-art survey on this topic. Our survey includes both the historically most relevant literature as well as the current state-of-the-art on several specific topics, including recognition, reconstruction, motion estimation, tracking, scene understanding and end-to-end learning. |Towards this goal, we first provide a taxonomy to classify each approach and then analyze the performance of the state-of-the-art on several challenging benchmarking datasets including KITTI, ISPRS, MOT and Cityscapes. |Besides, we discuss open problems and current research challenges. To ease accessibility and accommodate missing references, we will also provide an interactive platform which allows to navigate topics and methods, and provides additional information and project links for each paper.<br>Keywords: Computer Vision, Autonomous Vehicles, Autonomous Vision</li><li>概述：人类见证了最近几年AI相关领域的惊人进步，如计算机视觉，机器学习和自动驾驶。<p><br>然而任何一个快速发展的领域，保持领先或刚开始进入这些领域变得越来越难(业内人员难以跟上行业节奏或者业外人员难入行)。</p><p><br>尽管已经(有人)发表了一些这方面的专题研究文章，但在自动驾驶技术中，计算机视觉的问题、数据和方法至今没有普遍的研究。</p><p><br>对于这个话题，这篇论文试图通过提供对前沿技术的研究来减少这种缺口。我们的研究包括最相关的历史资料和当前最前沿的技术，包括识别、重建运动估测、追踪场景理解和端到端学习等。</p><p><br>为完成这个目标，我们首先通过分类学对每一个方法进行分类，然后在一些具有挑战性的基础数据集上，如KITTI、ISPRS、MOT和Cityscapes上分析每一个方法在前沿技术上的表现</p><p><br>此外，我们还讨论了一些开放问题和当前研究的挑战，为了轻松访问和适应缺失的参考，我们将提供一个具有主题和方法的驾驶交互平台，并提供额外信息和每篇论文的项目链接</p><p><br>关键词：计算机视觉，自动驾驶，自主视觉</p></li></ul><h2 id="previous-前言"><a href="#previous-前言" class="headerlink" title="previous 前言"></a>previous 前言</h2><ul><li><p>Since the first successful demonstrations in the 1980s (Dick-manns &amp; Mysliwetz (1992); Dickmanns &amp; Graefe (1988); Thorpeet al. (1988)), great progress has been made in the field of autonomous vehicles. |Despite these advances, however, it is safe to believe that fully autonomous navigation in arbitrarily complex environments is still decades away. |The reason for this is two-fold: First, autonomous systems which operate in complex dynamic environments require artificial intelligence which generalizes to unpredictable situations and reasons in a timely manner. |Second, informed decisions require accurate perception, yet most of the existing computer vision systems produce errors at a rate which is not acceptable for autonomous navigation.</p></li><li><p>从20世纪80年代首次成功展示以来(Dick-manns &amp; Mysliwetz (1992); Dickmanns &amp; Graefe (1988); Thorpeet al. (1988))(Dick-manns &amp; Mysliwetz (1992); Dickmanns &amp; Graefe (1988); Thorpeet al. (1988))，自动驾驶技术领域已经取得了很大进展</p><p><br>尽管有了这些进展，但在任意复杂环境中，实现完全自动驾驶仍然被认为需要几十年</p><p><br>原因有两点：第一，在复杂的、动态的环境中运行的自动驾驶系统需要人工智能来归纳不可预测的情形和原因，给出及时的方法</p><p><br>第二，信息的决策需要准确的感知，目前大多数已有的计算机视觉系统有一定的错误率，这是自动驾驶技术无法接受的</p></li><li><p>In this paper, we focus on the second aspect which we call autonomous vision and investigate the performance of current perception systems for autonomous vehicles. |Towards this goal, we first provide a taxonomy of problems and classify existing datasets and techniques using this taxonomy, describing the pros and cons of each method. Second, we analyze the current state-of-the-art performance on several popular publicly available benchmarking datasets. |In particular, we provide a novel in-depth qualitative analysis of the KITTI benchmark which shows the easiest and most difficult examples based on the methods submitted to the evaluation server. |Based on this analysis, we discuss open research problems and challenges. To ease navigation, we also provide an interactive online tool which visualizes our taxonomy using a graph and provides additional information and links to project pages in an easily accessible manner. |We hope that our survey will become a useful tool for researchers in the field of autonomous vision and lowers the entry barrier for beginners by providing an exhaustive overview over the field.</p></li><li><p>在这篇论文中，我们关注第二个方面的问题，也就是自动驾驶视觉，同时调查最近的自动驾驶视觉中感知系统的表现</p><p><br>为完成这个目标，我们首先给出了问题的分类，归类了已有的数据和可使用的技术，描述每种方法的优缺点。第二，我们在几个流行的公开数据集上分析了最近前沿成果的表现</p><p><br>特别是我们给出一种KITTI基准的新的深入定性分析，这些分析展示了提交给评价服务器的方法中最简单和最困难的例子</p><p><br>基于这些分析，我们讨论了开放的研究问题和挑战，为了简化学习，我们也给出一个在线交互式工具，用图像可视化了分类，并提供额外信息和一个简单可行的方法与项目页链接</p><p><br>我们希望我们的研究能够成为自动驾驶领域研究人员的一个有用的工具，并通过透彻的概述，降低新人进入该领域的门槛</p></li><li><p>There exist several other related surveys. Winner et al. (2015) explains in detail systems for active safety and driver assistance, considering both their structure and their function. |Their focus is to cover all aspects of driver assistance systems and the chapter about machine vision covers only the most basic concepts of the autonomous vision problem. |Klette (2015) provide an overview over vision-based driver assistance systems. They describe most aspects of the perception problem at a high level, but do not provide an in-depth review of the state-of-the-art in each task as we pursue in this paper. |Complementary to our survey, Zhu et al. (2017) provide an overview of environment perception for intelligent vehicles, focusing on lane detection, traffic sign/light recognition as well as vehicle tracking. |In contrast, our goal is to bridge the gap between the robotics, intelligent vehicles, photogrammetry and computer vision communities by providing an extensive overview and comparison which includes works from all fields.</p></li><li>目前也有一些其它相关的研究，Winner et al. (2015)详细地解释了主动安全性和驾驶辅助系统，同时考虑了它们的结构和功能<p><br>这些研究注重覆盖辅助驾驶系统的所有方面，但关于机器视觉的章节只覆盖到了自动驾驶技术中最基础的概念。</p><p><br>Klette (2015)提供了一个基于视觉的辅助驾驶系统的概述，他们描述了高层次感知问题的大部分方面，但并没有像我们在论文中追求的一样，给出在各种前沿任务中比较深入的评测</p><p><br>Zhu et al. (2017)提出了智能汽车环境感知的概述，聚焦在车道检测，交通信号灯识别和机车追踪问题，这与我们的研究相互补充。</p><p><br>相比较下，我们的目标是通过提供广泛的概述和比较，包括在这个领域所有的成果，在机器人、智能汽车、摄影测绘和计算机视觉之间建立起一座桥梁</p></li></ul><h2 id="1-History-of-Autonomous-Driving-自动驾驶技术历史"><a href="#1-History-of-Autonomous-Driving-自动驾驶技术历史" class="headerlink" title="1.History of Autonomous Driving 自动驾驶技术历史"></a>1.History of Autonomous Driving 自动驾驶技术历史</h2><h3 id="1-1-Autonomous-Driving-Projects-自动驾驶项目"><a href="#1-1-Autonomous-Driving-Projects-自动驾驶项目" class="headerlink" title="1.1. Autonomous Driving Projects 自动驾驶项目"></a>1.1. Autonomous Driving Projects 自动驾驶项目</h3><ul><li><p>Many governmental institutions worldwide started various projects to explore intelligent transportation systems (ITS). The PROMETHEUS project started 1986 in Europe and involved more than 13 vehicle manufacturers, several research units from governments and universities of 19 European countries. |One of the first projects in the United States was Navlab Thorpe et al. (1988) by the Carnegie Mellon University which achieved a major milestone in 1995, by completing the first autonomous drive from Pittsburgh, PA and Sand Diego, CA. |After many initiatives were launched by universities, research centers and automobile companies, the U.S. government established the National Automated Highway System Consortium (NAHSC) in 1995. |Similar to the U.S., Japan established the Advanced Cruise-Assist Highway System Research Association in 1996 among many automobile industries and research centers to foster research on automatic vehicle guidance. |Bertozzi et al. (2000) survey many approaches to the challenging task of autonomous road following developed during these projects. They concluded that suffcient computing power is become increasingly available, but diffculties like reflections, wet road, direct sunshine, tunnels and shadows still make data interpretation challenging. |Thus, they suggested the enhancement of sensor capabilities. They also pointed out that the legal aspects related to the responsibility and impact of automatic driving on human passengers need to be considered carefully. |In summary, the automation will likely be restricted to special infrastructures and will be extended gradually.</p></li><li><p>世界各地的许多政府机构启动各式各样的项目来开发智能交通系统（ITS）。PROMETHEUS这个项目1986年在欧洲启动，包括超过13个交通工具生产商，当中的许多研究成员来自19个欧洲国家的政府和高校。</p><p><br>美国的其中一个项目就是由卡耐基梅隆大学的Navlab Thorpe等人(1988)创建的。这个项目完成了第一次从Pittsburgh，PA,Sand Diego和CA的自动驾驶，在1995年是一个重要的里程碑。</p><p><br>在许多大学，研究中心和自动驾驶公司的倡议下，美国政府在1995年成立了自动化公路系统联盟（NAHSC）。</p><p><br>和美国一样，日本于1996年成立了高级巡航公路系统研究协会(Advanced Cruise-Assist Highway System Research Association)，包括各大自动驾驶公司和研究中心，来促进自动驾驶导航的研究。</p><p><br>Bertozzi等人（2000）调查了许多具有挑战性的任务(通过这些项目发展的自动道路跟随),给出解决方法。他们得出结论，计算能力逐渐得到满足，但像反射，湿面潮湿，阳光直射，隧道和阴影这样的困难仍然使数据解释具有挑战性。</p><p><br>因此，他们建议提高传感器性能，同时也指出，关系到自动驾驶对行人法律方面的责任和影响，应该认真的考虑</p><p><br>总之，自动化技术(发展)可能会受限于特殊的基础设施，然后再慢慢的普及开来。</p></li><li><p>Motivated by the success of the PROMETHEUS projects to drive autonomously on highways, Franke et al. (1998) describe a real-time vision system for autonomous driving in complex urban traffic situations. |While highway scenarios have been studied intensively, urban scenes have not been addressed before. Their system included depth-based obstacle detection and tracking from stereo as well as a framework for monocular detection and recognition of relevant objects such as traffic signs.</p></li><li><p>The fusion of several perception systems developed by Vis-Lab have led to several proto-type vehicles including ARGO Broggi et al. (1999), TerraMax Braid et al. (2006), and BRAiVE Grisleri &amp; Fedriga (2010). |BRAiVE is the latest vehicle proto-type which is now integrating all systems that VisLab has developed so far. Bertozzi et al. (2011) demonstrated the robustness of their system at the VisLab Intercontinental Autonomous Challenge, a semi-autonomous drive from Italy to China. |The onboard system allows to detect obstacles, lane marking, ditches,berms and identify the presence and position of a preceding vehicle. The information produced by the sensing suite is used to perform different tasks such as leader-following and stop &amp; go.</p></li><li><p>PROMETHEUS项目可以实现在高速公路上自动驾驶，在这个成功的案例推动下，Franke等人描述了在复杂的城市交通场景下的自动驾驶的实时视觉系统。</p><p><br>虽然在此之前公路场景情况已经有很多深入的研究，但城市场景却从未得到解决。他们的系统包括基于深度的障碍检测和立体追踪，以及针对相关物体（比如：交通信号）的单目检测和识别框架。</p><p></p></li><li><p>Vis-Lab发展的多种传感系统的融合促成了几款原型车包括ARGO Broggi（1999），TerraMax Braid（2006）和BRAiVE Grisleri &amp; Fedriga（2010）的出现</p><p><br>BRAiVE是目前VisLab开发的整合所有系统的最新车型。 Bertozzi等人（2011）在VisLab洲际自治挑战赛（VisLab Intercontinental Autonomous Challenge，意大利到中国的半自主驾驶）展示了其系统的稳健性（鲁棒性）。</p><p><br>车载系统允许检测障碍物，标记车道、沟渠、护堤，并识别前方是否存在车辆和车辆位置。感应套件提供的信息被用于执行不同的任务，如(leader-following)和前进/停止。</p><p>?</p></li><li><p>The PROUD project Broggi et al. (2015) slightly modified the BRAiVE prototype Grisleri &amp; Fedriga (2010) to drive in urban roads and freeways open to regular traffic in Parma. |Towards this goal they enrich an openly licensed map with information about the maneuver to be managed (e.g. pedestrian crossing, traffic light, . . . ). |The vehicle was able to handle complex situations such as roundabouts, intersections, priority roads, stops, tunnels, crosswalks, traffic lights, highways, and urban roads without any human intervention.</p></li><li><p>The V-Charge project Furgale et al. (2013) presents an electric automated car outfitted with close-to-market sensors. A fully operational system is proposed including vision-only localization, mapping, navigation and control. |The project supported many works on different problems such as calibration Heng et al. (2013, 2015), stereo H¨ane et al. (2014), reconstruction Haene et al. (2012, 2013, 2014), SLAM Grimmett et al.(2015) and free space detection H¨ane et al. (2015). In addition to these research objectives, the project keeps a strong focus on deploying and evaluating the system in realistic environments.</p></li><li><p>PROUD的项目Broggi（2015）略微修改了BRAiVE原型Grisleri &amp; Fedriga（2010）使得汽车可以在parma城市道路和高速公路的常规交通情况下开车。</p><p><br>为了实现这一目标，他们丰富了一份公开授权的地图，其中包含有待完成的机动信息（比如行人过路，交通信号灯等）。</p><p><br>该车辆能够在没有人为干涉的情况下处理复杂的场景，例如回旋处，交叉口，优先道路，站点，隧道，人行横道，交通信号灯，高速公路和城市道路。</p><p></p></li><li><p>V-Charge项目Furgale等人 （2013年）提供配备了近距离市场（close-to-market）传感器的电动自动车。提出了一个全面可使用的系统，包括视觉定位，映射，导航和控制。</p><p><br>该项目解决了诸多困难比如，Heng et al. (2013, 2015)的校准问题, H¨ane(2014)的立体问题,Haene(2012, 2013, 2014)的重建问题, Grimmett(2015)的SLAM问题和 H¨ane(2015)的空白区域检测的问题。除了这些研究目标，该项目还非常重视在现实环境中部署和系统评估。</p></li><li><p>Google started their self-driving car project in 2009 and completed over 1,498,000 miles autonomously until March 2016 in Mountain View, CA, Austin, TX and Kirkland, WA. |Different sensors (i.a. cameras, radars, LiDAR, wheel encoder, GPS) allow to detect pedestrians, cyclists, vehicles, road work and more in all directions. |According to their accident reports, Google’s self-driving cars were involved only in 14 collisions while 13 times were caused by others. In 2016, the project was split off to Waymo, an independent self-driving technology company.</p></li><li><p>Tesla Autopilot is an advanced driver assistant system developed by Tesla which was first rolled out(推出) in 2015 with version of their software. The automation level of the system allows full automation but requires the full attention of the driver to take control if necessary. |From October 2016, all vehicles produced by Tesla were equipped with eight cameras, twelve ultrasonic sensors and a forward-facing radar to enable full self-driving capability.</p></li><li><p>Google于2009年开始了自驾车项目，直到2016年3月完成了超过1,498,000英里的驾驶距离，在美国加利福尼亚州奥斯汀市的Mountain View，WA和柯克兰。</p><p><br>不同的传感器（例如摄像机，雷达，LiDAR，车轮编码器，GPS）可以全方位的检测行人，骑自行车的人，车辆，道路工作等等。</p><p><br>据他们的事故报道，Google的自动驾驶车只涉及14次碰撞，13次是由别人造成的。 在2016年，这个项目分引入到了一家独立的自动驾驶技术公司Waymo。</p><p></p></li><li><p>Tesla Autopilot是由特斯拉开发的高级驾驶员辅助系统，该系统于2015年第一次推出其视觉软件。系统的自动化级别允许完全的自动化，但是仍然需要 要求驾驶员集中注意来控制。</p><p><br>从2016年10月起，特斯拉生产的所有车辆配备了8台摄像机，12台超声波传感器和一个前置雷达，以实现全自动驾驶能力。</p><p></p></li><li><p><strong>Long Distance Test Demonstrations</strong>: In 1995 the team within the PROMETHEUS project Dickmanns et al. (1990); Franke et al. (1994); Dickmanns et al. (1994) performed the first autonomous long-distance drive from Munich, Germany, to Odense, Denmark, at velocities up to 175 km/h with about 95% autonomous driving. |Similarly, in the U.S. Pomerleau &amp; Jochem (1996) drove from Washington DC to San Diego in the ’No hands across America’ tour with 98% automated steering yet manual longitudinal control.</p></li><li><p>In 2014, Ziegler et al. (2014) demonstrated a 103 km ride from Mannheim to Pforzheim Germany, known as Bertha Benz memorial route, in nearly fully autonomous manner. |They present an autonomous vehicle equipped with close-to-production sensor hardware. Object detection and free-space analysis is performed with radar and stereo vision. Monocular vision is used for traffic light detection and object classification. |Two complementary vision algorithms, point feature based and lane marking based, allow precise localization relative to manually annotated digital road maps. They concluded that even thought the drive was successfully completed the overall behavior is far inferior to the performance level of an attentive human driver.</p></li><li><p>长距离测试演示：1995年，PROMETHEUS项目里Dickmanns（1990）、Franke（1994）、Dickmanns（1994年）的团队演示了从德国慕尼黑（Munich）到丹麦欧登塞（Odense）进行的第一次自动长途驾驶，速度达175公里/小时，其中约95％为自主驾驶。</p><p><br>同样，在美国Pomerleau和Jochem（1996）在‘No hands across from America ???’中从华盛顿特区开往圣地亚哥，整个行程中有98％的自动驾驶和偶尔的手动纵向控制。</p><p></p></li><li><p>2014年，Zieglar（2014）以近乎完全自动的方式，展示了从曼海姆（Mannheim）到德国普福尔茨海姆（Pforzheim Germany）的103km的骑行，也就是众人所熟知的Bertha Benz纪念路线。</p><p><br>他们展示了一种装配有接近生产(close-to-production)的传感器硬件的自动驾驶车辆。由雷达radar和立体视觉来进行物体检测和空白区域分析。单目视觉用来检测交通信号灯和目标分类。</p><p><br>两种互补的算法，基于点特征和基于场景标记，允许相对于手动注释的数字路线图进行精确定位。他们得出结论，甚至认为自动驾驶虽然成功完成了，但是整体行为远远达不到细心的驾驶司机的水平。</p></li><li><p>Recently, Bojarski et al. (2016) drove autonomously 98% of the time from Holmdel to Atlantic Highlands in Monmouth County NJ as well as 10 miles on the Garden State Parkway without intervention. |Towards this goal, a convolutional neural network which predicts vehicle control directly from images is used in the NVIDIA DRIVETM PX self-driving car. The system is discussed in greater detail in Section 11.</p></li><li><p>While all aforementioned performed impressively, the general assumption of precisely annotated road maps as well as prerecorded maps for localization demonstrates that autonomous systems are still far from human capabilities. |Most importantly, robust perception from visual information but also general artificial intelligence are required to reach human level reliability and react safely even in complex innercity situations.</p></li><li><p>最近，Bojarski（2016）从霍尔姆德尔（Holmdel）到新泽西州蒙茅斯县（Monmouth）的大西洋高原，以及在花园州立大道没有任何干扰的自动行驶了10英里，其中98%是在自动驾驶。</p><p><br>为了实现这一目标，在NVIDIA DRIVETM PX自动驾驶车中使用了一种从图像直接预测车辆控制的卷积神经网络。该系统在第11节中有更详细的讨论。</p><p></p></li><li>虽然所有上述表现令人印象深刻，但精确注释路线图的一般假设，以及用于定位的预先载入的地图证实了自主性系统仍然差强人意。<p><br>最重要的是，这不仅需要视觉信息的强大的感知，也需要一般的人工智能达到和人一样的可靠性，并且在复杂的城市情况下也能安全地做出反应。</p><p></p></li></ul><h4 id="1-2-Autonomous-Driving-Competitions-自动驾驶竞赛"><a href="#1-2-Autonomous-Driving-Competitions-自动驾驶竞赛" class="headerlink" title="1.2. Autonomous Driving Competitions 自动驾驶竞赛"></a>1.2. Autonomous Driving Competitions 自动驾驶竞赛</h4><ul><li>The European Land Robot Trial (ELROB) is a demonstration and competition of unmanned systems in realistic scenarios and terrains, focusing mainly on military aspects such as reconnaissance and surveillance, autonomous navigation and convoy transport. In contrast to autonomous driving challenges, ELROB scenarios typically include navigation in rough terrain.</li><li>The first autonomous driving competition focusing on road scenes (though primarily dirt roads) has been initiated by the American Defense Advanced Research Projects Agency (DARPA) in 2004. The DARPA Grand Challenge 2004 offered a prize money of 1 million for the team first finishing a 150 mile route which crossed the border from California to Nevada. |However, none of the robot vehicles completed the route. One year later, in 2005, DARPA announced a second edition of its challenge with 5 vehicles successfully completing the route (Buehler et al.(2007)). The third competition of the DARPA Grand Challenge, known as the Urban Challenge (Buehler et al. (2009)), took place on November 3, 2007 at the site of the George Air Force Base in California. The challenge involved a 96 km urban area course where traffic regulations had to be obeyed while negotiating with other vehicles and merging into traffic.</li><li><p>The Grand Cooperative Driving Challenge (GCDC, see also Geiger et al. (2012a)), a competition focusing on autonomous cooperative driving behavior was held in Helmond, Netherlands in 2011 for the first time and in 2016 for a second edition. During the competition, teams had to negotiate convoys, join convoys and lead convoys. The winner was selected based on a system that assigned points to randomly mixed teams.</p></li><li><p>European Land Robot Trial （ELROB）是现实场景和地形中无人系统的示范与竞赛，主要集中在军事方面，如侦察监视，自动导航和车队运输。与自主驾驶挑战相反，ELROB场景通常包括崎岖地形的导航。</p><p></p></li><li>2004年，美国国防高级研究计划署（DARPA）发起了第一个专注于道路场景（主要是泥土路）的自动驾驶比赛。挑战赛提供了100万美元的奖金给首先完成从加利福尼亚州内华达州过境的150英里的路线。<p><br>然而，机器人车辆都没有完成路线。 一年后，DARPA公布了第二版的挑战，5辆车顺利完成了路线（Buehler（2007））。DARPA大挑战赛的第三场比赛，被称为城市挑战赛（Buehler（2009）），于2007年11月3日在乔治航空加利福尼亚州的基地。</p><p><br>这个挑战涉及到一个96公里的城市地区航线，在这段路程中车辆在对其他车辆进行判断并汇合车流时，必须遵守交通法规。</p></li><li>专注于自动合作驾驶行为的大型合作驾驶挑战（GCDC，Geiger et al（2012a））在荷兰赫尔蒙德（Helmond）举行,2011年首次，2016年第二次。在比赛中，团队需要判断，加入和引导车队。获胜者是基于给随机混合团队分配点数的系统选出来的。<p></p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Computer Vision for Autonomous Vehicles:Problems, Datasets and State-of-the-Art&lt;br&gt;自动驾驶技术的计算机视觉：问题，数据和前沿技术&lt;br&gt;摘要，前沿和技术历史&lt;/p&gt;
&lt;p&gt;!&lt;--more-
      
    
    </summary>
    
      <category term="paper" scheme="https://hyqskevin.github.io/categories/paper/"/>
    
    
  </entry>
  
  <entry>
    <title>PHP &amp; MySQL learning notes (4)</title>
    <link href="https://hyqskevin.github.io/2019/03/03/php-notes3/"/>
    <id>https://hyqskevin.github.io/2019/03/03/php-notes3/</id>
    <published>2019-03-03T04:38:45.000Z</published>
    <updated>2019-03-03T08:23:01.401Z</updated>
    
    <content type="html"><![CDATA[<p>由于PHP和MySQL版本问题，对 <a href="https://hyqskevin.github.io/2018/10/28/w3school-php/#3-mySQL">PHP &amp; MySQL learning notes (1)</a> 中曾经写过用的PHP操作MySQL数据库进行笔记更新<br>完善 <a href="https://hyqskevin.github.io/2019/01/21/php-notes2/#MySQL">PHP &amp; MySQL learning notes (3)</a> 中的代码<br>重新用 MySQLi (面向对象) MySQLi (面向过程) PDO 三种方式演示PHP操作MySQL<br><a id="more"></a></p><p>可以通过 phpinfo() 查看 mysqli 和 PDO 是否可以使用</p><h2 id="连接MySQL"><a href="#连接MySQL" class="headerlink" title="连接MySQL"></a>连接MySQL</h2><h3 id="创建连接"><a href="#创建连接" class="headerlink" title="创建连接"></a>创建连接</h3><p>面向对象</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检测连接</span></span><br><span class="line"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"连接成功"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>面向过程</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line">$conn = mysqli_connect($servername, $username, $password);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检测连接</span></span><br><span class="line"><span class="keyword">if</span> (!$conn) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">"Connection failed: "</span> . mysqli_connect_error());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"连接成功"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>PDO</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;"</span>, $username, $password);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"连接成功"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(PDOException $e)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> $e-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="关闭链接"><a href="#关闭链接" class="headerlink" title="关闭链接"></a>关闭链接</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$conn-&gt;close();  <span class="comment">//面向对象</span></span><br><span class="line">mysqli_close($conn);  <span class="comment">//面向过程</span></span><br><span class="line">$conn = <span class="keyword">null</span>;  <span class="comment">//实例PDO</span></span><br></pre></td></tr></table></figure><h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><p>面向对象</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password);</span><br><span class="line"><span class="comment">// 检测连接</span></span><br><span class="line"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建数据库</span></span><br><span class="line">$sql = <span class="string">"CREATE DATABASE myDatabase"</span>;</span><br><span class="line"><span class="keyword">if</span> ($conn-&gt;query($sql) === <span class="keyword">TRUE</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"数据库创建成功"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Error creating database: "</span> . $conn-&gt;error;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$conn-&gt;close();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>面向过程</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line">$conn = mysqli_connect($servername, $username, $password);</span><br><span class="line"><span class="comment">// 检测连接</span></span><br><span class="line"><span class="keyword">if</span> (!$conn) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . mysqli_connect_error());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建数据库</span></span><br><span class="line">$sql = <span class="string">"CREATE DATABASE myDatabase"</span>;</span><br><span class="line"><span class="keyword">if</span> (mysqli_query($conn, $sql)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"数据库创建成功"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Error creating database: "</span> . mysqli_error($conn);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mysqli_close($conn);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>PDO</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername"</span>, $username, $password);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置 PDO 错误模式为异常</span></span><br><span class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span><br><span class="line">    $sql = <span class="string">"CREATE DATABASE myDatabasePDO"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 exec() ，因为没有结果返回</span></span><br><span class="line">    $conn-&gt;exec($sql);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"数据库创建成功&lt;br&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(PDOException $e)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> $sql . <span class="string">"&lt;br&gt;"</span> . $e-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$conn = <span class="keyword">null</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="创建数据表-CREATE"><a href="#创建数据表-CREATE" class="headerlink" title="创建数据表 CREATE"></a>创建数据表 CREATE</h2><p>创建Mytest表</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Mytest (</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">6</span>) <span class="keyword">UNSIGNED</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">    firstname <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">    lastname <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">    email <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    reg_date <span class="built_in">TIMESTAMP</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>面向对象</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line">$dbname = <span class="string">"myDatabase"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password, $dbname);</span><br><span class="line"><span class="comment">// 检测连接</span></span><br><span class="line"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 sql 创建数据表</span></span><br><span class="line">$sql = <span class="string">"CREATE TABLE Mytest (</span></span><br><span class="line"><span class="string">id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span></span><br><span class="line"><span class="string">firstname VARCHAR(30) NOT NULL,</span></span><br><span class="line"><span class="string">lastname VARCHAR(30) NOT NULL,</span></span><br><span class="line"><span class="string">email VARCHAR(50),</span></span><br><span class="line"><span class="string">reg_date TIMESTAMP</span></span><br><span class="line"><span class="string">)"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($conn-&gt;query($sql) === <span class="keyword">TRUE</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Table Mytest</span></span><br><span class="line"><span class="string">   created successfully"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"创建数据表错误: "</span> . $conn-&gt;error;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$conn-&gt;close();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>面向过程</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line">$dbname = <span class="string">"myDatabase"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line">$conn = mysqli_connect($servername, $username, $password, $dbname);</span><br><span class="line"><span class="comment">// 检测连接</span></span><br><span class="line"><span class="keyword">if</span> (!$conn) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . mysqli_connect_error());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 sql 创建数据表</span></span><br><span class="line">$sql = <span class="string">"CREATE TABLE Mytest (</span></span><br><span class="line"><span class="string">id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span></span><br><span class="line"><span class="string">firstname VARCHAR(30) NOT NULL,</span></span><br><span class="line"><span class="string">lastname VARCHAR(30) NOT NULL,</span></span><br><span class="line"><span class="string">email VARCHAR(50),</span></span><br><span class="line"><span class="string">reg_date TIMESTAMP</span></span><br><span class="line"><span class="string">)"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (mysqli_query($conn, $sql)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"数据表 Mytest</span></span><br><span class="line"><span class="string">   创建成功"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"创建数据表错误: "</span> . mysqli_error($conn);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mysqli_close($conn);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>PDO</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line">$dbname = <span class="string">"myDatabasePDO"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</span><br><span class="line">    <span class="comment">// 设置 PDO 错误模式，用于抛出异常</span></span><br><span class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 sql 创建数据表</span></span><br><span class="line">    $sql = <span class="string">"CREATE TABLE MyTest</span></span><br><span class="line"><span class="string">   (</span></span><br><span class="line"><span class="string">    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span></span><br><span class="line"><span class="string">    firstname VARCHAR(30) NOT NULL,</span></span><br><span class="line"><span class="string">    lastname VARCHAR(30) NOT NULL,</span></span><br><span class="line"><span class="string">    email VARCHAR(50),</span></span><br><span class="line"><span class="string">    reg_date TIMESTAMP</span></span><br><span class="line"><span class="string">    )"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 exec() ，没有结果返回</span></span><br><span class="line">    $conn-&gt;exec($sql);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"数据表 MyTest</span></span><br><span class="line"><span class="string">   创建成功"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(PDOException $e)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> $sql . <span class="string">"&lt;br&gt;"</span> . $e-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$conn = <span class="keyword">null</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="插入数据-INSERT"><a href="#插入数据-INSERT" class="headerlink" title="插入数据 INSERT"></a>插入数据 INSERT</h2><p>使用INSERT进行插入操作</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name (column1, column2, column3,...)</span><br><span class="line"><span class="keyword">VALUES</span> (value1, value2, value3,...)</span><br></pre></td></tr></table></figure><h3 id="插入单条数据"><a href="#插入单条数据" class="headerlink" title="插入单条数据"></a>插入单条数据</h3><p>面向对象</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line">$dbname = <span class="string">"myDatabase"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line">$conn = <span class="keyword">new</span> mysqli($servername, $username, $password, $dbname);</span><br><span class="line"><span class="comment">// 检测连接</span></span><br><span class="line"><span class="keyword">if</span> ($conn-&gt;connect_error) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">"连接失败: "</span> . $conn-&gt;connect_error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$sql = <span class="string">"INSERT INTO MyTest (firstname, lastname, email)</span></span><br><span class="line"><span class="string">VALUES ('John', 'Doe', 'john@example.com')"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($conn-&gt;query($sql) === <span class="keyword">TRUE</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $sql . <span class="string">"&lt;br&gt;"</span> . $conn-&gt;error;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$conn-&gt;close();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>面向过程</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line">$dbname = <span class="string">"myDatabase"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line">$conn = mysqli_connect($servername, $username, $password, $dbname);</span><br><span class="line"><span class="comment">// 检测连接</span></span><br><span class="line"><span class="keyword">if</span> (!$conn) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">"Connection failed: "</span> . mysqli_connect_error());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$sql = <span class="string">"INSERT INTO MyTest (firstname, lastname, email)</span></span><br><span class="line"><span class="string">VALUES ('John', 'Doe', 'john@example.com')"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (mysqli_query($conn, $sql)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $sql . <span class="string">"&lt;br&gt;"</span> . mysqli_error($conn);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mysqli_close($conn);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>PDO</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line">$dbname = <span class="string">"myDatabasePDO"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</span><br><span class="line">    <span class="comment">// 设置 PDO 错误模式，用于抛出异常</span></span><br><span class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span><br><span class="line">    $sql = <span class="string">"INSERT INTO MyTest</span></span><br><span class="line"><span class="string">   (firstname, lastname, email)</span></span><br><span class="line"><span class="string">    VALUES ('John', 'Doe', 'john@example.com')"</span>;</span><br><span class="line">    <span class="comment">// 使用 exec() ，没有结果返回</span></span><br><span class="line">    $conn-&gt;exec($sql);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    $conn-&gt;exec("INSERT INTO MyTest</span></span><br><span class="line"><span class="comment">   (firstname, lastname, email)</span></span><br><span class="line"><span class="comment">    VALUES ('John', 'Doe', 'john<span class="doctag">@example</span>.com')")</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(PDOException $e)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> $sql . <span class="string">"&lt;br&gt;"</span> . $e-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$conn = <span class="keyword">null</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="插入多条数据"><a href="#插入多条数据" class="headerlink" title="插入多条数据"></a>插入多条数据</h3><p>mysqli_multi_query() 函数可用来执行多条SQL语句</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$sql = <span class="string">"INSERT INTO MyTest (firstname, lastname, email)</span></span><br><span class="line"><span class="string">VALUES ('John', 'Doe', 'john@example.com');"</span>;</span><br><span class="line">$sql .= <span class="string">"INSERT INTO MyTest (firstname, lastname, email)</span></span><br><span class="line"><span class="string">VALUES ('Mary', 'Moe', 'mary@example.com');"</span>;</span><br><span class="line">$sql .= <span class="string">"INSERT INTO MyTest (firstname, lastname, email)</span></span><br><span class="line"><span class="string">VALUES ('Julie', 'Dooley', 'julie@example.com')"</span>;</span><br><span class="line"></span><br><span class="line">$conn-&gt;multi_query($sql) === <span class="keyword">TRUE</span> <span class="comment">// 面向对象</span></span><br><span class="line">mysqli_multi_query($conn, $sql)  <span class="comment">//面向过程</span></span><br></pre></td></tr></table></figure><p>PDO需要使用事务函数执行多条并提交，执行失败后要使用回滚</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line">$dbname = <span class="string">"myDatabasePDO"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</span><br><span class="line">    <span class="comment">// set the PDO error mode to exception</span></span><br><span class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开始事务</span></span><br><span class="line">    $conn-&gt;beginTransaction();</span><br><span class="line">    <span class="comment">// SQL 语句</span></span><br><span class="line">    $conn-&gt;exec(<span class="string">"INSERT INTO MyTest</span></span><br><span class="line"><span class="string">   (firstname, lastname, email)</span></span><br><span class="line"><span class="string">    VALUES ('John', 'Doe', 'john@example.com')"</span>);</span><br><span class="line">    $conn-&gt;exec(<span class="string">"INSERT INTO MyTest</span></span><br><span class="line"><span class="string">   (firstname, lastname, email)</span></span><br><span class="line"><span class="string">    VALUES ('Mary', 'Moe', 'mary@example.com')"</span>);</span><br><span class="line">    $conn-&gt;exec(<span class="string">"INSERT INTO MyTest</span></span><br><span class="line"><span class="string">   (firstname, lastname, email)</span></span><br><span class="line"><span class="string">    VALUES ('Julie', 'Dooley', 'julie@example.com')"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提交事务</span></span><br><span class="line">    $conn-&gt;commit();</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(PDOException $e)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 如果执行失败回滚</span></span><br><span class="line">    $conn-&gt;rollback();</span><br><span class="line">    <span class="keyword">echo</span> $sql . <span class="string">"&lt;br&gt;"</span> . $e-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$conn = <span class="keyword">null</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="使用预处理语句优化"><a href="#使用预处理语句优化" class="headerlink" title="使用预处理语句优化"></a>使用预处理语句优化</h3><p>用于执行多个相同的 SQL 语句，也可以防止 MySQL 注入</p><p><strong>主要优势</strong></p><ol><li>预处理语句大大减少了分析时间，只做了一次查询（虽然语句多次执行）</li><li>绑定参数减少了服务器带宽，你只需要发送查询的参数，而不是整个语句</li><li>预处理语句针对SQL注入是非常有用的，因为参数值发送后使用不同的协议，保证了数据的合法性</li></ol><p><strong>流程</strong></p><ol><li>预处理：创建 SQL 语句模板并发送到数据库。预留的值使用参数 <code>?</code> 标记，可以将其替换为整型，字符串，双精度浮点型和布尔值<br><code>INSERT INTO MyTest (firstname, lastname, email) VALUES(?, ?, ?)</code></li><li>绑定 SQL 参数并告知相关的值<br><code>$stmt-&gt;bind_param(&quot;sss&quot;, $firstname, $lastname, $email);</code></li></ol><ul><li>“sss” 参数列处理参数的数据类型，参数有以下四种类型:<br>i - integer（整型）<br>d - double（双精度浮点型）<br>s - string（字符串）<br>b - BLOB（binary large object:二进制大对象）</li><li>通过告诉数据库参数的数据类型，可以降低 SQL 注入的风险</li></ul><ol start="3"><li>数据库解析，编译，对SQL语句模板执行查询优化，并存储结果不输出</li><li>执行：最后，将应用绑定的值传递给参数（<code>?</code> 标记），数据库执行语句</li></ol><p>使用预处理语句插入多条数据</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 检测数据库链接状态 同上</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 预处理及绑定</span></span><br><span class="line">$stmt = $conn-&gt;prepare(<span class="string">"INSERT INTO MyTest (firstname, lastname, email) VALUES (?, ?, ?)"</span>);</span><br><span class="line">$stmt-&gt;bind_param(<span class="string">"sss"</span>, $firstname, $lastname, $email);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置参数并执行</span></span><br><span class="line">$firstname = <span class="string">"John"</span>;</span><br><span class="line">$lastname = <span class="string">"Doe"</span>;</span><br><span class="line">$email = <span class="string">"john@example.com"</span>;</span><br><span class="line">$stmt-&gt;execute();</span><br><span class="line"></span><br><span class="line">$firstname = <span class="string">"Mary"</span>;</span><br><span class="line">$lastname = <span class="string">"Moe"</span>;</span><br><span class="line">$email = <span class="string">"mary@example.com"</span>;</span><br><span class="line">$stmt-&gt;execute();</span><br><span class="line"></span><br><span class="line">$firstname = <span class="string">"Julie"</span>;</span><br><span class="line">$lastname = <span class="string">"Dooley"</span>;</span><br><span class="line">$email = <span class="string">"julie@example.com"</span>;</span><br><span class="line">$stmt-&gt;execute();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span><br><span class="line"></span><br><span class="line">$stmt-&gt;close();</span><br><span class="line">$conn-&gt;close();</span><br></pre></td></tr></table></figure><p>PDO</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line">$dbname = <span class="string">"myDatabasePDO"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</span><br><span class="line">    <span class="comment">// 设置 PDO 错误模式为异常</span></span><br><span class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 预处理 SQL 并绑定参数</span></span><br><span class="line">    $stmt = $conn-&gt;prepare(<span class="string">"INSERT INTO MyTest</span></span><br><span class="line"><span class="string">   (firstname, lastname, email)</span></span><br><span class="line"><span class="string">    VALUES (:firstname, :lastname, :email)"</span>);</span><br><span class="line">    $stmt-&gt;bindParam(<span class="string">':firstname'</span>, $firstname);</span><br><span class="line">    $stmt-&gt;bindParam(<span class="string">':lastname'</span>, $lastname);</span><br><span class="line">    $stmt-&gt;bindParam(<span class="string">':email'</span>, $email);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 插入行</span></span><br><span class="line">    $firstname = <span class="string">"John"</span>;</span><br><span class="line">    $lastname = <span class="string">"Doe"</span>;</span><br><span class="line">    $email = <span class="string">"john@example.com"</span>;</span><br><span class="line">    $stmt-&gt;execute();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 插入其他行</span></span><br><span class="line">    $firstname = <span class="string">"Mary"</span>;</span><br><span class="line">    $lastname = <span class="string">"Moe"</span>;</span><br><span class="line">    $email = <span class="string">"mary@example.com"</span>;</span><br><span class="line">    $stmt-&gt;execute();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 插入其他行</span></span><br><span class="line">    $firstname = <span class="string">"Julie"</span>;</span><br><span class="line">    $lastname = <span class="string">"Dooley"</span>;</span><br><span class="line">    $email = <span class="string">"julie@example.com"</span>;</span><br><span class="line">    $stmt-&gt;execute();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"新记录插入成功"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(PDOException $e)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $e-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line">$conn = <span class="keyword">null</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="查询数据-SELECT"><a href="#查询数据-SELECT" class="headerlink" title="查询数据 SELECT"></a>查询数据 SELECT</h2><h3 id="简单查询"><a href="#简单查询" class="headerlink" title="简单查询"></a>简单查询</h3><p>SELECT 语句用于从数据表中读取数据:<br><code>SELECT column_name(s) FROM table_name</code></p><p>面向对象</p><ol><li>设置 SQL 语句从 MyTest数据表中读取 id, firstname 和 lastname 三个字段。</li><li>使用 SQL 语句从数据库中取出结果集并赋给复制给变量 $result。</li><li>函数 num_rows() 判断返回的数据。</li><li>函数 fetch_assoc() 将结合集放入到关联数组并循环输出</li></ol><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建和检测连接</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 建立索引</span></span><br><span class="line">$sql = <span class="string">"SELECT id, firstname, lastname FROM MyTest"</span>;</span><br><span class="line">$result = $conn-&gt;query($sql);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($result-&gt;num_rows &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 输出数据</span></span><br><span class="line">    <span class="keyword">while</span>($row = $result-&gt;fetch_assoc()) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"id: "</span> . $row[<span class="string">"id"</span>]. <span class="string">" - Name: "</span> . $row[<span class="string">"firstname"</span>]. <span class="string">" "</span> . $row[<span class="string">"lastname"</span>]. <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"0 结果"</span>;</span><br><span class="line">&#125;</span><br><span class="line">$conn-&gt;close();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>面向过程</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建并检测连接</span></span><br><span class="line"></span><br><span class="line">$sql = <span class="string">"SELECT id, firstname, lastname FROM MyTest"</span>;</span><br><span class="line">$result = mysqli_query($conn, $sql);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (mysqli_num_rows($result) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 输出数据</span></span><br><span class="line">    <span class="keyword">while</span>($row = mysqli_fetch_assoc($result)) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"id: "</span> . $row[<span class="string">"id"</span>]. <span class="string">" - Name: "</span> . $row[<span class="string">"firstname"</span>]. <span class="string">" "</span> . $row[<span class="string">"lastname"</span>]. <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"0 结果"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mysqli_close($conn);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>PDO</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$servername = <span class="string">"localhost"</span>;</span><br><span class="line">$username = <span class="string">"username"</span>;</span><br><span class="line">$password = <span class="string">"password"</span>;</span><br><span class="line">$dbname = <span class="string">"myDatabasePDO"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    $conn = <span class="keyword">new</span> PDO(<span class="string">"mysql:host=$servername;dbname=$dbname"</span>, $username, $password);</span><br><span class="line">    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</span><br><span class="line">    $stmt = $conn-&gt;prepare(<span class="string">"SELECT id, firstname, lastname FROM MyTest</span></span><br><span class="line"><span class="string">  "</span>);</span><br><span class="line">    $stmt-&gt;execute();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置结果集为关联数组</span></span><br><span class="line">    $result = $stmt-&gt;setFetchMode(PDO::FETCH_ASSOC);</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="keyword">new</span> TableRows(<span class="keyword">new</span> RecursiveArrayIterator($stmt-&gt;fetchAll())) <span class="keyword">as</span> $k=&gt;$v) &#123;</span><br><span class="line">        <span class="keyword">echo</span> $v;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(PDOException $e) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Error: "</span> . $e-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line">$conn = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;/table&gt;"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li>使用 WHERE 子句, ORDER BY 子句进行查询时，必须使用 <code>mysqli::query</code> 或 <code>mysqli_query()</code> ，用于向 MySQL 连接发送查询或命令</li></ul><h2 id="修改数据-UPDATE"><a href="#修改数据-UPDATE" class="headerlink" title="修改数据 UPDATE"></a>修改数据 UPDATE</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> table_name</span><br><span class="line"><span class="keyword">SET</span> column1=<span class="keyword">value</span>, column2=value2,...</span><br><span class="line"><span class="keyword">WHERE</span> some_column=some_value</span><br></pre></td></tr></table></figure><p>必须使用  <code>mysqli::query</code> 或 <code>mysqli_query()</code></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$con=mysqli_connect(<span class="string">"localhost"</span>,<span class="string">"username"</span>,<span class="string">"password"</span>,<span class="string">"database"</span>);</span><br><span class="line"><span class="comment">// 检测连接</span></span><br><span class="line"><span class="keyword">if</span> (mysqli_connect_errno())</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"连接失败: "</span> . mysqli_connect_error();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mysqli_query($con,<span class="string">"UPDATE Persons SET Age=36</span></span><br><span class="line"><span class="string">WHERE FirstName='Peter' AND LastName='Griffin'"</span>);</span><br><span class="line"></span><br><span class="line">mysqli_close($con);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="删除数据-DELETE"><a href="#删除数据-DELETE" class="headerlink" title="删除数据 DELETE"></a>删除数据 DELETE</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> some_column = some_value</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$con=mysqli_connect(<span class="string">"localhost"</span>,<span class="string">"username"</span>,<span class="string">"password"</span>,<span class="string">"database"</span>);</span><br><span class="line"><span class="comment">// 检测连接</span></span><br><span class="line"><span class="keyword">if</span> (mysqli_connect_errno())</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"连接失败: "</span> . mysqli_connect_error();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mysqli_query($con,<span class="string">"DELETE FROM Persons WHERE LastName='Griffin'"</span>);</span><br><span class="line"></span><br><span class="line">mysqli_close($con);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="使用的类和函数汇总"><a href="#使用的类和函数汇总" class="headerlink" title="使用的类和函数汇总"></a>使用的类和函数汇总</h2><h3 id="mysqli-PHP和Mysql数据库之间的一个连接"><a href="#mysqli-PHP和Mysql数据库之间的一个连接" class="headerlink" title="mysqli PHP和Mysql数据库之间的一个连接"></a>mysqli PHP和Mysql数据库之间的一个连接</h3><p>mysqli::init — 初始化 MySQLi 并返回一个资源类型的值，这个值可以作为 mysqli_real_connect() 函数的传入参数<br>mysqli::$info — 返回最近执行的 SQL 语句的信息<br>mysqli::stat — 获取当前系统状态信息<br>mysqli::$connect_error/mysqli_connect_error() — 返回最后连接错误描述<br>mysqli::$error/mysqli_error() — 返回最后的错误描述<br>mysqli::__construct/mysqli_connect() — 开始一个新的MySQL服务连接<br>mysqli::real_connect — 建立一个 MySQL 服务器连接<br>mysqli::select_db — 选择用于数据库查询的默认数据库<br>mysqli::query — 对数据库执行一次查询<br>mysqli::real_query — 执行一个mysql查询<br>mysqli::send_query — 发送请求并返回结果<br>mysqli::multi_query — 执行查询<br>mysqli::real_escape_string — 根据当前连接的字符集，对于 SQL 语句中的特殊字符进行转义<br>mysqli::prepare — 准备执行一个 SQL 语句<br>mysqli::stmt_init — 初始化一条语句并返回一个用于mysqli_stmt_prepare(调用)的对象<br>mysqli::rollback — 回退当前事务<br>mysqli::close/mysqli_close() — 关闭先前打开的数据库连接</p><p>mysqli::autocommit — 打开或关闭本次数据库连接的自动命令提交事务模式<br>mysqli::change_user — 改变指定数据库连接的用户<br>mysqli::character_set_name — 返回当前数据库连接的默认字符编码<br>mysqli::commit — 提交一个事务<br>mysqli::$connect_errno — 返回最后连接错误代码<br>mysqli::errno — 返回最近函数调用的错误代码<br>mysqli::$error_list — 返回最后命令行执行错误列表<br>mysqli::$field_count — Returns the number of columns for the most recent query<br>mysqli::get_charset — Returns a character set object<br>mysqli::$client_info — 获取 MySQL 客户端信息<br>mysqli_get_client_version — 作为一个整数返回MySQL客户端的版本<br>mysqli::get_connection_stats — 返回客户端连接的统计数据<br>mysqli::$host_info — 返回一个表述使用的连接类型的字符串<br>mysqli::$protocol_version — 返回MySQL使用的协议版本号<br>mysqli::$server_info — 返回MySQL服务器的版本号<br>mysqli::$server_version — 作为一个整数返回MySQL服务器的版本<br>mysqli::get_warnings — Get result of SHOW WARNINGS<br>mysqli::$insert_id — 返回最后一条插入语句产生的自增 ID<br>mysqli::kill — 让服务器杀掉一个 MySQL 线程<br>mysqli::more_results — 检查批量查询中是否还有查询结果<br>mysqli::next_result — 为读取 multi_query 执行之后的下一个结果集做准备<br>mysqli::options — 设置选项<br>mysqli::ping — ping 一个连接，或者如果连接处于断开状态，重新连接<br>mysqli::poll — 轮询连接<br>mysqli::reap_async_query — 获取异步查询的结果<br>mysqli::refresh — 刷新<br>mysqli::release_savepoint — 从当前事务的保存点中移除一个命名保存点<br>mysqli::rpl_query_type — 返回 RPL 查询类型<br>mysqli::savepoint — 在当前事务中增加一个命名保存点<br>mysqli::set_charset — 设置默认字符编码<br>mysqli::set_local_infile_default — 取消用户指定的回调函数<br>mysqli::set_local_infile_handler — 设置 LOAD DATA LOCAL INFILE 命令的回调函数<br>mysqli::$sqlstate — 返回上一次 SQL 操作的 SQLSTATE 错误信息<br>mysqli::store_result — 转移上一次查询返回的结果集<br>mysqli::$thread_id — 返回当前连接的线程 ID<br>mysqli::thread_safe — 返回是否是线程安全的</p><h3 id="mysqli-stmt-预编译-SQL-语句"><a href="#mysqli-stmt-预编译-SQL-语句" class="headerlink" title="mysqli_stmt 预编译 SQL 语句"></a>mysqli_stmt 预编译 SQL 语句</h3><p>mysqli_stmt :: prepare - 准备一条SQL语句以便执行<br>mysqli_stmt :: bind_param - 将变量作为参数绑定到预准备语句<br>mysqli_stmt :: __ construct - 构造一个新的mysqli_stmt对象<br>mysqli_stmt :: $ num_rows/mysqli_num_rows() - 返回语句结果集中的行数<br>mysqli_stmt :: $ param_count - 返回给定语句的参数个数<br>mysqli_stmt :: $ errno - 返回最近语句调用的错误代码<br>mysqli_stmt :: $ error_list - 返回上一个执行语句的错误列表<br>mysqli_stmt :: $ error - 返回上一个语句错误的字符串描述<br>mysqli_stmt :: execute - 执行准备好的Query<br>mysqli_stmt :: fetch - 将预准备语句的结果提取到绑定变量中<br>mysqli_stmt :: close - 关闭准备好的语句</p><p>mysqli_stmt :: $ affected_rows - 返回上次执行的语句更改，删除或插入的总行数<br>mysqli_stmt :: attr_get - 用于获取语句属性的当前值<br>mysqli_stmt :: attr_set - 用于修改预准备语句的行为<br>mysqli_stmt :: bind_result - 将变量绑定到结果存储的预准备语句<br>mysqli_stmt :: data_seek - 寻找语句结果集中的任意行<br>mysqli_stmt :: fetch - 将预准备语句的结果提取到绑定变量中<br>mysqli_stmt :: $ field_count - 返回给定语句中的字段数<br>mysqli_stmt :: free_result - 释放给定语句句柄的存储结果内存<br>mysqli_stmt :: get_result - 从预准备语句中获取结果集<br>mysqli_stmt :: get_warnings - 获取SHOW WARNINGS的结果<br>mysqli_stmt :: $ insert_id - 获取先前INSERT操作生成的ID<br>mysqli_stmt :: more_results - 检查多个查询是否有更多查询结果<br>mysqli_stmt :: next_result - 从多个查询中读取下一个结果<br>mysqli_stmt :: reset - 重置预准备语句<br>mysqli_stmt :: result_metadata - 从预准备语句返回结果集元数据<br>mysqli_stmt :: send_long_data - 以块为单位发送数据<br>mysqli_stmt :: $ sqlstate - 从前一个语句操作返回SQLSTATE错误<br>mysqli_stmt :: store_result - 从预准备语句中传输结果集</p><h3 id="mysqli-result-从一个数据库查询中获取的结果集"><a href="#mysqli-result-从一个数据库查询中获取的结果集" class="headerlink" title="mysqli_result 从一个数据库查询中获取的结果集"></a>mysqli_result 从一个数据库查询中获取的结果集</h3><p>mysqli_result :: fetch_all - 将所有结果行提取为关联数组，数字数组或两者<br>mysqli_result :: fetch_array - 将结果行提取为关联行，数字数组或两者<br>mysqli_result :: fetch_assoc/mysqli_fetch_assoc() - 将结果行作为关联数组获取<br>mysqli_result :: $ lengths - 返回结果集中当前行的列长度<br>mysqli_result :: $ num_rows - 获取结果中的行数</p><p>mysqli_result :: $ current_field - 获取结果指针的当前字段偏移量<br>mysqli_result :: data_seek - 将结果指针调整为结果中的任意行<br>mysqli_result :: fetch_field_direct - 获取单个字段的元数据<br>mysqli_result :: fetch_field - 返回结果集中的下一个字段<br>mysqli_result :: fetch_fields - 返回表示结果集中字段的对象数组<br>mysqli_result :: fetch_object - 将结果集的当前行作为对象返回<br>mysqli_result :: fetch_row - 将结果行作为枚举数组<br>mysqli_result :: $ field_count - 获取结果中的字段数<br>mysqli_result :: field_seek - 将结果指针设置为指定的字段偏移量<br>mysqli_result :: free - 释放与结果相关的内存</p><hr><p>相关链接：<br><a href="https://hyqskevin.github.io/2019/02/15/mysql/">mysql 学习笔记</a><br><a href="https://hyqskevin.github.io/2019/01/21/php-notes2/">PHP &amp; MySQL learning notes (3)</a><br><a href="https://hyqskevin.github.io/2018/10/28/w3school-php/">PHP &amp; MySQL learning notes (1)</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;由于PHP和MySQL版本问题，对 &lt;a href=&quot;https://hyqskevin.github.io/2018/10/28/w3school-php/#3-mySQL&quot;&gt;PHP &amp;amp; MySQL learning notes (1)&lt;/a&gt; 中曾经写过用的PHP操作MySQL数据库进行笔记更新&lt;br&gt;完善 &lt;a href=&quot;https://hyqskevin.github.io/2019/01/21/php-notes2/#MySQL&quot;&gt;PHP &amp;amp; MySQL learning notes (3)&lt;/a&gt; 中的代码&lt;br&gt;重新用 MySQLi (面向对象) MySQLi (面向过程) PDO 三种方式演示PHP操作MySQL&lt;br&gt;
    
    </summary>
    
      <category term="study" scheme="https://hyqskevin.github.io/categories/study/"/>
    
    
      <category term="php" scheme="https://hyqskevin.github.io/tags/php/"/>
    
      <category term="mysql" scheme="https://hyqskevin.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>看论文了嘛</title>
    <link href="https://hyqskevin.github.io/2019/03/01/paper/"/>
    <id>https://hyqskevin.github.io/2019/03/01/paper/</id>
    <published>2019-03-01T15:48:06.000Z</published>
    <updated>2019-03-13T15:55:11.535Z</updated>
    
    <content type="html"><![CDATA[<p>paper page test.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;paper page test.&lt;/p&gt;

      
    
    </summary>
    
      <category term="paper" scheme="https://hyqskevin.github.io/categories/paper/"/>
    
    
  </entry>
  
  <entry>
    <title>好耶 是python -- 那些神奇的py代码</title>
    <link href="https://hyqskevin.github.io/2019/03/01/nice-python/"/>
    <id>https://hyqskevin.github.io/2019/03/01/nice-python/</id>
    <published>2019-03-01T15:46:41.000Z</published>
    <updated>2019-03-13T15:55:02.209Z</updated>
    
    <content type="html"><![CDATA[<p>nice python page test.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;nice python page test.&lt;/p&gt;

      
    
    </summary>
    
      <category term="github-repo" scheme="https://hyqskevin.github.io/categories/github-repo/"/>
    
    
  </entry>
  
  <entry>
    <title>这周上Github了吗 -- 那些有意思的项目收集</title>
    <link href="https://hyqskevin.github.io/2019/03/01/github-repo/"/>
    <id>https://hyqskevin.github.io/2019/03/01/github-repo/</id>
    <published>2019-03-01T15:33:15.000Z</published>
    <updated>2019-03-13T15:55:06.385Z</updated>
    
    <content type="html"><![CDATA[<p>gtihub repository page test.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;gtihub repository page test.&lt;/p&gt;

      
    
    </summary>
    
      <category term="github-repo" scheme="https://hyqskevin.github.io/categories/github-repo/"/>
    
    
  </entry>
  
  <entry>
    <title>饥饿游戏 Chapter 15</title>
    <link href="https://hyqskevin.github.io/2019/03/01/hunger-game/"/>
    <id>https://hyqskevin.github.io/2019/03/01/hunger-game/</id>
    <published>2019-03-01T15:25:30.000Z</published>
    <updated>2019-03-13T15:54:56.735Z</updated>
    
    <content type="html"><![CDATA[<p>language learning test page.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;language learning test page.&lt;/p&gt;

      
    
    </summary>
    
      <category term="language-learning" scheme="https://hyqskevin.github.io/categories/language-learning/"/>
    
    
  </entry>
  
  <entry>
    <title>session_cookie</title>
    <link href="https://hyqskevin.github.io/2019/02/28/session-cookie/"/>
    <id>https://hyqskevin.github.io/2019/02/28/session-cookie/</id>
    <published>2019-02-28T12:42:38.000Z</published>
    <updated>2019-03-03T14:02:50.694Z</updated>
    
    <content type="html"><![CDATA[<p>Cookie和Session都是会话技术<br>Cookie是运行在客户端，Session是运行在服务器端<br>浅谈一下Session与Cookie之间的区别和联系<br><a id="more"></a></p><h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><p>Session是服务器端使用的一种记录客户端状态的机制，客户端（浏览器）访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上。</p><h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol><li>客户端（浏览器）发送请求</li><li>服务器端生成Session和一个Session ID来作为这个Session的唯一标识，将Session ID发送到客户端</li><li>客户端第二次发送请求，将前一次响应的Session ID一并发送</li><li>服务器端从请求中提取出Session ID，和保存的所有Session ID进行对比，找到对应的Session，如果该Session已经被销毁，生成新的Session</li><li>服务器端如果保存Session超出时间限制会销毁Session</li></ol><img src="https://hyqskevin.github.io/pic/session_cookie/session.png" class="[Session的工作原理]"><h3 id="Session的生命周期"><a href="#Session的生命周期" class="headerlink" title="Session的生命周期"></a>Session的生命周期</h3><p>Session保存在服务器端，为了获得更高的存取速度，服务器一般把Session放在内存里。</p><p>如果Session内容过于复杂，当大量客户访问服务器时可能会导致内存溢出。因此，Session里的信息应该尽量精简。</p><p>Session生成后，只要用户继续访问，服务器就会更新Session的最后访问时间，并维护该Session。</p><p>随着用户访问服务器，Session会越来越多。为防止内存溢出，服务器会把长时间内没有活跃的Session从内存删除。</p><h3 id="Session的用法（不详细展开）"><a href="#Session的用法（不详细展开）" class="headerlink" title="Session的用法（不详细展开）"></a>Session的用法（不详细展开）</h3><p><code>void setAttribute(String attribute, Object value)</code><br>设置Session属性<br><code>removeAttribute(String attribute)</code><br>移除Session属性<br><code>getLastAccessedTime()</code><br>返回Session的最后活跃时间<br><code>getMaxInactiveInterval()</code><br>返回Session的超时时间<br><code>void invalidate()</code><br>使该Session失效</p><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>Cookie技术是客户端的解决方案，由服务器端发给客户端的特殊信息会以文本文件的方式存放在客户端，然后客户端每次向服务器发送请求的时候都会带上这些特殊的信息。</p><h3 id="步骤-1"><a href="#步骤-1" class="headerlink" title="步骤"></a>步骤</h3><ol><li>用户使用客户端（浏览器）访问，提供个人信息并且提交至服务器</li><li>服务器在向客户端回传的同时发回个人信息，存放于HTTP响应头</li><li>当客户端（浏览器）接收到来自服务器的响应之后，浏览器会将这些信息存放在cookie文件夹下，然后再向服务器发送请求，把相应的Cookie再次发回至服务器。信息则存放在HTTP请求头</li><li>服务器端在接收到来自客户端浏览器的请求，通过分析存放于请求头的Cookie得到客户端特有的信息，从而动态生成与该客户端相对应的内容</li></ol><img src="https://hyqskevin.github.io/pic/session_cookie/cookie.png" class="[Cookie的工作原理]"><h3 id="Cookie的有效期"><a href="#Cookie的有效期" class="headerlink" title="Cookie的有效期"></a>Cookie的有效期</h3><p>Cookie的maxAge决定着Cookie的有效期，单位为秒（Second）Cookie会在maxAge秒之后自动失效</p><h3 id="Cookie的属性"><a href="#Cookie的属性" class="headerlink" title="Cookie的属性"></a>Cookie的属性</h3><p>String name：该Cookie的名称<br>Object value：该Cookie的值<br>int maxAge：该Cookie失效的时间，单位秒<br>boolean secure：该Cookie是否仅被使用安全协议传输<br>String domain：可以访问该Cookie的域名<br>String comment：该Cookie的用处说明</p><h2 id="difference-amp-connection"><a href="#difference-amp-connection" class="headerlink" title="difference &amp; connection"></a>difference &amp; connection</h2><p>区别</p><ol><li>cookie数据存放在客户的浏览器上，session数据放在服务器上</li><li>cookie不是很安全，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗，考虑到<strong>安全</strong>应当使用session；</li><li>session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能。考虑到<strong>减轻服务器性能</strong>方面，应当使用COOKIE；</li><li>单个cookie在客户端的限制是3K，就是说一个站点在客户端存放的COOKIE不能超过3K；</li></ol><p>联系</p><p>服务端执行session机制时候会生成session的id值，这个id值会发送给客户端，客户端每次请求都会把这个id值放到http请求的头部发送给服务端，而这个id值在客户端会保存下来，保存的容器就是cookie</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Cookie和Session都是会话技术&lt;br&gt;Cookie是运行在客户端，Session是运行在服务器端&lt;br&gt;浅谈一下Session与Cookie之间的区别和联系&lt;br&gt;
    
    </summary>
    
      <category term="study" scheme="https://hyqskevin.github.io/categories/study/"/>
    
    
      <category term="session" scheme="https://hyqskevin.github.io/tags/session/"/>
    
      <category term="cookie" scheme="https://hyqskevin.github.io/tags/cookie/"/>
    
  </entry>
  
  <entry>
    <title>Laravel SQL migration</title>
    <link href="https://hyqskevin.github.io/2019/02/27/migration/"/>
    <id>https://hyqskevin.github.io/2019/02/27/migration/</id>
    <published>2019-02-27T14:25:58.000Z</published>
    <updated>2019-02-27T16:49:51.738Z</updated>
    
    <content type="html"><![CDATA[<p>结合Laravel的Schema构建器构建应用的数据库表结构，类似于数据库的版本控制，允许团队成员间编辑并共享应用的数据库表结构<br>Laravel 的 Schema 门面提供了与数据库系统无关的创建和操纵表的支持，在 Laravel 所支持的所有数据库系统中提供一致的、优雅的、流式的 API，将SQL转成PHP去执行</p><p>部署环境(WAMP)<br>php 7.3.1<br>composer 1.8.4<br>laravel 5.8.0<br>MySQL 5.7.24<br><a id="more"></a></p><h2 id="迁移步骤"><a href="#迁移步骤" class="headerlink" title="迁移步骤"></a>迁移步骤</h2><ol><li>MySQL数据库创建Database</li><li>到laravel目录下修改<code>.env</code>文件符合数据库配置</li></ol><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DB_CONNECTION=mysql</span><br><span class="line">DB_HOST=127.0.0.1</span><br><span class="line">DB_PORT=3306</span><br><span class="line">DB_DATABASE=your_database_name</span><br><span class="line">DB_USERNAME=root</span><br><span class="line">DB_PASSWORD=</span><br></pre></td></tr></table></figure><ol start="3"><li><p>到laravel目录创建新的迁移<br><code>php artisan make:migration create_table_name</code><br>创建的数据表在<code>laravel\database\migration</code>目录下</p><p><code>--table</code>和<code>--create</code>选项可以用于指定表名以及该迁移是否要创建一个新的数据表。这些选项只需要简单放在上述迁移命令后面并指定表名<br><code>php artisan make:migration create_users_table --create=users</code><br><code>php artisan make:migration add_votes_to_users_table --table=users</code></p></li><li><p>编写迁移数据表<br>迁移类包含了两个方法：<code>up</code>和<code>down</code>。<code>up</code>方法用于新增表，列或者索引到数据库，而<code>down</code>方法就是<code>up</code>方法的反操作<br>用到 Laravel 的<code>schema</code>构建器来创建和修改表，后面给出具体实现方法</p></li><li><p>运行迁移表到数据库<br><code>php artisan migrate</code></p><p>强制运行这些命令而不被提示，可以使用–force（不推荐）<br><code>php artisan migrate --force</code></p><p>在MySQL中可以看到Database下有新的表</p><img src="https://hyqskevin.github.io/pic/laravel/laraveltest.png" class="[database laraveltest]"></li><li><p>执行回滚</p><p>在Database下有migration表，使得laravel可以回滚</p><img src="https://hyqskevin.github.io/pic/laravel/migration.png" class="[migration rollback]"><p>执行文件中的<code>public function down()</code>,回滚最后一批运行的迁移<br><code>php artisan migrate:rollback</code><br>回滚所有的应用迁移<br><code>php artisan migrate:reset</code><br>先回滚所有数据库迁移<br><code>php artisan migrate:refresh</code><br>回滚或重建指定数量的迁移,refresh命令提供的step选项<br><code>php artisan migrate:refresh --step=5</code></p></li><li><p>在迁移之前进行试验<br><code>php artisan migrate --pretend</code></p></li></ol><h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><p>使用Schema门面上的create方法来创建新的数据表。create方法接收两个参数，第一个是表名，第二个是获取用于定义新表的Blueprint对象的闭包<br><code>Schema::create(&#39;table_name&#39;, function (Blueprint $table){ })</code></p><h3 id="创建表中的列"><a href="#创建表中的列" class="headerlink" title="创建表中的列"></a>创建表中的列</h3><p>在Schema中创建表中的列结构 <code>$table-&gt;类型(&#39;名称&#39;);</code></p><ul><li>常用属性</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$table-&gt;bigIncrements(<span class="string">'id'</span>);<span class="comment">//自增ID，类型为bigint</span></span><br><span class="line">$table-&gt;bigInteger(<span class="string">'votes'</span>);<span class="comment">//等同于数据库中的BIGINT类型</span></span><br><span class="line">$table-&gt;binary(<span class="string">'data'</span>);<span class="comment">//等同于数据库中的BLOB类型</span></span><br><span class="line">$table-&gt;boolean(<span class="string">'confirmed'</span>);<span class="comment">//等同于数据库中的BOOLEAN类型</span></span><br><span class="line">$table-&gt;char(<span class="string">'name'</span>, <span class="number">4</span>);<span class="comment">//等同于数据库中的CHAR类型</span></span><br><span class="line">$table-&gt;date(<span class="string">'created_at'</span>);<span class="comment">//等同于数据库中的DATE类型</span></span><br><span class="line">$table-&gt;dateTime(<span class="string">'created_at'</span>);<span class="comment">//等同于数据库中的DATETIME类型</span></span><br><span class="line">$table-&gt;dateTimeTz(<span class="string">'created_at'</span>);<span class="comment">//等同于数据库中的DATETIME类型（带时区）</span></span><br><span class="line">$table-&gt;decimal(<span class="string">'amount'</span>, <span class="number">5</span>, <span class="number">2</span>);<span class="comment">//等同于数据库中的DECIMAL类型，带一个精度和范围</span></span><br><span class="line">$table-&gt;double(<span class="string">'column'</span>, <span class="number">15</span>, <span class="number">8</span>);<span class="comment">//等同于数据库中的DOUBLE类型，带精度, 总共15位数字，小数点后8位.</span></span><br><span class="line">$table-&gt;enum(<span class="string">'choices'</span>, [<span class="string">'foo'</span>, <span class="string">'bar'</span>]);<span class="comment">//等同于数据库中的 ENUM类型</span></span><br><span class="line">$table-&gt;float(<span class="string">'amount'</span>);<span class="comment">//等同于数据库中的 FLOAT 类型</span></span><br><span class="line">$table-&gt;increments(<span class="string">'id'</span>);<span class="comment">//数据库主键自增ID</span></span><br><span class="line">$table-&gt;integer(<span class="string">'votes'</span>);<span class="comment">//等同于数据库中的 INTEGER 类型</span></span><br><span class="line">$table-&gt;ipAddress(<span class="string">'visitor'</span>);<span class="comment">//等同于数据库中的 IP 地址</span></span><br><span class="line">$table-&gt;json(<span class="string">'options'</span>);<span class="comment">//等同于数据库中的 JSON 类型</span></span><br><span class="line">$table-&gt;jsonb(<span class="string">'options'</span>);<span class="comment">//等同于数据库中的 JSONB 类型</span></span><br><span class="line">$table-&gt;longText(<span class="string">'description'</span>);<span class="comment">//等同于数据库中的 LONGTEXT 类型</span></span><br><span class="line">$table-&gt;macAddress(<span class="string">'device'</span>);<span class="comment">//等同于数据库中的 MAC 地址</span></span><br><span class="line">$table-&gt;mediumIncrements(<span class="string">'id'</span>);<span class="comment">//自增ID，类型为无符号的mediumint</span></span><br><span class="line">$table-&gt;mediumInteger(<span class="string">'numbers'</span>);<span class="comment">//等同于数据库中的 MEDIUMINT类型</span></span><br><span class="line">$table-&gt;mediumText(<span class="string">'description'</span>);<span class="comment">//等同于数据库中的 MEDIUMTEXT类型</span></span><br><span class="line">$table-&gt;morphs(<span class="string">'taggable'</span>);<span class="comment">//添加一个 INTEGER类型的 taggable_id 列和一个 STRING类型的 taggable_type列</span></span><br><span class="line">$table-&gt;nullableTimestamps();<span class="comment">//和 timestamps()一样但允许 NULL值.</span></span><br><span class="line">$table-&gt;rememberToken();<span class="comment">//添加一个 remember_token 列： VARCHAR(100) NULL.</span></span><br><span class="line">$table-&gt;smallIncrements(<span class="string">'id'</span>);<span class="comment">//自增ID，类型为无符号的smallint</span></span><br><span class="line">$table-&gt;smallInteger(<span class="string">'votes'</span>);<span class="comment">//等同于数据库中的 SMALLINT 类型</span></span><br><span class="line">$table-&gt;softDeletes();<span class="comment">//新增一个 deleted_at 列 用于软删除.</span></span><br><span class="line">$table-&gt;string(<span class="string">'email'</span>);<span class="comment">//等同于数据库中的 VARCHAR 列  .</span></span><br><span class="line">$table-&gt;string(<span class="string">'name'</span>, <span class="number">100</span>);<span class="comment">//等同于数据库中的 VARCHAR，带一个长度</span></span><br><span class="line">$table-&gt;text(<span class="string">'description'</span>);<span class="comment">//等同于数据库中的 TEXT 类型</span></span><br><span class="line">$table-&gt;time(<span class="string">'sunrise'</span>);<span class="comment">//等同于数据库中的 TIME类型</span></span><br><span class="line">$table-&gt;timeTz(<span class="string">'sunrise'</span>);<span class="comment">//等同于数据库中的 TIME 类型（带时区）</span></span><br><span class="line">$table-&gt;tinyInteger(<span class="string">'numbers'</span>);<span class="comment">//等同于数据库中的 TINYINT 类型</span></span><br><span class="line">$table-&gt;timestamp(<span class="string">'added_on'</span>);<span class="comment">//等同于数据库中的 TIMESTAMP 类型</span></span><br><span class="line">$table-&gt;timestampTz(<span class="string">'added_on'</span>);<span class="comment">//等同于数据库中的 TIMESTAMP 类型（带时区）</span></span><br><span class="line">$table-&gt;timestamps();<span class="comment">//添加 created_at 和 updated_at列</span></span><br><span class="line">$table-&gt;timestampsTz();<span class="comment">//添加 created_at 和 updated_at列（带时区）</span></span><br><span class="line">$table-&gt;unsignedBigInteger(<span class="string">'votes'</span>);<span class="comment">//等同于数据库中无符号的 BIGINT 类型</span></span><br><span class="line">$table-&gt;unsignedInteger(<span class="string">'votes'</span>);<span class="comment">//等同于数据库中无符号的 INT 类型</span></span><br><span class="line">$table-&gt;unsignedMediumInteger(<span class="string">'votes'</span>);<span class="comment">//等同于数据库中无符号的 MEDIUMINT 类型</span></span><br><span class="line">$table-&gt;unsignedSmallInteger(<span class="string">'votes'</span>);<span class="comment">//等同于数据库中无符号的 SMALLINT 类型</span></span><br><span class="line">$table-&gt;unsignedTinyInteger(<span class="string">'votes'</span>);<span class="comment">//等同于数据库中无符号的 TINYINT 类型</span></span><br><span class="line">$table-&gt;uuid(<span class="string">'id'</span>);<span class="comment">//等同于数据库的UUID</span></span><br></pre></td></tr></table></figure><ul><li>常用约束</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">-&gt;after(<span class="string">'column'</span>)<span class="comment">//将该列置于另一个列之后 (仅适用于MySQL)</span></span><br><span class="line">-&gt;comment(<span class="string">'my comment'</span>)<span class="comment">//添加注释信息</span></span><br><span class="line">-&gt;default($value)<span class="comment">//指定列的默认值</span></span><br><span class="line">-&gt;first()<span class="comment">//将该列置为表中第一个列 (仅适用于MySQL)</span></span><br><span class="line">-&gt;nullable()<span class="comment">//允许该列的值为NULL</span></span><br><span class="line">-&gt;storedAs($expression)<span class="comment">//创建一个存储生成列（只支持MySQL）</span></span><br><span class="line">-&gt;unsigned()<span class="comment">//设置 integer 列为 UNSIGNED</span></span><br><span class="line">-&gt;virtualAs($expression)<span class="comment">//创建一个虚拟生成列（只支持MySQL）</span></span><br></pre></td></tr></table></figure><ul><li>格式示例</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CreateTableName</span> <span class="keyword">extends</span> <span class="title">Migration</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Run the migrations.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">up</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Schema::create(<span class="string">'table_name'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(Blueprint $table)</span> </span>&#123;</span><br><span class="line">        $table-&gt;bigIncrements(<span class="string">'id'</span>);</span><br><span class="line">        $table-&gt;string(<span class="string">'name'</span>);</span><br><span class="line">        $table-&gt;string(<span class="string">'email'</span>)-&gt;unique();</span><br><span class="line">        $table-&gt;timestamp(<span class="string">'email_verified_at'</span>)-&gt;nullable();</span><br><span class="line">        $table-&gt;string(<span class="string">'password'</span>);</span><br><span class="line">        $table-&gt;rememberToken();</span><br><span class="line">        $table-&gt;timestamps();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Reverse the migrations.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">down</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Schema::dropIfExists(<span class="string">'table_name'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="修改、重命名、删除列"><a href="#修改、重命名、删除列" class="headerlink" title="修改、重命名、删除列"></a>修改、重命名、删除列</h3><p><code>-&gt;change()</code>方法允许你修改已存在的列为新的类型，或者修改列的属性<br><code>-&gt;renameColumn()</code>方法可以重命名一个列<br><code>-&gt;dropColumn</code>方法可以删除列</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">Schema::table(<span class="string">'users'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($table)</span> </span>&#123;</span><br><span class="line">    $table-&gt;string(<span class="string">'name'</span>, <span class="number">50</span>)-&gt;change();  <span class="comment">//name列的尺寸从 25 增加到 50</span></span><br><span class="line">    $table-&gt;renameColumn(<span class="string">'from'</span>, <span class="string">'to'</span>);  <span class="comment">//重命名 from 为 to</span></span><br><span class="line">    $table-&gt;dropColumn(<span class="string">'votes'</span>);  <span class="comment">//删除一个列</span></span><br><span class="line">    $table-&gt;dropColumn([<span class="string">'votes'</span>, <span class="string">'avatar'</span>, <span class="string">'location'</span>]);  <span class="comment">//删除多个列</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>需要添加doctrine/dbal依赖到composer.json文件</li><li>暂不支持enum类型的列的修改和重命名</li></ul><h3 id="添加索引键"><a href="#添加索引键" class="headerlink" title="添加索引键"></a>添加索引键</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$table-&gt;primary(<span class="string">'id'</span>);<span class="comment">//添加主键索引</span></span><br><span class="line">$table-&gt;primary([<span class="string">'first'</span>, <span class="string">'last'</span>]);<span class="comment">//添加混合索引</span></span><br><span class="line">$table-&gt;unique(<span class="string">'email'</span>);<span class="comment">//添加唯一索引</span></span><br><span class="line">$table-&gt;unique(<span class="string">'state'</span>, <span class="string">'my_index_name'</span>);<span class="comment">//指定自定义索引名称</span></span><br><span class="line">$table-&gt;index(<span class="string">'state'</span>);<span class="comment">//添加普通索引</span></span><br></pre></td></tr></table></figure><h3 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$table-&gt;dropPrimary(<span class="string">' '</span>);<span class="comment">//删除主键索引</span></span><br><span class="line">$table-&gt;dropUnique(<span class="string">' '</span>);<span class="comment">//删除唯一索引</span></span><br><span class="line">$table-&gt;dropIndex(<span class="string">' '</span>); <span class="comment">//删除普通索引</span></span><br></pre></td></tr></table></figure><h3 id="外键约束（loading…）"><a href="#外键约束（loading…）" class="headerlink" title="外键约束（loading…）"></a>外键约束（loading…）</h3><h2 id="检查列表是否存在"><a href="#检查列表是否存在" class="headerlink" title="检查列表是否存在"></a>检查列表是否存在</h2><p>使用 <code>hasTable</code> 和 <code>hasColumn</code> 方法检查表或列是否存在</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (Schema::hasTable(<span class="string">'users'</span>)) &#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Schema::hasColumn(<span class="string">'users'</span>, <span class="string">'email'</span>)) &#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="设置表的存储引擎，在schema构建器上设置engine属性"><a href="#设置表的存储引擎，在schema构建器上设置engine属性" class="headerlink" title="设置表的存储引擎，在schema构建器上设置engine属性"></a>设置表的存储引擎，在schema构建器上设置engine属性</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">Schema::create(<span class="string">'users'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($table)</span> </span>&#123;</span><br><span class="line">    $table-&gt;engine = <span class="string">'InnoDB'</span>;</span><br><span class="line">    $table-&gt;increments(<span class="string">'id'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="重命名-删除表"><a href="#重命名-删除表" class="headerlink" title="重命名/删除表"></a>重命名/删除表</h2><p>在<code>public function up()</code>中添加<br><code>Schema::rename(&#39;your_table_name&#39;,&#39;change_name&#39;);</code><br>更新<code>public function down()</code>中的表名</p><p>在<code>public function down()</code>中添加<br><code>Schema::drop(&#39;users&#39;);</code> 或 <code>Schema::dropIfExists(&#39;users&#39;);</code><br>用于迁移的回滚</p><hr><p>参考：<br> <a href="https://laravelacademy.org/post/9580.html" target="_blank" rel="noopener">Laravel数据库迁移</a><br> <a href="https://laravel.com/docs/5.7/migrations" target="_blank" rel="noopener">Database Migration</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;结合Laravel的Schema构建器构建应用的数据库表结构，类似于数据库的版本控制，允许团队成员间编辑并共享应用的数据库表结构&lt;br&gt;Laravel 的 Schema 门面提供了与数据库系统无关的创建和操纵表的支持，在 Laravel 所支持的所有数据库系统中提供一致的、优雅的、流式的 API，将SQL转成PHP去执行&lt;/p&gt;
&lt;p&gt;部署环境(WAMP)&lt;br&gt;php 7.3.1&lt;br&gt;composer 1.8.4&lt;br&gt;laravel 5.8.0&lt;br&gt;MySQL 5.7.24&lt;br&gt;
    
    </summary>
    
      <category term="study" scheme="https://hyqskevin.github.io/categories/study/"/>
    
    
      <category term="laravel" scheme="https://hyqskevin.github.io/tags/laravel/"/>
    
  </entry>
  
  <entry>
    <title>mysql like子句和正则表达式匹配</title>
    <link href="https://hyqskevin.github.io/2019/02/23/mysql-regular/"/>
    <id>https://hyqskevin.github.io/2019/02/23/mysql-regular/</id>
    <published>2019-02-23T04:12:55.000Z</published>
    <updated>2019-03-03T08:52:10.768Z</updated>
    
    <content type="html"><![CDATA[<p>-基础笔记-<br>MySQL like子句和正则表达式的使用<br>MySQL可以通过 LIKE …% 来进行模糊匹配，也可以使用 <code>REGEXP</code> 操作符来进行正则表达式匹配<br><a id="more"></a></p><h2 id="LIKE"><a href="#LIKE" class="headerlink" title="LIKE"></a>LIKE</h2><p>当需要获取 <code>WHERE</code> 字段中包含的匹配记录，就需要在 <code>WHERE</code> 子句中使用 <code>LIKE</code> 子句<br><code>WHERE</code> 子句中可以使用 <code>=</code> 来设定获取数据的条件，<code>LIKE</code> 子句中使用百分号 <code>%</code> 字符来表示任意字符.如果没有使用 <code>%</code>, <code>LIKE</code>子句与 <code>=</code> 的效果是一样的<br>可以使用 <code>AND</code> 或者 <code>OR</code> 指定一个或多个条件,可以在 <code>DELETE</code> 或 <code>UPDATE</code> 命令中使用 <code>WHERE...LIKE</code> 子句来指定条件</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> field1, field2,...fieldN</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> field1 <span class="keyword">LIKE</span> <span class="string">`condition`</span> [<span class="keyword">AND</span> [<span class="keyword">OR</span>]] filed2 = <span class="string">'somevalue'</span></span><br></pre></td></tr></table></figure><h2 id="与WHERE条件结合"><a href="#与WHERE条件结合" class="headerlink" title="与WHERE条件结合"></a>与WHERE条件结合</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">'%a'     //以a结尾的数据</span><br><span class="line">'a%'     //以a开头的数据</span><br><span class="line">'%a%'    //含有a的数据</span><br><span class="line">'_a_'    //三位且中间字母是a的</span><br><span class="line">'_a'     //两位且结尾字母是a的</span><br><span class="line">'a_'     //两位且开头字母是a的</span><br></pre></td></tr></table></figure><h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><p>MySQL 正则模式可应用于 REGEXP 操作符中<br><strong>MySQL中正则表达式匹配不区分大小写，如希望区分大小写，可使用binary关键字</strong></p><p>模式|描述<br>|—|—|<br>|<code>^</code>|<strong>匹配输入字符串的开始位置</strong>。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 ‘\n’ 或 ‘\r’ 之后的位置。<br>|<code>$</code>|<strong>匹配输入字符串的结束位置</strong>。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 ‘\n’ 或 ‘\r’ 之前的位置。<br>|<code>.</code>|<strong>匹配除 “\n” 之外的任何单个字符</strong>。要匹配包括 ‘\n’ 在内的任何字符，请使用象 ‘[.\n]’ 的模式。<br>|<code>[...]</code>|<strong>字符集合。匹配所包含的任意一个字符</strong>。例如， ‘[abc]’ 可以匹配 “plain” 中的 ‘a’。<br>|<code>[^...]</code>|<strong>负值字符集合。匹配未包含的任意字符</strong>。例如， ‘[^abc]’ 可以匹配 “plain” 中的’p’。<br>|<code>p1|p2|p3</code>|<strong>匹配 p1 或 p2 或 p3</strong>。例如，’z|food’ 能匹配 “z” 或 “food”。’(z|f)ood’ 则匹配 “zood” 或 “food”。<br>|<code>*</code>|<strong>匹配前面的子表达式零次或多次</strong>。例如，zo<em> 能匹配 “z” 以及 “zoo”。</em> 等价于{0,}。<br>|<code>+</code>|<strong>匹配前面的子表达式一次或多次</strong>。例如，’zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}。<br>|<code>{n}</code>|<strong>n 是一个非负整数。匹配确定的 n 次</strong>。例如，’o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o。<br>|<code>{n,m}</code>|<strong>m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次</strong>。</p><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>任意字母数字：[a-zA-Z0-9]<br>任意十六进制：[a-fA-F0-9]<br>任意字符：[a-zA-Z]<br>空格和制表符：[\t]<br>任意空白字符：[\f\n\r\t\v] (换页\换行\回车\制表\纵向制表)<br>x OR y：”x|y”<br>email：”@163[.,]com$”<br>x至少出现一次，最多出现三次：”x{1，3}”</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;-基础笔记-&lt;br&gt;MySQL like子句和正则表达式的使用&lt;br&gt;MySQL可以通过 LIKE …% 来进行模糊匹配，也可以使用 &lt;code&gt;REGEXP&lt;/code&gt; 操作符来进行正则表达式匹配&lt;br&gt;
    
    </summary>
    
      <category term="study" scheme="https://hyqskevin.github.io/categories/study/"/>
    
    
      <category term="mysql" scheme="https://hyqskevin.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>fund_flow</title>
    <link href="https://hyqskevin.github.io/2019/02/20/fund-flow/"/>
    <id>https://hyqskevin.github.io/2019/02/20/fund-flow/</id>
    <published>2019-02-20T07:41:56.000Z</published>
    <updated>2019-02-27T16:59:53.903Z</updated>
    
    <content type="html"><![CDATA[<p>-服务外包项目-<br>资金流入流出问题的研究笔记，数据来自蚂蚁金服大数据赛题<br>笔记持续更新中<br><a id="more"></a></p><h2 id="研究现状"><a href="#研究现状" class="headerlink" title="研究现状"></a>研究现状</h2><h3 id="资金流入流出问题"><a href="#资金流入流出问题" class="headerlink" title="资金流入流出问题"></a>资金流入流出问题</h3><ol><li><strong>时间序列模型分析</strong>：启动时间短，训练数据量不大，成本低<br>自回归算法 AR：呈现过去时刻对预测的直接影响<br>移动平均算法 MA：预测意料之外的事<br>自回归+移动平均 ARMA：综合以上的平衡<br>齐次非平稳 ARIMA：针对非平稳序列</li></ol><ul><li>时间序列可较好的预测短期价格变动，时期增长会导致误差率增高</li></ul><ol start="2"><li>投资分析：长期分析法，利用经济学角度分析内在价值</li></ol><ul><li>基本分析：宏观经济分析，行业分析和公司分析<br>应用不够直观，市场反应不够敏锐</li><li>技术分析：根据图标信息，技术指标记录推断变化趋势<br>技术指标滞后，无法把控整体趋势  </li></ul><ol start="3"><li>混沌动力学</li><li>神经网络<br>利用探索数据间的交叉关系建立模型<br>契合资金波动的高度非线性特点</li><li>定性预测：专家意见，德尔菲法</li><li>因果预测：回归分析，定性和定量分析</li></ol><h3 id="组合算法"><a href="#组合算法" class="headerlink" title="组合算法"></a>组合算法</h3><ol><li>统计学+机器学习</li></ol><ul><li>灰色系统+神经网络</li><li>时间序列+神经网络</li></ul><ol start="2"><li>集成学习 ensemble learning</li></ol><ul><li>串行思路：采用串行的方式生成多个学习器目的在于减少偏差（bias），使用多个弱分类器组合成为一个强分类器，代表算法Bagging，boosting，GBDT</li><li>并行思路：通过使用并行的学习，得到多个学习模型然后取其平均结果目的在于减少方差，代表算法 Random Forest</li></ul><h3 id="因子分解机-Factorization-Machine-loading…"><a href="#因子分解机-Factorization-Machine-loading…" class="headerlink" title="因子分解机 Factorization Machine (loading…)"></a>因子分解机 Factorization Machine (loading…)</h3><p>通过特征向量去模拟因子分解模型，利用特征抽取的方法构造出特征并借助因子分解模型对不同变量间的相互作用进行建模</p><p>FM算法常用来解决二分类，回归，排序问题</p><h2 id="模型构建"><a href="#模型构建" class="headerlink" title="模型构建"></a>模型构建</h2><p>数据集–&gt;数据预处理–&gt;特征抽取–&gt;预测算法设计–&gt;误差分析–&gt;优化</p><p>数据预处理：剔除异常值，表格间数据集成<br>特征抽取：时间特征，用户特征，利率特征<br>预测算法设计(loading…)<br>误差分析：用均方根误差评价</p><h2 id="数据预处理"><a href="#数据预处理" class="headerlink" title="数据预处理"></a>数据预处理</h2><h3 id="余额宝用户数据"><a href="#余额宝用户数据" class="headerlink" title="余额宝用户数据"></a>余额宝用户数据</h3><p>基本信息数据 user_profile：</p><table><thead><tr><th>列名</th><th>类型</th><th style="text-align:center">含义</th><th>示例</th></tr></thead><tbody><tr><td>user_id</td><td>bigint</td><td style="text-align:center">用户</td><td>ID</td><td>1234</td></tr><tr><td>Sex</td><td>bigint</td><td style="text-align:center">用户性别（ 1 ：男， 0：女 ）</td><td>0</td></tr><tr><td>City</td><td>bigint</td><td style="text-align:center">所在城市</td><td>6081949</td></tr><tr><td>constellation</td><td>string</td><td style="text-align:center">星座</td><td>射手座</td></tr></tbody></table><p>申购赎回数据 user_balance：</p><table><thead><tr><th>列名</th><th>类型</th><th style="text-align:center">含义</th><th>示例</th></tr></thead><tbody><tr><td>user_id</td><td>bigint</td><td style="text-align:center">用户 id</td><td>1234</td></tr><tr><td>report_date</td><td>string</td><td style="text-align:center">日期</td><td>20140407</td></tr><tr><td>tBalance</td><td>bigint</td><td style="text-align:center">今日余额</td><td>109004</td></tr><tr><td>yBalance</td><td>bigint</td><td style="text-align:center">昨日余额</td><td>97389</td></tr><tr><td>total_purchase_amt</td><td>bigint</td><td style="text-align:center">今日总购买量 = 直接购买 + 收益</td><td>21876</td></tr><tr><td>direct_purchase_amt</td><td>bigint</td><td style="text-align:center">今日直接购买量</td><td>21863</td></tr><tr><td>purchase_bal_amt</td><td>bigint</td><td style="text-align:center">今日支付宝余额购买量</td><td>0</td></tr><tr><td>purchase_bank_amt</td><td>bigint</td><td style="text-align:center">今日银行卡购买量</td><td>21863</td></tr><tr><td>total_redeem_amt</td><td>bigint</td><td style="text-align:center">今日总赎回量 = 消费 + 转出</td><td>10261</td></tr><tr><td>consume_amt</td><td>bigint</td><td style="text-align:center">今日消费总量</td><td>0</td></tr><tr><td>transfer_amt</td><td>bigint</td><td style="text-align:center">今日转出总量</td><td>10261</td></tr><tr><td>tftobal_amt</td><td>bigint</td><td style="text-align:center">今日转出到支付宝余额总量</td><td>0</td></tr><tr><td>tftocard_amt</td><td>bigint</td><td style="text-align:center">今日转出到银行卡总量</td><td>10261</td></tr><tr><td>share_amt</td><td>bigint</td><td style="text-align:center">今日收益</td><td>13</td></tr><tr><td>category1</td><td>bigint</td><td style="text-align:center">今日类目 1 消费总额</td><td>0</td></tr><tr><td>category2</td><td>bigint</td><td style="text-align:center">今日类目 2 消费总额</td><td>0</td></tr><tr><td>category3</td><td>bigint</td><td style="text-align:center">今日类目 3 消费总额</td><td>0</td></tr><tr><td>category4</td><td>bigint</td><td style="text-align:center">今日类目 4 消费总额</td><td>0</td></tr></tbody></table><p>收益率数据 mfd_day_share_interest：</p><table><thead><tr><th>列名</th><th>类型</th><th style="text-align:center">含义</th><th>示例</th></tr></thead><tbody><tr><td>mfd_date</td><td>string</td><td style="text-align:center">日期</td><td>20140102</td></tr><tr><td>mfd_daily_yield</td><td>double</td><td style="text-align:center">万份收益，即 1 万块钱的收益。</td><td>1.5787</td></tr><tr><td>mfd_7daily_yield</td><td>double</td><td style="text-align:center">七日年化收益率（ % ）</td><td>6.307</td></tr></tbody></table><p>银行拆借利率数据 mfd_bank_shibor：</p><table><thead><tr><th>列名</th><th>类型</th><th style="text-align:center">含义</th><th>示例</th></tr></thead><tbody><tr><td>mfd_date</td><td>String</td><td style="text-align:center">日期</td><td>20140102</td></tr><tr><td>Interest_O_N</td><td>Double</td><td style="text-align:center">隔夜利率（%）</td><td>2.8</td></tr><tr><td>Interest_1_W</td><td>Double</td><td style="text-align:center">1周利率（%）</td><td>4.25</td></tr><tr><td>Interest_2_W</td><td>Double</td><td style="text-align:center">2周利率（%）</td><td>4.9</td></tr><tr><td>Interest_1_M</td><td>Double</td><td style="text-align:center">1个月利率（%）</td><td>5.04</td></tr><tr><td>Interest_3_M</td><td>Double</td><td style="text-align:center">3个月利率（%）</td><td>4.91</td></tr><tr><td>Interest_6_M</td><td>Double</td><td style="text-align:center">6个月利率（%）</td><td>4.79</td></tr><tr><td>Interest_9_M</td><td>Double</td><td style="text-align:center">9个月利率（%）</td><td>4.76</td></tr><tr><td>Interest_1_Y</td><td>Double</td><td style="text-align:center">1年利率（%）</td><td>4.78</td></tr></tbody></table><h3 id="数据关系"><a href="#数据关系" class="headerlink" title="数据关系"></a>数据关系</h3><p>今日余额 = 昨日余额 + 今日申购 - 今日赎回<br>今日余额 = 昨日余额 + [直接购买(支付宝+银行)+ 收益] - [消费 + 支出(支付宝+银行)]<br>tBalance = yBalance + (direct_purchase_amt + share_amt) - (consume_amt + transfer_amt)</p><h2 id="抽取特征"><a href="#抽取特征" class="headerlink" title="抽取特征"></a>抽取特征</h2><h2 id="资金流预测"><a href="#资金流预测" class="headerlink" title="资金流预测"></a>资金流预测</h2><p>采用时间序列预测的ARIMA模型，BP神经网络，集成学习来进行预测，并结合不同的算法进行组合预测</p><h3 id="ARIMA"><a href="#ARIMA" class="headerlink" title="ARIMA"></a>ARIMA</h3><h3 id="BP"><a href="#BP" class="headerlink" title="BP"></a>BP</h3><h3 id="ARIMA-BP"><a href="#ARIMA-BP" class="headerlink" title="ARIMA+BP"></a>ARIMA+BP</h3><h3 id="GBDT"><a href="#GBDT" class="headerlink" title="GBDT"></a>GBDT</h3><h3 id="Random-Forest"><a href="#Random-Forest" class="headerlink" title="Random Forest"></a>Random Forest</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;-服务外包项目-&lt;br&gt;资金流入流出问题的研究笔记，数据来自蚂蚁金服大数据赛题&lt;br&gt;笔记持续更新中&lt;br&gt;
    
    </summary>
    
      <category term="practice" scheme="https://hyqskevin.github.io/categories/practice/"/>
    
    
      <category term="time_series" scheme="https://hyqskevin.github.io/tags/time-series/"/>
    
      <category term="ensemble_learning" scheme="https://hyqskevin.github.io/tags/ensemble-learning/"/>
    
      <category term="bp_nn" scheme="https://hyqskevin.github.io/tags/bp-nn/"/>
    
  </entry>
  
  <entry>
    <title>pandas comparison with SQL</title>
    <link href="https://hyqskevin.github.io/2019/02/19/pandas%20compare%20with%20SQL/"/>
    <id>https://hyqskevin.github.io/2019/02/19/pandas compare with SQL/</id>
    <published>2019-02-19T07:41:56.000Z</published>
    <updated>2019-03-03T12:21:19.006Z</updated>
    
    <content type="html"><![CDATA[<p>-loading…-<br>some examples of how various SQL operations would be performed using pandas<br>收集和比较pandas使用过程中和数据库类似的一些操作，方便使用pandas进行数据分析<br><a id="more"></a></p><p>import pandas and NumPy as follows</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br></pre></td></tr></table></figure><h2 id="select"><a href="#select" class="headerlink" title="select"></a>select</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">'total_bill'</span>, <span class="string">'tip'</span>, <span class="string">'smoker'</span>, <span class="string">'time`'</span></span><br><span class="line"><span class="keyword">FROM</span> tips</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure><p>With pandas, column selection is done by passing a list of column names to your DataFrame:<br><code>tips[[&#39;total_bill&#39;, &#39;tip&#39;, &#39;smoker&#39;, &#39;time&#39;]].head(5)</code></p><p>pandas中利用列名和head()进行筛选<br>SELECT * = 不列举列名，显示所有列</p><h2 id="where"><a href="#where" class="headerlink" title="where"></a>where</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> tips</span><br><span class="line"><span class="keyword">WHERE</span> <span class="built_in">time</span> = <span class="string">'Dinner'</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure><p>DataFrames can be filtered in multiple ways; the most intuitive of which is using boolean indexing.<br><code>tips[tips[&#39;time&#39;] == &#39;Dinner&#39;].head(5)</code></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">is_dinner = tips[<span class="string">'time'</span>] == <span class="string">'Dinner'</span></span><br><span class="line">is_dinner.value_counts()</span><br><span class="line"></span><br><span class="line"><span class="keyword">True</span>     <span class="number">176</span></span><br><span class="line"><span class="keyword">False</span>     <span class="number">68</span></span><br><span class="line">Name: time, dtype: int64</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- tips of more than $5.00 at Dinner meals</span></span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> tips</span><br><span class="line"><span class="keyword">WHERE</span> <span class="built_in">time</span> = <span class="string">'Dinner'</span> <span class="keyword">AND</span> tip &gt; <span class="number">5.00</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> tips</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">size</span> &gt;= <span class="number">5</span> <span class="keyword">OR</span> total_bill &gt; <span class="number">45</span>;</span><br></pre></td></tr></table></figure><p>multiple conditions can be passed to a DataFrame using | (OR) and &amp; (AND)<br><code>tips[(tips[&#39;time&#39;] == &#39;Dinner&#39;) &amp; (tips[&#39;tip&#39;] &gt; 5.00)]</code><br><code>tips[(tips[&#39;size&#39;] &gt;= 5) | (tips[&#39;total_bill&#39;] &gt; 45)]</code></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> frame</span><br><span class="line"><span class="keyword">WHERE</span> col2 <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> frame</span><br><span class="line"><span class="keyword">WHERE</span> col1 <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure><p>NULL checking is done using the notna() and isna() methods.<br><code>frame[frame[&#39;col2&#39;].isna()]</code><br><code>frame[frame[&#39;col1&#39;].notna()]</code></p><h2 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sex, <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">FROM</span> tips</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"><span class="comment">-- Female 87 Male 157</span></span><br></pre></td></tr></table></figure><p>GROUP BY operations are performed using the similarly named groupby() method<br><code>tips.groupby(&#39;sex&#39;).size()</code></p><p>we used size() and not count(). This is because count() applies the function to each column, returning the number of not null records within each.</p><p>we could have applied the count() method to an individual column:<br><code>ips.groupby(&#39;sex&#39;)[&#39;total_bill&#39;].count()</code></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">day</span>, <span class="keyword">AVG</span>(tip), <span class="keyword">COUNT</span>(*)</span><br><span class="line"><span class="keyword">FROM</span> tips</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">day</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Fri   2.734737   19</span></span><br><span class="line"><span class="comment">Sat   2.993103   87</span></span><br><span class="line"><span class="comment">Sun   3.255132   76</span></span><br><span class="line"><span class="comment">Thur  2.771452   62</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>agg() allows you to pass a dictionary to your grouped DataFrame, indicating which functions to apply to specific columns.<br><code>tips.groupby(&#39;day&#39;).agg({&#39;tip&#39;: np.mean, &#39;day&#39;: np.size})</code></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> smoker, <span class="keyword">day</span>, <span class="keyword">COUNT</span>(*), <span class="keyword">AVG</span>(tip)</span><br><span class="line"><span class="keyword">FROM</span> tips</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> smoker, <span class="keyword">day</span>;</span><br></pre></td></tr></table></figure><p>Grouping by more than one column is done by passing a list of columns to the groupby() method.<br><code>tips.groupby([&#39;smoker&#39;, &#39;day&#39;]).agg({&#39;tip&#39;: [np.size, np.mean]})</code></p><h2 id="join"><a href="#join" class="headerlink" title="join"></a>join</h2><h3 id="inner-join"><a href="#inner-join" class="headerlink" title="inner join"></a>inner join</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> df1</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> df2</span><br><span class="line">  <span class="keyword">ON</span> df1.key = df2.key;</span><br></pre></td></tr></table></figure><p>JOINs can be performed with join() or merge()<br><code>pd.merge(df1, df2, on=&#39;key&#39;)</code></p><p>merge() also offers parameters for cases when you’d like to join one DataFrame’s column with another DataFrame’s index<br><code>indexed_df2 = df2.set_index(&#39;key&#39;)</code></p><h3 id="left-outer-join"><a href="#left-outer-join" class="headerlink" title="left outer join"></a>left outer join</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- show all records from df1</span></span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> df1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> df2</span><br><span class="line">  <span class="keyword">ON</span> df1.key = df2.key;</span><br></pre></td></tr></table></figure><p><code>pd.merge(df1, df2, on=&#39;key&#39;, how=&#39;left&#39;)</code></p><h3 id="right-join"><a href="#right-join" class="headerlink" title="right join"></a>right join</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- show all records from df1</span></span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> df1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> df2</span><br><span class="line">  <span class="keyword">ON</span> df1.key = df2.key;</span><br></pre></td></tr></table></figure><p><code>pd.merge(df1, df2, on=&#39;key&#39;, how=&#39;right&#39;)</code></p><h3 id="full-join"><a href="#full-join" class="headerlink" title="full join"></a>full join</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- show all records from both tables</span></span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> df1</span><br><span class="line"><span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> df2</span><br><span class="line">  <span class="keyword">ON</span> df1.key = df2.key;</span><br></pre></td></tr></table></figure><p><code>pd.merge(df1, df2, on=&#39;key&#39;, how=&#39;outer&#39;)</code></p><ul><li>full join are not supported in all RDBMS(关系型数据库)</li></ul><h2 id="union"><a href="#union" class="headerlink" title="union"></a>union</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> city, <span class="keyword">rank</span></span><br><span class="line"><span class="keyword">FROM</span> df1</span><br><span class="line"><span class="keyword">UNION</span> ALL</span><br><span class="line"><span class="keyword">SELECT</span> city, <span class="keyword">rank</span></span><br><span class="line"><span class="keyword">FROM</span> df2;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">         city  rank</span></span><br><span class="line"><span class="comment">      Chicago     1</span></span><br><span class="line"><span class="comment">San Francisco     2</span></span><br><span class="line"><span class="comment">New York City     3</span></span><br><span class="line"><span class="comment">      Chicago     1</span></span><br><span class="line"><span class="comment">       Boston     4</span></span><br><span class="line"><span class="comment">  Los Angeles     5</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>UNION ALL can be performed using <code>concat()</code>.<br><code>pd.concat([df1, df2])</code></p><p>use <code>concat().drop_duplicates()</code> to remove duplicate rows<br><code>pd.concat([df1, df2]).drop_duplicates()</code></p><h3 id="analytic-and-aggregate"><a href="#analytic-and-aggregate" class="headerlink" title="analytic and aggregate"></a>analytic and aggregate</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tips</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> tip <span class="keyword">DESC</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">10</span> <span class="keyword">OFFSET</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure><p>根据<code>tip</code>降序排序，从最小5开始输出10个结果<br><code>tips.nlargest(10 + 5, columns=&#39;tip&#39;).tail(10)</code></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Oracle's ROW_NUMBER() analytic function</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> (</span><br><span class="line">  <span class="keyword">SELECT</span></span><br><span class="line">    t.*,</span><br><span class="line">    ROW_NUMBER() <span class="keyword">OVER</span>(<span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">day</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> total_bill <span class="keyword">DESC</span>) <span class="keyword">AS</span> rn</span><br><span class="line">  <span class="keyword">FROM</span> tips t</span><br><span class="line">)</span><br><span class="line"><span class="keyword">WHERE</span> rn &lt; <span class="number">3</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">day</span>, rn;</span><br></pre></td></tr></table></figure><p><code>ROW_NUMBER() OVER (PARTITION BY COL1 ORDER BY COL2)</code>row_number从1开始，为每一条分组记录返回一个数字,根据COL1分组，在分组内部根据 COL2排序，而此函数计算的值就表示每组内部排序后的顺序编号（组内连续的唯一的)<br>MySQL本身不含<code>row_number()</code>函数</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(tips.assign(rn=tips.sort_values([<span class="string">'total_bill'</span>], ascending=<span class="keyword">False</span>)</span><br><span class="line">    .groupby([<span class="string">'day'</span>])</span><br><span class="line">    .cumcount() + <span class="number">1</span>)</span><br><span class="line">    .query(<span class="string">'rn &lt; 3'</span>)</span><br><span class="line">    .sort_values([<span class="string">'day'</span>, <span class="string">'rn'</span>]))</span><br></pre></td></tr></table></figure><p>sort_values([‘total_bill’], ascending=False 根据total_bill的值倒叙排序，赋值rn<br>groupby([‘day’]) 根据day聚合<br>query(‘rn &lt; 3’) 筛选rn&lt;3的行</p><h4 id="Top-N-rows-with-offset"><a href="#Top-N-rows-with-offset" class="headerlink" title="Top N rows with offset"></a>Top N rows with offset</h4><h4 id="Top-N-rows-per-group"><a href="#Top-N-rows-per-group" class="headerlink" title="Top N rows per group"></a>Top N rows per group</h4><h3 id="uodate"><a href="#uodate" class="headerlink" title="uodate"></a>uodate</h3><h3 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;-loading…-&lt;br&gt;some examples of how various SQL operations would be performed using pandas&lt;br&gt;收集和比较pandas使用过程中和数据库类似的一些操作，方便使用pandas进行数据分析&lt;br&gt;
    
    </summary>
    
      <category term="practice" scheme="https://hyqskevin.github.io/categories/practice/"/>
    
    
      <category term="python" scheme="https://hyqskevin.github.io/tags/python/"/>
    
      <category term="pandas" scheme="https://hyqskevin.github.io/tags/pandas/"/>
    
  </entry>
  
  <entry>
    <title>book-list</title>
    <link href="https://hyqskevin.github.io/2019/02/16/book-list/"/>
    <id>https://hyqskevin.github.io/2019/02/16/book-list/</id>
    <published>2019-02-16T03:02:57.000Z</published>
    <updated>2019-03-03T09:06:30.005Z</updated>
    
    <content type="html"><![CDATA[<p>个人书库，收集正在看的和准备要看的好书，不定期更新<br><a id="more"></a></p><h4 id="【2018年《华盛顿邮报》推荐书单】"><a href="#【2018年《华盛顿邮报》推荐书单】" class="headerlink" title="【2018年《华盛顿邮报》推荐书单】"></a>【2018年《华盛顿邮报》推荐书单】</h4><p>本年度推荐的书：<br>《Good Aand Mad》（《善良与狂暴》）、<br>《The Library Book》（图书馆的书）、<br>《The line becomes a river》（《一条线变成一条河》）、<br>《The maze at Windermere》（《温德米尔的迷宫》）、<br>《On desperate ground》（《在绝望的战场上》）、<br>《One person,no vote》（《一人，零票》）、<br>《The Overstory》（《上层林冠》）、<br>《A place for US》（《属于我们的地方》）、<br>《There  There》（《好了，没事了》）、<br>《Washington Black》（《华盛顿黑人》）<br><br></p><h4 id="【2018年《华尔街日报》十佳书单】"><a href="#【2018年《华尔街日报》十佳书单】" class="headerlink" title="【2018年《华尔街日报》十佳书单】"></a>【2018年《华尔街日报》十佳书单】</h4><p>本年度推荐的书：<br>《不对称》(ASYMMETRY)<br>《丘吉尔传》(CHURCHILL)<br>《暴风骤雨》(CLOUDBURSTS)<br>《意识的本能》(THE CONSCIOUSNESS INSTINCT)<br>《弗雷德里克·道格拉斯传》(FREDERICK DOUGLASS)<br>《天赐良机》(GODSEND)<br>《伊庇鲁斯的挽歌》(LAMENT FROM EPIRUS)<br>《我自己的生活》(A LIFE OF MY OWN)<br>《头号爱国者》(PATRIOT NUMBER ONE)<br>《暗影季节》(SEASON OF THE SHADOW)<br><br></p><h4 id="【2018《金融时报》和麦肯锡年度“最佳商业图书奖”入围书单-】"><a href="#【2018《金融时报》和麦肯锡年度“最佳商业图书奖”入围书单-】" class="headerlink" title="【2018《金融时报》和麦肯锡年度“最佳商业图书奖”入围书单 】"></a>【2018《金融时报》和麦肯锡年度“最佳商业图书奖”入围书单 】</h4><p>本年度推荐的书：<br>《美国资本主义》（Capitalism in America）<br>《崩溃》（Crashed）<br>《短命的银行》（The Bank That Lived A Little）<br>《受损的商品》（Damaged Goods）<br>《滴血成金》（Bad Blood）<br>《十亿美元鲸鱼》（Billion Dollar Whale）：<br>《简斯维尔》（Janesville），<br>《认清事实》（Factfulness）：<br>《万物价值》（The Value of Everything）<br>《给人民发钱》（Give People Money）<br>《新势力》（New Power）<br>《零工》（Gigged）<br>《亿万富翁的天下》（The Billionaire Raj）<br>《崛起的五千万》（Fifty Million Rising）<br>《极乐男权》（Brotopia）<br>《谁是迈克尔·奥维茨？》（Who Is Michael Ovitz?）<br><br></p><h4 id="【2018年比尔·盖茨推荐的5本书】"><a href="#【2018年比尔·盖茨推荐的5本书】" class="headerlink" title="【2018年比尔·盖茨推荐的5本书】"></a>【2018年比尔·盖茨推荐的5本书】</h4><p>本年度推荐的书：<br>《21世纪的21一个教训 21 Lessons for the 21st Century》<br>《一扫光的武器  Army of None_ Autonomous Weapons and the Future of War》<br>《Educated 》<br>《Bad Blood》<br>《Meditation and Mindfulness》<br><br></p><h4 id="【《经济学人》2018年推荐书单】"><a href="#【《经济学人》2018年推荐书单】" class="headerlink" title="【《经济学人》2018年推荐书单】"></a>【《经济学人》2018年推荐书单】</h4><p>《Moneyland》<br>《Enlightenment Now》<br>《Fascism: A Warning》<br>《First Raise a Flag》<br>《Into the Hands of the Soldiers》<br>《Shadows of Empire》<br>《A History of America in 100 Maps》<br>《Pogrom》<br>《The China Mission》<br>《Rise and Kill First》<br>《We the Corporations》<br>《AI Superpowers》<br>《Radical Markets》<br>《EuroTragedy》<br>《Crashed》<br>《The Wife’s Tale: A Personal History》<br>《Educated》<br>《Barracoon》<br>《Napoleon: A Life》<br>《Churchill: Walking with Destiny》<br>《Gandhi》<br>《The Spy and the Traitor》<br><br></p><h4 id="【彭博盘点2018年书单】"><a href="#【彭博盘点2018年书单】" class="headerlink" title="【彭博盘点2018年书单】"></a>【彭博盘点2018年书单】</h4><p>《high growth handbook》<br>《The Coddling of the American Mind: How Good Intentions and Bad Ideas Are Setting Up a Generation for Failure》<br>《Our Towns: A 100,000-Mile Journey Into the Heart of America》<br>《Educated: A Memoir》<br>《Stubborn Attachments: A Vision for a Society of Free, Prosperous, and Responsible Individuals》<br>《Refugee》<br>《Factfulness: Ten Reasons We’re Wrong About the World—and Why Things Are Better Than You Think》<br>《The Efficiency Paradox: What Big Data Can’t Do》<br>《The Third Plate: Field Notes on the Future of Food》<br>《Inspired: How to Create Tech Products Customers Love》<br>《Bad Blood: Secrets and Lies in a Silicon Valley Startup》<br>《Grant》<br>《Principles: Life and Work》<br>《The Coddling of the American Mind: How Good Intentions and Bad Ideas Are Setting Up a Generation for Failure》<br>《The Culture Code: The Secrets of Highly Successful Groups》<br>《Hit Refresh: The Quest to Rediscover Microsoft’s Soul and Imagine a Better Future for Everyone》<br>《Keeping At It: The Quest for Sound Money and Good Government》<br>《New Power: How Power Works in Our Hyperconnected World—and How to Make It Work for You》<br>《The Complete Personal Memoirs of Ulysses S. Grant》<br>《The Book of Why: The New Science of Cause and Effect》<br>《Powerful: Building a Culture of Freedom and Responsibility》<br>《The Courage to Be Disliked: The Japanese Phenomenon That Shows You How to Change Your Life and Achieve Real 》《Happiness》<br>《Dare to Lead: Brave Work. Tough Conversations. Whole Hearts.》<br>《Without Precedent: Chief Justice John Marshall and His Times》<br>《The Largesse of the Sea Maiden: Stories》<br>《Paris in the Present Tense》<br>《Destined for War: Can America and China Escape Thucydides’s Trap?》<br>《Small Fry》<br>《Life 3.0: Being Human in the Age of Artificial Intelligence》<br>《Love and Ruin》<br><br></p><ul><li><a href="https://www.jianshu.com/p/0dc43df2c3eb" target="_blank" rel="noopener">来源：jianshu.com/p/0dc43df2c3eb</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;个人书库，收集正在看的和准备要看的好书，不定期更新&lt;br&gt;
    
    </summary>
    
      <category term="repo" scheme="https://hyqskevin.github.io/categories/repo/"/>
    
    
      <category term="book" scheme="https://hyqskevin.github.io/tags/book/"/>
    
  </entry>
  
  <entry>
    <title>mysql 学习笔记</title>
    <link href="https://hyqskevin.github.io/2019/02/15/mysql/"/>
    <id>https://hyqskevin.github.io/2019/02/15/mysql/</id>
    <published>2019-02-15T07:59:50.000Z</published>
    <updated>2019-03-03T08:21:20.998Z</updated>
    
    <content type="html"><![CDATA[<p>-基础笔记-<br>二次回顾，学校课程 + 慕课网 MySQL 详细学习笔记<br>包括MySQL架构，MySQL操作，数据类型，数据库操作，数据表操作（创增删改查排序分组）及子句操作<br><a id="more"></a></p><h2 id="相关术语"><a href="#相关术语" class="headerlink" title="相关术语"></a>相关术语</h2><p>DB：数据库(Database)<br>DBS：数据库系统(Database System)<br>DBMS：数据库管理系统(Database Management System)</p><p>SQL语言：</p><ul><li>DDL  数据定义语言</li><li>DML  数据操作语言</li><li>DQL  数据查询语言</li><li>DCL  数据控制语言</li></ul><h2 id="MySQL架构"><a href="#MySQL架构" class="headerlink" title="MySQL架构"></a>MySQL架构</h2><p>MySQL是由SQL接口、解析器、优化器、缓存和存储引擎组成</p><ul><li>Connectors  指的是不同语言与SQL的交互接口</li><li>Management Serivices &amp; Utillities  系统管理和工具</li><li>Connection Pool  连接池，管理缓冲用户连接，线程处理等需要缓存的需求</li><li>SQL Interface  接收用户的SQL指令，并且返回需要查询的结果</li><li>Parser  解析器</li><li>Optimizer  查询优化器  选取-投影-联接</li><li>Caches &amp; Buffers  查询缓存</li><li>Engine  存储引擎</li></ul><img src="https://hyqskevin.github.io/pic/mysql.png" class="[MySQL架构]"><h3 id="MySQL存储引擎-loading…"><a href="#MySQL存储引擎-loading…" class="headerlink" title="MySQL存储引擎(loading…)"></a>MySQL存储引擎(loading…)</h3><h4 id="memory存储引擎"><a href="#memory存储引擎" class="headerlink" title="memory存储引擎"></a>memory存储引擎</h4><h4 id="CSV存储引擎"><a href="#CSV存储引擎" class="headerlink" title="CSV存储引擎"></a>CSV存储引擎</h4><h4 id="archive存储引擎"><a href="#archive存储引擎" class="headerlink" title="archive存储引擎"></a>archive存储引擎</h4><h4 id="myisam存储引擎"><a href="#myisam存储引擎" class="headerlink" title="myisam存储引擎"></a>myisam存储引擎</h4><h4 id="innodb存储引擎"><a href="#innodb存储引擎" class="headerlink" title="innodb存储引擎"></a>innodb存储引擎</h4><h2 id="mysql相关操作"><a href="#mysql相关操作" class="headerlink" title="mysql相关操作"></a>mysql相关操作</h2><p>my.cnf是MySQL的配置文件</p><h3 id="登陆-退出MySQL"><a href="#登陆-退出MySQL" class="headerlink" title="登陆/退出MySQL"></a>登陆/退出MySQL</h3><p>登陆</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line">mysql -hlocalhost -uroot -p -P3306</span><br><span class="line">mysql -uroot -p --prompt=命令提示符  //登陆的同时修改密令提示符</span><br><span class="line">mysql -uroot -p -D db_name  //登陆的同时打开指定数据库</span><br></pre></td></tr></table></figure><p>\h 主机<br>\u 当前登陆的用户<br>\d 当前打开的数据库<br>\D 当前服务器的日期时间<br>\c取消当前命令的执行<br>help或者\h或者?加上相关关键字来查看手册<br>命令行结束符默认使用;或者\g来结束</p><p>退出：exit | quit | \q | ctrl+c</p><h3 id="MySQL语句"><a href="#MySQL语句" class="headerlink" title="MySQL语句"></a>MySQL语句</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>()  //得到登陆的用户</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">VERSION</span>()  //得到MySQL的版本信息</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOW</span>()  //得到当前的日期时间</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATABASE</span>()  //得到当前打开的数据库</span><br></pre></td></tr></table></figure><h3 id="MySQL常用函数"><a href="#MySQL常用函数" class="headerlink" title="MySQL常用函数"></a>MySQL常用函数</h3><p>CEIL()    进一取整<br>FLOOR()    舍掉小数部分<br>ROUND()    四舍五入<br>TRUNCATE()    截取小数点后几位<br>MOD()    取余数<br>ABS()    取绝对值<br>POWER()    幂运算<br>PI()    圆周率<br>RAND()或者RAND(X)    0~1之间的随机数<br>SIGN(X)    得到数字符号<br>EXP(X)    计算e的x次方</p><h2 id="数据库相关操作"><a href="#数据库相关操作" class="headerlink" title="数据库相关操作"></a>数据库相关操作</h2><ol><li><p>创建数据库<br><code>CREATE {DATABASE|SCHEMA} db_name;</code><br>检测数据库名称是否存在，不存在则创建<br><code>CREATE DATABASE [IF NOT EXISTS] db_name;</code><br>在创建数据库的同时指定编码方式<br><code>CREATE DATABASE [IF NOT EXISTS] db_name [DEFAULT] CHARACTER SET [=] charset;</code></p></li><li><p>查看当前服务器下全部数据库<br><code>SHOW DATABASES|SCHEMAS;</code></p></li><li><p>查看指定数据库的详细信息<br><code>SHOW CREATE DATABASE db_name;</code></p></li><li><p>修改指定数据库的编码方式<br><code>ALTER DATABASE db_name [DEFAULT] CHARACTER SET [=] charset;</code></p></li><li><p>打开指定数据库<br><code>USE db_name;</code></p></li><li><p>得到当前打开的数据库<br><code>SELECT DATABASE()|SCHEMA();</code></p></li><li><p>删除指定的数据库<br><code>DROP DATABASE db_name;</code><br>如果数据库存在则删除<br><code>DROP DATABASE [IF EXISTS] db_name;</code></p></li></ol><h2 id="MySQL数据类型"><a href="#MySQL数据类型" class="headerlink" title="MySQL数据类型"></a>MySQL数据类型</h2><img src="https://hyqskevin.github.io/pic/int.png" class="[整数型]"><img src="https://hyqskevin.github.io/pic/float.png" class="[浮点数型]"><img src="https://hyqskevin.github.io/pic/char.png" class="[字符串型]"><p>CHAR效率高于VARCHAR,CHAR相当于拿空间换时间，VARCHAR拿时间换空间<br>CHAR默认存储数据的时候，后面会用空格填充到指定长度；而在检索的时候会去掉后面空格；VARCHAR在保存的时候不进行填充，尾部的空格会留下<br>TEXT列不能有默认值,检索的时候不存在大小写转换<br><img src="https://hyqskevin.github.io/pic/date.png" class="[日期时间型]"></p><h2 id="数据表相关操作"><a href="#数据表相关操作" class="headerlink" title="数据表相关操作"></a>数据表相关操作</h2><p>数据表：数据表由行(row)和列(column)来组成。每个数据表中至少有一列，行可以有零行一行或者多行组成。表名要求唯一，不要包含特殊字符，最好含义明确</p><ol><li>创建表<br>CREATE TABLE [IF NOT EXISTS] tbl_name(<br> 字段名称 字段类型 [完整性约束条件],<br> 字段名称 字段类型 [完整性约束条件],<br>…<br>)ENGINE=存储引擎 CHARSET=编码方式;</li></ol><ul><li><p><strong>约束条件</strong><br>UNSIGNED  无符号，没有负数，从0开始<br>ZEROFILL  零填充，当数据的显示长度不够的时候可以使用前补0的效果填充至指定长度,字段会自动添加UNSIGNED<br>NOT NULL  非空约束，也就是插入值的时候这个字段必须要给值,值不能为空<br>DEFAULT  默认值，如果插入记录的时候没有给字段赋值，则使用默认值<br>PRIMARY KEY  主键，标识记录的唯一性，值不能重复，一个表只能有一个主键，自动禁止为空<br>AUTO_INCREMENT  自动增长，只能用于数值列，而且配合索引使用,默认起始值从1开始，每次增长1<br>UNIQUE KEY  唯一性，一个表中可以有多个字段是唯一索引，同样的值不能重复，但是NULL值除外<br>FOREIGN KEY  外键约束</p></li><li><p>示例1（无约束条件）</p></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> personal_info(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">INT</span>,</span><br><span class="line">username <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line"><span class="keyword">password</span> <span class="built_in">CHAR</span>(<span class="number">32</span>),</span><br><span class="line">email <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">age TINYINT,</span><br><span class="line">card <span class="built_in">CHAR</span>(<span class="number">18</span>),</span><br><span class="line">tel <span class="built_in">CHAR</span>(<span class="number">11</span>),</span><br><span class="line">salary <span class="built_in">FLOAT</span>(<span class="number">8</span>,<span class="number">2</span>),</span><br><span class="line">married TINYINT(<span class="number">1</span>),</span><br><span class="line">addr <span class="built_in">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">sex ENUM(<span class="string">'男'</span>,<span class="string">'女'</span>,<span class="string">'保密'</span>)</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">CHARSET</span>=UTF8;</span><br></pre></td></tr></table></figure><ul><li>示例2（带约束条件）</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">`personal_info2`</span>(</span><br><span class="line"><span class="string">`id`</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> AUTO_INCREMENT <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">'用户编号'</span>,</span><br><span class="line"><span class="string">`username`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span> <span class="keyword">COMMENT</span> <span class="string">'用户名'</span>,</span><br><span class="line"><span class="string">`password`</span> <span class="built_in">CHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'密码'</span>,</span><br><span class="line"><span class="string">`email`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span> <span class="keyword">COMMENT</span> <span class="string">'邮箱'</span>,</span><br><span class="line"><span class="string">`age`</span> TINYINT <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">18</span> <span class="keyword">COMMENT</span> <span class="string">'年龄'</span>,</span><br><span class="line"><span class="string">`sex`</span> ENUM(<span class="string">'男'</span>,<span class="string">'女'</span>,<span class="string">'保密'</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'保密'</span> <span class="keyword">COMMENT</span> <span class="string">'性别'</span>,</span><br><span class="line"><span class="string">`tel`</span> <span class="built_in">CHAR</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span> <span class="keyword">COMMENT</span> <span class="string">'电话'</span>,</span><br><span class="line"><span class="string">`addr`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'北京'</span> <span class="keyword">COMMENT</span> <span class="string">'地址'</span>,</span><br><span class="line"><span class="string">`card`</span> <span class="built_in">CHAR</span>(<span class="number">18</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span> <span class="keyword">COMMENT</span> <span class="string">'身份证号'</span>,</span><br><span class="line"><span class="string">`married`</span> TINYINT(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="keyword">COMMENT</span> <span class="string">'0代表未结婚，1代表已结婚'</span>,</span><br><span class="line"><span class="string">`salary`</span> <span class="built_in">FLOAT</span>(<span class="number">8</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="keyword">COMMENT</span> <span class="string">'薪水'</span></span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=UTF8;</span><br></pre></td></tr></table></figure><ul><li>要注意单引号和反引号的使用</li></ul><ol start="2"><li>查看当前数据库下已有数据表<br><code>SHOW TABLES;</code><br><code>SHOW [FULL] TABLES [{FROM | IN} db_name] [LIKE &#39;pattern&#39; | WHERE expr];</code></li><li>查看指定数据表的详细信息<br><code>SHOW CREATE TABLE tbl_name;</code></li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">| personal_info2 | CREATE TABLE `personal_info2` (</span><br><span class="line">  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT <span class="string">'用户编号'</span>,</span><br><span class="line">  `username` varchar(20) NOT NULL COMMENT <span class="string">'用户名'</span>,</span><br><span class="line">  `password` char(32) NOT NULL COMMENT <span class="string">'密码'</span>,</span><br><span class="line">  `email` varchar(50) NOT NULL COMMENT <span class="string">'邮箱'</span>,</span><br><span class="line">  `age` tinyint(3) unsigned NOT NULL DEFAULT <span class="string">'18'</span> COMMENT <span class="string">'年龄'</span>,</span><br><span class="line">  `sex` enum(<span class="string">'男'</span>,<span class="string">'女'</span>,<span class="string">'保密'</span>) NOT NULL DEFAULT <span class="string">'保密'</span> COMMENT <span class="string">'性别'</span>,</span><br><span class="line">  `tel` char(11) NOT NULL COMMENT <span class="string">'电话'</span>,</span><br><span class="line">  `addr` varchar(50) NOT NULL DEFAULT <span class="string">'北京'</span> COMMENT <span class="string">'地址'</span>,</span><br><span class="line">  `card` char(18) NOT NULL COMMENT <span class="string">'身份证号'</span>,</span><br><span class="line">  `married` tinyint(1) NOT NULL DEFAULT <span class="string">'0'</span> COMMENT <span class="string">'0代表未结婚，1代表已结婚'</span>,</span><br><span class="line">  `salary` <span class="built_in">float</span>(8,2) NOT NULL DEFAULT <span class="string">'0.00'</span> COMMENT <span class="string">'薪水'</span>,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  UNIQUE KEY `username` (`username`),</span><br><span class="line">  UNIQUE KEY `email` (`email`),</span><br><span class="line">  UNIQUE KEY `tel` (`tel`),</span><br><span class="line">  UNIQUE KEY `card` (`card`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8 |</span><br></pre></td></tr></table></figure><ol start="4"><li>查看表结构<br><code>DESC tbl_name;</code><br><code>DESCRIBE tbl_name;</code><br><code>SHOW COLUMNS FROM tbl_name;</code></li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">+----------+------------------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | Type                   | Null | Key | Default | Extra          |</span><br><span class="line">+----------+------------------------+------+-----+---------+----------------+</span><br><span class="line">| id       | int(10) unsigned       | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| username | varchar(20)            | NO   | UNI | NULL    |                |</span><br><span class="line">| password | char(32)               | NO   |     | NULL    |                |</span><br><span class="line">| email    | varchar(50)            | NO   | UNI | NULL    |                |</span><br><span class="line">| age      | tinyint(3) unsigned    | NO   |     | 18      |                |</span><br><span class="line">| sex      | enum(<span class="string">'男'</span>,<span class="string">'女'</span>,<span class="string">'保密'</span>)  | NO   |     | 保密    |                |</span><br><span class="line">| tel      | char(11)               | NO   | UNI | NULL   |                |</span><br><span class="line">| addr     | varchar(50)            | NO   |     | 北京    |                |</span><br><span class="line">| card     | char(18)               | NO   | UNI | NULL    |                |</span><br><span class="line">| married  | tinyint(1)             | NO   |     | 0       |                |</span><br><span class="line">| salary   | <span class="built_in">float</span>(8,2)             | NO   |     | 0.00    |                |</span><br><span class="line">+----------+------------------------+------+-----+---------+----------------+</span><br></pre></td></tr></table></figure><ol start="5"><li>删除指定的数据表<br><code>DROP TABLE [IF EXISTS] tbl_name;</code></li></ol><h3 id="表结构相关操作"><a href="#表结构相关操作" class="headerlink" title="表结构相关操作"></a>表结构相关操作</h3><p>add | drop | modify | change | set default | add/drop primary key |  add/drop unique |rename</p><ol><li>添加字段<br><code>ALTER TABLE tbl_name</code><br><code>ADD 字段名称 字段属性 [完整性约束条件] [FIRST|AFTER 字段名称]</code></li><li>删除字段<br><code>ALTER TABLE tbl_name</code><br><code>DROP 字段名称</code></li><li>添加默认值<br><code>ALTER TABLE tbl_name</code><br><code>ALTER 字段名称 SET DEFAULT 默认值;</code></li><li>删除默认值<br><code>ALTER TABLE tbl_name</code><br><code>ALTER 字段名称 DROP DEFAULT</code></li><li>修改字段类型、字段属性<br><code>ALTER TABLE tbl_name</code><br><code>MODIFY 字段名称 字段类型 [字段属性] [FIRST | AFTER 字段名称]</code></li><li>修改字段名称、字段类型、字段属性<br><code>ALTER TABLE tbl_name</code><br><code>CHANGE 原字段名称 新字段名称 字段类型 字段属性 [FIRST | AFTER 字段名称]</code></li><li>添加主键<br><code>ALTER TABLE tbl_name</code><br><code>ADD PRIMARY KEY(字段名称)</code></li><li>删除主键<br><code>ALTER TABLE tbl_name</code><br><code>DROP PRIMARY KEY;</code></li><li>添加唯一<br><code>ALTER TABLE tbl_name</code><br><code>ADD UNIQUE KEY|INDEX [index_name] (字段名称)</code></li><li>删除唯一<br><code>ALTER TABLE tbl_name</code><br><code>DROP index_name;</code></li><li>修改数据表名称<br><code>ALTER TABLE tbl_name</code><br><code>RENAME [TO|AS] new_tbl_name</code><br><code>RENAME TABLE tbl_name TO new_tbl_name;</code></li><li>修改AUTO_INCREMENT的值<br><code>ALTER TABLE tbl_name AUTO_INCREMENT=值</code></li></ol><h2 id="数据内容相关操作"><a href="#数据内容相关操作" class="headerlink" title="数据内容相关操作"></a>数据内容相关操作</h2><h3 id="增加"><a href="#增加" class="headerlink" title="增加"></a>增加</h3><p><code>INSERT [INTO] tbl_name[(col_name,...)] {VALUE|VALUES}(VALUES...);</code></p><ul><li>不指定字段名称，需要按照建表时的字段顺序给每一个字段赋值<br><code>INSERT tbl_name VALUE(value...)</code></li><li>列出指定字段<br><code>INSERT tbl_name(字段名称,...) VALUES(值,...)</code></li><li>INSERT … SET的形式<br><code>INSERT tbl_name SET 字段名称=值,...;</code></li><li>INSERT … SELECT<br><code>INSERT tbl_name[(字段名称...)] SELECT 字段名称,... FROM  tbl_name [WHERE 条件]</code></li><li><p>一次添加多条记录<br><code>INSERT tbl_name[(字段名称,...)] VALUES(VALUES,...),(VALUES,....),()...</code></p></li><li><p>示例</p></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 测试添加记录</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> kevin <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> <span class="string">'UTF8'</span>;</span><br><span class="line"><span class="keyword">USE</span> kevin;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="keyword">user</span>(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> AUTO_INCREMENT <span class="keyword">KEY</span> <span class="keyword">COMMENT</span> <span class="string">'编号'</span>,</span><br><span class="line">    username <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span> <span class="keyword">COMMENT</span> <span class="string">'用户名'</span>,</span><br><span class="line">    age TINYINT <span class="keyword">UNSIGNED</span> <span class="keyword">DEFAULT</span> <span class="number">18</span> <span class="keyword">COMMENT</span> <span class="string">'年龄'</span>,</span><br><span class="line">    email <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'xxxx@qq.com'</span> <span class="keyword">COMMENT</span> <span class="string">'邮箱'</span></span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">CHARSET</span>=UTF8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 不指定字段名称</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span> <span class="keyword">VALUE</span>(<span class="number">1</span>,<span class="string">'kevin'</span>,<span class="number">24</span>,<span class="string">'420376@qq.com'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span> <span class="keyword">VALUES</span>(<span class="keyword">DEFAULT</span>,<span class="string">'hex'</span>,<span class="number">26</span>,<span class="string">'hex@qq.com'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 列出指定字段的形式</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span>(username,email) <span class="keyword">VALUES</span>(<span class="string">'rose'</span>,<span class="string">'rose@qq.com'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span>(age,email,<span class="keyword">id</span>,username) <span class="keyword">VALUES</span>(<span class="number">34</span>,<span class="string">'xxxx@qq.com'</span>,<span class="number">5</span>,<span class="string">'xxxx'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 一次插入3条记录</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span> <span class="keyword">VALUES</span>(<span class="literal">NULL</span>,<span class="string">'a'</span>,<span class="keyword">DEFAULT</span>,<span class="keyword">DEFAULT</span>),</span><br><span class="line">(<span class="literal">NULL</span>,<span class="string">'b'</span>,<span class="number">56</span>,<span class="string">'b@qq.com'</span>),</span><br><span class="line">(<span class="literal">NULL</span>,<span class="string">'c'</span>,<span class="number">14</span>,<span class="string">'c@qq.com'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- INSERT ...SET 的形式</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span> <span class="keyword">SET</span> username=<span class="string">'d'</span>,age=<span class="number">45</span>,email=<span class="string">'d@qq.com'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- INSERT SELECT</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">user</span>(username) <span class="keyword">SELECT</span> a <span class="keyword">FROM</span> <span class="keyword">test</span>;</span><br></pre></td></tr></table></figure><h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p><code>DELETE FROM tbl_name [WHERE 条件]</code><br>如果不添加条件，表中所有记录都会被删除<br>DELETE 清空数据表的时候不会重置AUTO_INCREMENT的值，可以通过ALTER 语句将其重置为1</p><p><code>TRUNCATE [TABLE] tbl_name;</code><br>清除表中所有记录<br>会重置AUTO_INCREMENT的值</p><ul><li>示例</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 测试删除语句</span></span><br><span class="line"><span class="comment">-- 删除用户名</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> username=<span class="string">'kevin'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除年龄为24的用户</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> age=<span class="number">24</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除表中所有记录</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure><h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><p><code>UPDATE tbl_name SET 字段名称=值,字段名称=值 [WHERE 条件]</code><br>如果不添加条件，整个表中的记录都会被更新</p><ul><li>示例</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 测试修改语句</span></span><br><span class="line"><span class="comment">-- 修改第一个用户的信息 id=1</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> age=<span class="number">29</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 所有用户年龄+10</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> age=age+<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将id&lt;=5的用户年龄改为-20，将邮箱改为默认值</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> age=age<span class="number">-20</span>,email=<span class="keyword">DEFAULT</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>&lt;=<span class="number">5</span>;</span><br></pre></td></tr></table></figure><h3 id="查询（重点）"><a href="#查询（重点）" class="headerlink" title="查询（重点）"></a>查询（重点）</h3><p><code>SELECT select_expr,... FROM tbl_name [WHERE 条件] [GROUP BY {col_name|position} HAVING 二次筛选] [ORDER BY {col_name|position|expr} [ASC|DESC]] [LIMIT 限制结果集的显示条数]</code></p><p>查询表中所有记录<br><code>SELECT * FROM tbl_name;</code><br>指定字段的信息<br><code>SELECT 字段名称,... FROM tbl_name</code><br>库名.表名<br><code>SELECT 字段名称,... FROM db_name.tbl_name;</code><br>给字段起别名<br><code>SELECT 字段名称 [AS] 别名名称,... FROM db_name.tbl_name;</code><br>给数据表起别名<br><code>SELECT 字段名称 ,... FROM tbl_name [AS] 别名;</code><br>表名.字段名的<br><code>SELECT tbl_name.col_name,... FROM tbl_name;</code></p><ul><li>示例</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询表中所有记录</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- username,addr,age</span></span><br><span class="line"><span class="keyword">SELECT</span> username,addr,age <span class="keyword">FROM</span> user1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询数据库下user1表中的所有记录</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> kevin.user1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询user1表中的id 编号 username 用户名 sex 性别</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">AS</span> <span class="string">'编号'</span>,username <span class="keyword">AS</span> <span class="string">'用户名'</span>, sex <span class="keyword">AS</span> <span class="string">'性别'</span></span><br><span class="line"><span class="keyword">FROM</span> user1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 给表起别名</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username <span class="keyword">FROM</span> user1 <span class="keyword">AS</span> u;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查找表名中的字段名</span></span><br><span class="line"><span class="keyword">SELECT</span> user1.id,user1.username,user1.age <span class="keyword">FROM</span> user1 ;</span><br><span class="line"><span class="keyword">SELECT</span> u.id,u.username,u.addr,u.sex <span class="keyword">FROM</span> user1 <span class="keyword">AS</span> u;</span><br></pre></td></tr></table></figure><h4 id="where条件"><a href="#where条件" class="headerlink" title="where条件"></a>where条件</h4><p><code>&gt; &gt;= &lt; &lt;= != &lt;&gt; &lt;=&gt;</code> 比较运算符<br><code>IS [NOT] NULL</code>  检测值是否为NULL或者NOT NULL<br><code>[NOT] BETWEEN ... AND</code>  指定范围<br><code>[NOT] IN(值,...)</code>  指定集合<br><code>[NOT] LIKE</code>  匹配字符<br><code>% %</code> 任意长度的字符串<br><code>___</code>  任意一个字符</p><ul><li>示例</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,userDesc <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> userDesc&lt;=&gt;<span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,userDesc <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> userDesc <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="keyword">BETWEEN</span> <span class="number">18</span> <span class="keyword">AND</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询编号为1,3,5,7,9</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span> <span class="keyword">IN</span>(<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">29</span>,<span class="number">45</span>,<span class="number">78</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> sex=<span class="string">'男'</span> <span class="keyword">AND</span> age&gt;=<span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex,salary,addr <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">BETWEEN</span> <span class="number">60000</span> <span class="keyword">AND</span> <span class="number">100000</span> <span class="keyword">AND</span> sex=<span class="string">'男'</span> <span class="keyword">AND</span> addr=<span class="string">'北京'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">OR</span> username=<span class="string">'kevin'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> <span class="string">'%in%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> <span class="string">'___'</span>;</span><br></pre></td></tr></table></figure><h4 id="group-by-分组"><a href="#group-by-分组" class="headerlink" title="group by 分组"></a>group by 分组</h4><ol><li>GROUP_CONCAT()查看组中某个字段的详细信息</li><li>配合聚合函数使用<br>COUNT()  //统计记录总数。如果写的是COUNT(字段名称)，字段中的值为NULL，不统计进来，写COUNT(*)会统计NULL值<br>SUM()  //求和<br>MAX()  //求最大值<br>MIN()  //求最小值<br>AVG()  //求平均值</li><li>配合<code>WITH ROLLUP</code>关键使用,会在记录末尾添加一条记录，是上面所有记录的总和</li><li><code>HAVING</code>子句对分组结果进行二次筛选</li></ol><ul><li>示例</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 按照性别分组sex</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照addr分组</span></span><br><span class="line"><span class="keyword">SELECT</span> username,age,sex,addr <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照性别分组，查询组中的用户名有哪些</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">GROUP_CONCAT</span>(username),age,sex,addr <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试COUNT()</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">id</span>) <span class="keyword">FROM</span> user1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照sex分组，得到用户名详情，并且计算组中的总人数</span></span><br><span class="line"><span class="keyword">SELECT</span> sex,<span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,<span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照addr分组，得到用户名的详情，总人数，得到组中年龄的总和，年龄的最大值、最小值、平均值</span></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">SUM</span>(age) <span class="keyword">AS</span> sum_age,</span><br><span class="line"><span class="keyword">MAX</span>(age) <span class="keyword">AS</span> max_age,</span><br><span class="line"><span class="keyword">MIN</span>(age) <span class="keyword">AS</span> min_age,</span><br><span class="line"><span class="keyword">AVG</span>(age) <span class="keyword">AS</span> avg_age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex</span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照字段的位置来分组</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,sex,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">SUM</span>(salary) <span class="keyword">AS</span> sum_salary,</span><br><span class="line"><span class="keyword">MAX</span>(salary) <span class="keyword">AS</span> max_salary,</span><br><span class="line"><span class="keyword">MIN</span>(salary) <span class="keyword">AS</span> min_salary,</span><br><span class="line"><span class="keyword">AVG</span>(salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询age&gt;=30的用户并且按照sex分组</span></span><br><span class="line"><span class="keyword">SELECT</span> sex,<span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> age&gt;=<span class="number">30</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 对于分组结果进行二次筛选，条件是组中总人数&gt;=3</span></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(*)&gt;=<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 要求平均薪水&gt;=40000</span></span><br><span class="line"><span class="keyword">SELECT</span> addr,</span><br><span class="line"><span class="keyword">GROUP_CONCAT</span>(username) <span class="keyword">AS</span> usersDetail,</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">SUM</span>(salary) <span class="keyword">AS</span> sum_salary,</span><br><span class="line"><span class="keyword">MAX</span>(salary) <span class="keyword">AS</span> max_salary,</span><br><span class="line"><span class="keyword">MIN</span>(salary) <span class="keyword">AS</span> min_salary,</span><br><span class="line"><span class="keyword">AVG</span>(salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> addr</span><br><span class="line"><span class="keyword">HAVING</span> avg_salary&gt;=<span class="number">40000</span>;</span><br></pre></td></tr></table></figure><h4 id="order-by-排序"><a href="#order-by-排序" class="headerlink" title="order by 排序"></a>order by 排序</h4><p>ORDER BY 字段名称 ASC|DESC</p><ul><li>示例</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 按照id降序排列</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">id</span> <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照age升序</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> age ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照多个字段排序</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> age <span class="keyword">ASC</span>,<span class="keyword">id</span> <span class="keyword">ASC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试条件+排序</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">WHERE</span> age&gt;=<span class="number">30</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> age <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 实现随机记录</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">RAND</span>();</span><br></pre></td></tr></table></figure><h4 id="LIMIT-限制结果集显示条数"><a href="#LIMIT-限制结果集显示条数" class="headerlink" title="LIMIT 限制结果集显示条数"></a>LIMIT 限制结果集显示条数</h4><p>LIMIT 值<br>显示结果集的前几条记录<br>LIMIT offset,row_count<br>从offset开始，显示几条记录,offset从0开始</p><ul><li>示例</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 显示结果集的前5条记录</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,username,age,sex</span><br><span class="line"><span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">0</span>,<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 更新前3条记录，将age+5</span></span><br><span class="line"><span class="keyword">UPDATE</span> user1 <span class="keyword">SET</span> age=age+<span class="number">5</span> <span class="keyword">LIMIT</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照id降序排列，更新前三条记录，将age-10</span></span><br><span class="line"><span class="keyword">UPDATE</span> user1 <span class="keyword">SET</span> age=age<span class="number">-10</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">id</span> <span class="keyword">DESC</span> <span class="keyword">LIMIT</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除前三条记录</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">id</span> <span class="keyword">DESC</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure><h3 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h3><ol><li>笛卡尔积的形式</li><li>内连接的形式<br><code>SELECT 字段名称,... FROM tbl_name1 INNER JOIN tbl_name2 ON 连接条件</code>  //查询两个表中符合连接条件的记录</li><li>外连接的形式</li></ol><ul><li>左外连接<br><code>SELECT 字段名称,... FROM tbl_name1 LEFT OUTER JOIN tbl_name2 ON 条件;</code><br>左表为主表，先显示左表中的全部记录，再去右表中查询复合条件的记录，不符合的以NULL代替</li><li><p>右外连接<br><code>SELECT 字段名称,... FROM tbl_name1 RIGHT [OUTER] JOIN tbl_name2 ON 条件;</code><br>右表为主表，先显示右表中的全部记录，再去左表中查询复合条件的记录，不符合的以NULL代替</p></li><li><p>示例</p></li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询emp id username age addr dep id depName depDesc</span></span><br><span class="line"><span class="keyword">SELECT</span> e.id,e.username,e.age,e.addr,</span><br><span class="line">d.id,d.depName,d.depDesc</span><br><span class="line"><span class="keyword">FROM</span> dep <span class="keyword">AS</span> d</span><br><span class="line"><span class="keyword">JOIN</span> emp <span class="keyword">AS</span> e</span><br><span class="line"><span class="keyword">ON</span> d.id=e.depId;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试左外连接</span></span><br><span class="line"><span class="keyword">SELECT</span> e.id,e.username,e.age,d.depName,d.depDesc</span><br><span class="line"><span class="keyword">FROM</span> emp <span class="keyword">AS</span> e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> dep <span class="keyword">AS</span> d</span><br><span class="line"><span class="keyword">ON</span> e.depId=d.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试右外连接</span></span><br><span class="line"><span class="keyword">SELECT</span> e.id,e.username,e.age,d.depName,d.depDesc</span><br><span class="line"><span class="keyword">FROM</span> emp <span class="keyword">AS</span> e</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> dep <span class="keyword">AS</span> d</span><br><span class="line"><span class="keyword">ON</span> e.depId=d.id;</span><br></pre></td></tr></table></figure><h3 id="外键约束-loading…"><a href="#外键约束-loading…" class="headerlink" title="外键约束(loading…)"></a>外键约束(loading…)</h3><p><strong>只有InnoDB存储引擎支持外键</strong></p><ol><li>建表时指定外键<br><code>[CONSTRAINT 外键名称 ]FOREIGN KEY(字段名称) REFERENCES 主表(字段名称)</code><br>子表的外键字段和主表的主键字段类型要相似；如果是数值型要求一致，并且无符号也要一致；如果是字符型，要求类型一致，长度可以不同<br>如果外键字段没有创建索引，MySQL会自动帮我们添加索引<br>子表的外键关联的必须是父表的主键</li></ol><ul><li>外键约束的参照操作<br>CASCADE  从附表删除或更新，子表也跟着删除或者更新，级联的操作<br>SET NULL  从附表删除或者更新记录，并设置子表的外键列为NULL。<br>NO ACTION | RESTRICT  拒绝对父表做更新或者删除操作</li></ul><ol start="2"><li>动态添加外键<br><code>ALTER TABLE tbl_name [CONSTRAINT 外键名称] ADD FOREIGN KEY(外键字段) REFERENCES 主表(主键字段);</code><br>动态添加外键之前表中的记录一定合法的记录，没有脏值，否则外键添加不成功</li><li>动态删除外键<br><code>ALTER TABLE tbl_name DROP FOREIGN KEY fk_name;</code></li></ol><h3 id="特殊形式查询-loading…"><a href="#特殊形式查询-loading…" class="headerlink" title="特殊形式查询(loading…)"></a>特殊形式查询(loading…)</h3><h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p><code>SELECT 字段名称 FROM tbl_name WHERE col_name=(SELECT col_name FROM tbl_name)</code></p><h4 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h4><ol><li>UNION<br><code>SELECT 字段名称,... FROM tbl_name1 UNION SELECT 字段名称... FROM tbl_name2;</code></li><li>UNION ALL<br><code>SELECT 字段名称,... FROM tbl_name1 UNION ALL SELECT 字段名称... FROM tbl_name2;</code><br>UNION ALL 是简单的合并，UNION会去掉表中重复记录</li></ol><h4 id="自身连接查询"><a href="#自身连接查询" class="headerlink" title="自身连接查询"></a>自身连接查询</h4><h4 id="正则表达式查询"><a href="#正则表达式查询" class="headerlink" title="正则表达式查询"></a>正则表达式查询</h4><p><code>^</code> 匹配字符串开始的部分<br><code>$</code> 匹配字符串结束部分<br><code>.</code> 代表一个任意字符<br><code>[字符集合]</code> [abc] [a-z] [0-9]<br><code>[^字符集合]</code> 除了集合中的内容<br><code>s1|s2|s3</code> 匹配s1或者s2或者s3<br><code>*</code> 代表匹配前面的字符0次1次或者多次<br><code>+</code> 代表匹配前面的字符至少出现1次<br><code>字符{n}</code> 前面的字符正好出现n次<br><code>字符{m,n}</code> 前面的字符至少出现m次，最多出现n次</p><h2 id="其它注意事项"><a href="#其它注意事项" class="headerlink" title="其它注意事项"></a>其它注意事项</h2><p>SQL语句语法规范</p><ul><li>常用MySQL的关键字我们需要大写，库名、表名、字段名称等使用小写</li><li>SQL语句支持折行操作，拆分的时候不能把完整单词拆开</li><li><p>数据库名称、表名称、字段名称不要使用MySQL的保留字，如果必须要使用，需要用反引号<code></code>将其括起来</p></li><li><p>创建的数据库名称最好有意义，名称不要包含特殊字符或者是MySQL关键字</p></li></ul><p>常用SQL语句</p><ul><li>SHOW WARNINGS;  //查看上一步操作产生的警告信息</li><li>CHECK TABLE tbl_name  //检测表</li><li>REPAIR TABLE tbl_name  //修复表</li></ul><hr><p>相关链接：<br><a href="https://hyqskevin.github.io/2019/01/21/php-notes3/">PHP &amp; MySQL learning notes (4)</a><br><a href="https://hyqskevin.github.io/2019/01/21/php-notes2/">PHP &amp; MySQL learning notes (3)</a><br><a href="https://hyqskevin.github.io/2019/01/21/php-notes/">PHP &amp; MySQL learning notes (2)</a><br><a href="https://hyqskevin.github.io/2018/10/28/w3school-php/">PHP &amp; MySQL learning notes (1)</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;-基础笔记-&lt;br&gt;二次回顾，学校课程 + 慕课网 MySQL 详细学习笔记&lt;br&gt;包括MySQL架构，MySQL操作，数据类型，数据库操作，数据表操作（创增删改查排序分组）及子句操作&lt;br&gt;
    
    </summary>
    
      <category term="study" scheme="https://hyqskevin.github.io/categories/study/"/>
    
    
      <category term="mysql" scheme="https://hyqskevin.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>move to windows</title>
    <link href="https://hyqskevin.github.io/2019/02/14/move-to-windows/"/>
    <id>https://hyqskevin.github.io/2019/02/14/move-to-windows/</id>
    <published>2019-02-14T07:43:08.000Z</published>
    <updated>2019-02-19T02:14:32.480Z</updated>
    
    <content type="html"><![CDATA[<p>由于archlinux上出现了一些bug，而且因为跑SLAM，安装包占去了过多存储空间，临时决定将blog移植到Windows上来方便经常更新。<br><a id="more"></a></p><h2 id="install-necessary-modules"><a href="#install-necessary-modules" class="headerlink" title="install necessary modules"></a>install necessary modules</h2><ul><li>download <strong><a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">nodejs</a></strong> and install</li><li>download <strong><a href="https://git-scm.com/downloads" target="_blank" rel="noopener">git</a></strong> and install</li><li>Win+R open cmd to the right direction</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir blog</span><br><span class="line">$ npm install hexo -g</span><br><span class="line">$ hexo -v  //check info</span><br><span class="line">$ npm install  //install necessary components</span><br><span class="line">$ hexo init  //initialize folder</span><br><span class="line">$ hexo g  //Start processing</span><br></pre></td></tr></table></figure><ul><li>related modules</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install  //install necessary components</span><br><span class="line">$ npm install hexo-deployer-git --save  // deploy to git</span><br><span class="line">$ npm install hexo-generator-feed --save  // build RSS</span><br><span class="line">$ npm install hexo-generator-sitemap --save // build sitemap</span><br></pre></td></tr></table></figure><h2 id="add-ssh-key"><a href="#add-ssh-key" class="headerlink" title="add ssh key"></a>add ssh key</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">"your email address"</span></span><br><span class="line">$ cat /home/xxx/.ssh/id_rsa.pub  //check your key</span><br></pre></td></tr></table></figure><ul><li><strong>load key to Github (default on Github &amp; default you can use Github)</strong></li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br></pre></td></tr></table></figure><h2 id="set-id-amp-email"><a href="#set-id-amp-email" class="headerlink" title="set id &amp; email"></a>set id &amp; email</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">"your id"</span></span><br><span class="line">$ git config --global user.email <span class="string">"your email"</span></span><br></pre></td></tr></table></figure><h2 id="copy-previous-files"><a href="#copy-previous-files" class="headerlink" title="copy previous files"></a>copy previous files</h2><ul><li>copy source files to the new catalog (as follows)<ul><li><code>_config.yml package.json node_modules scaffolds source themes</code></li></ul></li><li>type <code>hexo s</code> to check</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;由于archlinux上出现了一些bug，而且因为跑SLAM，安装包占去了过多存储空间，临时决定将blog移植到Windows上来方便经常更新。&lt;br&gt;
    
    </summary>
    
      <category term="others" scheme="https://hyqskevin.github.io/categories/others/"/>
    
    
      <category term="hexo" scheme="https://hyqskevin.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>PHP &amp; MySQL learning notes (3)</title>
    <link href="https://hyqskevin.github.io/2019/01/21/php-notes2/"/>
    <id>https://hyqskevin.github.io/2019/01/21/php-notes2/</id>
    <published>2019-01-21T09:00:40.000Z</published>
    <updated>2019-03-03T13:55:01.182Z</updated>
    
    <content type="html"><![CDATA[<p>-基础笔记-<br>慕课网 PHP基础语法巩固(2) 课堂笔记，包含会话，文件，数据库操作等细碎的摘要</p><a id="more"></a><h2 id="会话控制"><a href="#会话控制" class="headerlink" title="会话控制"></a>会话控制</h2><h3 id="session"><a href="#session" class="headerlink" title="session"></a>session</h3><p>HTTP是无状态协议，HTTP不知道请求来自哪个客户端，Session提供在PHP脚本中定义全局变量的方法，使全局变量在同一个Session中对<strong>所有的PHP脚本文件内</strong>都有效,解决HTTP断链接的问题<br>Session可以减轻服务器压力，缺点在于每次请求会传输大量重复的信息<br>Session允许通过将数据存储在HTTP服务器中，使得用户在回话过程中保持该数据</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">session_start();</span><br><span class="line">$_SESSION[<span class="string">'id'</span>] = <span class="string">'info'</span></span><br></pre></td></tr></table></figure><img src="https://hyqskevin.github.io/pic/session_cookie/session.png" class="[Session的工作原理]"><p>每一次请求有SessionID区分不同的信息，SessionID存储到cookie中，Session数据通过变量<code>$_SESSION</code>存储到Session文件中</p><p>SessionID：</p><ol><li>PHP回话启用</li><li>检查SessionID，如果没有启动新会话 + SessionID</li><li>一直使用的SessionID相同，默认会话在活动，超过一定时间则视为过期</li><li>默认情况下SessionID存在Cookie中，也可以存在URL中</li></ol><p>Session函数：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">bool session_start()  <span class="comment">//启动新会话或重用现有会话</span></span><br><span class="line">string session_id(string $id)  <span class="comment">//获取/设置当前会话的id</span></span><br><span class="line">string session_name(string $name)  <span class="comment">//读取/设置会话名称</span></span><br><span class="line">bool session_destroy(void) <span class="comment">//销毁一个会话中的全部数据</span></span><br><span class="line"></span><br><span class="line">session.auto_start(bool)  <span class="comment">//指定会话模块在请求开始时自动启动</span></span><br><span class="line">session.name(string)  <span class="comment">//指定会话名用作cookie名字</span></span><br><span class="line">session.save_handler(string)  <span class="comment">//定义用来存储和获取与会话关联的数据处理器的名字</span></span><br><span class="line">session.save_path(string)  <span class="comment">//定义传递给存储处理器的参数</span></span><br><span class="line">session.gc_maxlifetime(int)  <span class="comment">//指定数据存在时长</span></span><br><span class="line">session.gc_probability(int)  <span class="comment">//定义在会话初始化时启动垃圾回收进程的概率</span></span><br></pre></td></tr></table></figure><ul><li>必须在session_start()函数之前调用session_name()函数</li><li>垃圾回收进程概率计算：gc_probability/gc_divisor</li></ul><h3 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h3><p>cookie是服务器发送到用户浏览器上并保存在浏览器里的数据，会在浏览器下一次请求时一起发送到服务器上</p><p><strong>session是存储在客户端的数据</strong><br><strong>cookie是存储在服务器端的数据</strong></p><p>cookie的用途：<br>会话状态管理，个性化设置，浏览器行为跟踪</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">bool setcookie(string $name,string $value,[$expire,$path,$domain])  <span class="comment">//名称，值，生命周期，路径，域名范围</span></span><br></pre></td></tr></table></figure><h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><ul><li>文件信息相关</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">filetype($filename);  <span class="comment">//获取文件的类型；返回的是文件的类型，可能的值有 fifo，char，dir，block，link，file 和 unknown。如果 stat 调用失败或者文件类型未知的话 filetype() 还会产生一个 E_NOTICE 消息。</span></span><br><span class="line">filesize($filename);  <span class="comment">//获取文件的大小；返回的是字节数。如果出错返回 FALSE 并生成一条 E_WARNING 级的错误。</span></span><br><span class="line">filectime($filename);  <span class="comment">//获取文件的创建时间；返回的是时间戳。在失败时返回 FALSE。 时间以 Unix 时间戳的方式返回。</span></span><br><span class="line">filemtime($filename);  <span class="comment">//获取文件的修改时间；返回的是时间戳。在失败时返回 FALSE。</span></span><br><span class="line">fileatime($filename);  <span class="comment">//获取文件的最后访问时间；返回的是时间戳。在失败时返回 FALSE。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//可以使用date()函数修改日期和时区；</span></span><br><span class="line">date_default_timezone_set(<span class="string">'PRC'</span>);</span><br><span class="line">date(<span class="string">'Y-m-d H:i:s'</span>,filectime($filename));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">is_readable($filename);  <span class="comment">//检测文件是否可读；返回布尔值</span></span><br><span class="line">is_writable($filename)/is_writeable($filename);  <span class="comment">//检测文件是否可写；返回布尔值</span></span><br><span class="line">is_executable($filename);  <span class="comment">//检测文件是否可执行；返回布尔值</span></span><br><span class="line">is_file($filename);  <span class="comment">//检测是否为文件；返回布尔值</span></span><br></pre></td></tr></table></figure><ul><li>文件路经相关</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">pathinfo($filename, $options);  <span class="comment">//获取文件路径相关信息；返回一个关联数组，包含有 path 的信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//options如果指定了，将会返回指定元素；它们包括：PATHINFO_DIRNAME，PATHINFO_BASENAME 和 PATHINFO_EXTENSION 或 PATHINFO_FILENAME。</span></span><br><span class="line"></span><br><span class="line">dirname($path);  <span class="comment">//返回文件中的路径部分</span></span><br><span class="line">basename($filename,$suffix);  <span class="comment">//返回路径文件名部分；</span></span><br><span class="line">file_exists($filename);  <span class="comment">//检测文件或者目录是否存在；返回布尔值</span></span><br></pre></td></tr></table></figure><ul><li>文件操作相关</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">touch($filename，$time,$atime);   <span class="comment">//设定文件的访问和修改时间，如果文件不存在，则会创建文件；返回布尔值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//time: 使用当前系统的时间。</span></span><br><span class="line"><span class="comment">//atime: 访问时间会被设为 atime，</span></span><br><span class="line"></span><br><span class="line">unlink($filename,$context);  <span class="comment">//删除文件；返回布尔值；</span></span><br><span class="line">rename($oldname,$newname，$path);  <span class="comment">//重命名或者剪切(给剪切path)一个文件或目录;返回布尔值；</span></span><br><span class="line">copy($filename);  <span class="comment">//拷贝一个文件或者目录；返回布尔值；</span></span><br></pre></td></tr></table></figure><ul><li>文件内容操作相关</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$handle = fopen($filename, r|r+|w|...)  <span class="comment">//打开指定文件</span></span><br><span class="line">fread($handle, $size) <span class="comment">//读取文件内容</span></span><br><span class="line">fwrite($handle, <span class="string">'info'</span>,$size)|fput()  <span class="comment">//写入内容,之前有内容会覆盖</span></span><br><span class="line"></span><br><span class="line">ftell($handle)  <span class="comment">//读取指针位置</span></span><br><span class="line">fseek($handle,$size)  <span class="comment">//移动指针的位置</span></span><br><span class="line">fpassthru()  <span class="comment">//输出文件指针处的所有剩余数据</span></span><br><span class="line">rewind($handle) <span class="comment">//重置文件指针</span></span><br><span class="line">ftruncate($handle,$size)  <span class="comment">//将文件截断到指定长度</span></span><br><span class="line"></span><br><span class="line">fgetc($handle)  <span class="comment">//读取一个字符</span></span><br><span class="line">fgets($handle)  <span class="comment">//读取一行字符</span></span><br><span class="line">fgetss($handle)  <span class="comment">//读取一行并过滤掉 HTML 标记</span></span><br><span class="line">fgetcsv()  <span class="comment">//从文件指针中读入一行并解析 CSV 字段</span></span><br><span class="line">fputcsv()  <span class="comment">//将行格式化为 CSV 并写入文件指针</span></span><br><span class="line">file_get_contents()  <span class="comment">//将整个文件读入一个字符串</span></span><br><span class="line">file_put_contents()  <span class="comment">//将一个字符串写入文件，和依次调用 fopen()，fwrite() 以及 fclose() 功能一样。</span></span><br><span class="line">file()  <span class="comment">//把整个文件读入一个数组中</span></span><br><span class="line">readfile()  <span class="comment">//读取文件并写入到输出缓冲</span></span><br><span class="line"></span><br><span class="line">feof($handle)  <span class="comment">//测试文件指针是否到了文件结束的位置</span></span><br><span class="line">fclose()  <span class="comment">//关闭文件</span></span><br><span class="line"></span><br><span class="line">parse_ini_file($filename)  <span class="comment">//解析一个配置文件</span></span><br><span class="line">parse_ini_string($ini)  <span class="comment">//解析配置字符串</span></span><br><span class="line">highlight_string($str)  <span class="comment">//字符串的语法高亮</span></span><br><span class="line">highlight_file()  <span class="comment">//语法高亮一个文件</span></span><br></pre></td></tr></table></figure><p>‘r’：只读方式打开，将文件指针指向文件头。<br>‘r+’：读写方式打开，将文件指针指向文件头。<br>‘w’：写入方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。<br>‘w+’：读写方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。<br>‘a’：写入方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之。<br>‘a+’：读写方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之。<br>‘x’：创建并以写入方式打开，将文件指针指向文件头。如果文件已存在，则 fopen() 调用失败并返回 FALSE，并生成一条 E_WARNING 级别的错误信息。如果文件不存在则尝试创建之。这和给 底层的 open(2) 系统调用指定 O_EXCL|O_CREAT 标记是等价的。<br>‘x+’：创建并以读写方式打开，其他的行为和 ‘x’ 一样。</p><h3 id="函数和类的封装"><a href="#函数和类的封装" class="headerlink" title="函数和类的封装"></a>函数和类的封装</h3><ul><li>创建文件<ul><li>可以用touch()创建，也可以直接file_get_contents()</li></ul></li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create_file</span><span class="params">(string $filename)</span></span>&#123;</span><br><span class="line">  <span class="comment">//检测文件是否存在，不存在则创建</span></span><br><span class="line">  <span class="keyword">if</span>(file_exists($filename))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//检测目录是否存在，不存在则创建</span></span><br><span class="line">  <span class="keyword">if</span>(!file_exists(dirname($filename)))&#123;</span><br><span class="line">    <span class="comment">//创建目录，可以创建多级</span></span><br><span class="line">    mkdir(dirname($filename),<span class="number">0777</span>,<span class="keyword">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// if(touch($filename))&#123;</span></span><br><span class="line">  <span class="comment">//   return true;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="comment">// return false;</span></span><br><span class="line">  <span class="keyword">if</span>(file_put_contents($filename,<span class="string">''</span>)!==<span class="keyword">false</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>删除文件</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">del_file</span><span class="params">(string $filename)</span></span>&#123;</span><br><span class="line">  <span class="comment">//检测删除的文件是否存在,并且是否有权限操作</span></span><br><span class="line">  <span class="keyword">if</span>(!file_exists($filename)||!is_writable($filename))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(unlink($filename))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>拷贝文件</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy_file</span><span class="params">(string $filename,string $dest)</span></span>&#123;</span><br><span class="line">  <span class="comment">//检测$dest是否是目标并且这个目录是否存在，不存在则创建</span></span><br><span class="line">  <span class="keyword">if</span>(!is_dir($dest))&#123;</span><br><span class="line">    mkdir($dest,<span class="number">0777</span>,<span class="keyword">true</span>);  <span class="comment">//0777为权限</span></span><br><span class="line">  &#125;</span><br><span class="line">  $destName=$dest.DIRECTORY_SEPARATOR.basename($filename);</span><br><span class="line">  <span class="comment">//检测目标路径下是否存在同名文件</span></span><br><span class="line">  <span class="keyword">if</span>(file_exists($destName))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//拷贝文件</span></span><br><span class="line">  <span class="keyword">if</span>(copy($filename,$destName))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>重命名文件</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rename_file</span><span class="params">(string $oldName,string $newName)</span></span>&#123;</span><br><span class="line">  <span class="comment">//检测原文件并且存在</span></span><br><span class="line">  <span class="keyword">if</span>(!is_file($oldName))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//得到原文件所在的路径</span></span><br><span class="line">  $path=dirname($oldName);</span><br><span class="line">  $destName=$path.DIRECTORY_SEPARATOR.$newName;</span><br><span class="line">  <span class="comment">//路径下有文件名，重命名失败</span></span><br><span class="line">  <span class="keyword">if</span>(is_file($destName))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(rename($oldName,$newName))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>剪切文件</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cut_file</span><span class="params">(string $filename,string $dest)</span></span>&#123;</span><br><span class="line">  <span class="comment">//检查文件和路径是否都存在</span></span><br><span class="line">  <span class="keyword">if</span>(!is_file($filename))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(!is_dir($dest))&#123;</span><br><span class="line">    mkdir($dest,<span class="number">0777</span>,<span class="keyword">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  $destName=$dest.DIRECTORY_SEPARATOR.basename($filename);</span><br><span class="line">  <span class="keyword">if</span>(is_file($destName))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(rename($filename,$destName))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>返回文件信息</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_file_info</span><span class="params">(string $filename)</span></span>&#123;</span><br><span class="line">  <span class="comment">//检查文件存在且可读</span></span><br><span class="line">  <span class="keyword">if</span>(!is_file($filename)||!is_readable($filename))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> [</span><br><span class="line">    <span class="string">'atime'</span>=&gt;date(<span class="string">"Y-m-d H:i:s"</span>,fileatime($filename)),</span><br><span class="line">    <span class="string">'mtime'</span>=&gt;date(<span class="string">"Y-m-d H:i:s"</span>,filemtime($filename)),</span><br><span class="line">    <span class="string">'ctime'</span>=&gt;date(<span class="string">"Y-m-d H:i:s"</span>,filectime($filename)),</span><br><span class="line">    <span class="string">'size'</span>=&gt;trans_byte(filesize($filename)),</span><br><span class="line">    <span class="string">'type'</span>=&gt;filetype($filename)</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>字节转换</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trans_byte</span><span class="params">(int $byte,int $precision=<span class="number">2</span>)</span></span>&#123;</span><br><span class="line">  $kb=<span class="number">1024</span>;</span><br><span class="line">  $mb=<span class="number">1024</span>*$kb;</span><br><span class="line">  $gb=<span class="number">1024</span>*$mb;</span><br><span class="line">  $tb=<span class="number">1024</span>*$gb;</span><br><span class="line">  <span class="keyword">if</span>($byte&lt;$kb)&#123;</span><br><span class="line">    <span class="keyword">return</span> $byte.<span class="string">'B'</span>;</span><br><span class="line">  &#125;<span class="keyword">elseif</span>($byte&lt;$mb)&#123;</span><br><span class="line">    <span class="keyword">return</span> round($byte/$kb,$precision).<span class="string">'KB'</span>;</span><br><span class="line">  &#125;<span class="keyword">elseif</span>($byte&lt;$gb)&#123;</span><br><span class="line">    <span class="keyword">return</span> round($byte/$mb,$precision).<span class="string">'MB'</span>;</span><br><span class="line">  &#125;<span class="keyword">elseif</span>($byte&lt;$tb)&#123;</span><br><span class="line">    <span class="keyword">return</span> round($byte/$gb,$precision).<span class="string">'GB'</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> round($byte/$tb,$precision).<span class="string">'TB'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>读取文件内容返回字符串</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">read_file</span><span class="params">(string $filename)</span></span>&#123;</span><br><span class="line">  <span class="comment">//检测是否是一个文件并且文件可读</span></span><br><span class="line">  <span class="keyword">if</span>(is_file($filename) &amp;&amp; is_readable($filename))&#123;</span><br><span class="line">    <span class="keyword">return</span> file_get_contents($filename);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>读取文件内容返回数组</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">read_file_array</span><span class="params">(string $filename,bool $skip_empty_lines=false)</span></span>&#123;</span><br><span class="line">  <span class="comment">//检测是否是一个文件并且文件可读</span></span><br><span class="line">  <span class="keyword">if</span>(is_file($filename)&amp;&amp;is_readable($filename))&#123;</span><br><span class="line">    <span class="keyword">if</span>($skip_empty_lines)&#123;</span><br><span class="line">      <span class="comment">//如果有空行就过滤掉</span></span><br><span class="line">      <span class="keyword">return</span> file($filename,FILE_IGNORE_NEW_LINES|FILE_SKIP_EMPTY_LINES);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> file($filename);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>文件中写入内容</strong><ul><li>写入的内容是数组或者对象需要做<strong>序列化处理</strong></li></ul></li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">write_file</span><span class="params">(string $filename,$data)</span></span>&#123;</span><br><span class="line">  $dirname=dirname($filename);</span><br><span class="line">  <span class="comment">//检测目标路径是否存在</span></span><br><span class="line">  <span class="keyword">if</span>(!file_exists($dirname))&#123;</span><br><span class="line">    mkdir($dirname,<span class="number">0777</span>,<span class="keyword">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//判断内容是否是数组或者对象</span></span><br><span class="line">  <span class="keyword">if</span>(is_array($data)||is_object($data))&#123;</span><br><span class="line">    <span class="comment">//序列化数据</span></span><br><span class="line">    $data=serialize($data);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//向文件中写入内容</span></span><br><span class="line">  <span class="keyword">if</span>(file_put_contents($filename,$data)!==<span class="keyword">false</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>非空文件中写入内容</strong></li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">write_file1</span><span class="params">(string $filename,$data,bool $clearFlag=false)</span></span>&#123;</span><br><span class="line">  $dirname=dirname($filename);</span><br><span class="line">  <span class="comment">//检测目标路径是否存在</span></span><br><span class="line">  <span class="keyword">if</span>(!file_exists($dirname))&#123;</span><br><span class="line">    mkdir($dirname,<span class="number">0777</span>,<span class="keyword">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//检测文件是否存在并且可读</span></span><br><span class="line">  <span class="keyword">if</span>(is_file($filename)&amp;&amp;is_readable($filename))&#123;</span><br><span class="line">    <span class="comment">//读取文件内容，之后和新写入的内容拼装到一起</span></span><br><span class="line">    <span class="keyword">if</span>(filesize($filename)&gt;<span class="number">0</span>)&#123;</span><br><span class="line">      $srcData=file_get_contents($filename);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//判断内容是否是数组或者对象</span></span><br><span class="line">  <span class="keyword">if</span>(is_array($data)||is_object($data))&#123;</span><br><span class="line">    <span class="comment">//序列化数据</span></span><br><span class="line">    $data=serialize($data);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//拼装到一起</span></span><br><span class="line">  $data=$srcData.$data;</span><br><span class="line">  <span class="comment">//向文件中写入内容</span></span><br><span class="line">  <span class="keyword">if</span>(file_put_contents($filename,$data)!==<span class="keyword">false</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>截断文件到指定大小</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">truncate_file</span><span class="params">(string $filename,int $length)</span></span>&#123;</span><br><span class="line">  <span class="comment">//检测是否是文件且可写</span></span><br><span class="line">  <span class="keyword">if</span>(is_file($filename)&amp;&amp;is_writable($filename))&#123;</span><br><span class="line">    $handle=fopen($filename,<span class="string">'r+'</span>);</span><br><span class="line">    $length=$length&lt;<span class="number">0</span>?<span class="number">0</span>:$length;</span><br><span class="line">    ftruncate($handle,$length);</span><br><span class="line">    fclose($handle);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>下载文件</strong><ul><li>在html里添加下载链接</li><li>建立<code>down_file()</code>函数</li><li>建立php文件进行下载</li></ul></li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"download.php?filename=download.zip"</span>&gt;</span>file_name.zip<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//$allowDownExt 允许下载的文件类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">down_file</span><span class="params">(string $filename,array $allowDownExt=array<span class="params">(<span class="string">'jpeg'</span>,<span class="string">'jpg'</span>,<span class="string">'png'</span>,<span class="string">'gif'</span>,<span class="string">'txt'</span>,<span class="string">'html'</span>,<span class="string">'php'</span>,<span class="string">'rar'</span>,<span class="string">'zip'</span>)</span>)</span></span>&#123;</span><br><span class="line">  <span class="comment">//检测下载文件是否存在，并且可读</span></span><br><span class="line">  <span class="keyword">if</span>(!is_file($filename)||!is_readable($filename))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//检测文件类型是否允许下载</span></span><br><span class="line">  $ext=strtolower(pathinfo($filename,PATHINFO_EXTENSION));</span><br><span class="line">  <span class="keyword">if</span>(!in_array($ext,$allowDownExt))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//通过header()发送头信息</span></span><br><span class="line">  <span class="comment">//告诉浏览器输出的是字节流</span></span><br><span class="line">  header(<span class="string">'Content-Type:application/octet-stream'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//告诉浏览器返回的文件大小是按照字节进行计算的</span></span><br><span class="line">  header(<span class="string">'Accept-Ranges: bytes'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//告诉浏览器返回的文件大小</span></span><br><span class="line">  header(<span class="string">'Accept-Length: '</span>.filesize($filename));</span><br><span class="line"></span><br><span class="line">  <span class="comment">//告诉浏览器文件作为附件处理，告诉浏览器最终下载完的文件名称</span></span><br><span class="line">  header(<span class="string">'Content-Disposition: attachment;filename=king_'</span>.basename($filename));</span><br><span class="line"></span><br><span class="line">  <span class="comment">//读取文件中的内容</span></span><br><span class="line">  <span class="comment">//readfile($filename);</span></span><br><span class="line">  <span class="comment">//exit;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//规定每次读取文件的字节数为1024字节，直接输出数据</span></span><br><span class="line">  $read_buffer=<span class="number">1024</span>;</span><br><span class="line">  $sum_buffer=<span class="number">0</span>;</span><br><span class="line">  $handle=fopen($filename,<span class="string">'rb'</span>);</span><br><span class="line">  <span class="keyword">while</span>(!feof($handle) &amp;&amp; $sum_buffer&lt;$filesize)&#123;</span><br><span class="line">    <span class="keyword">echo</span> fread($handle,$read_buffer);</span><br><span class="line">    $sum_buffer+=$read_buffer;</span><br><span class="line">  &#125;</span><br><span class="line">  fclose($handle);</span><br><span class="line">  <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$filename=$_GET[<span class="string">'filename'</span>];</span><br><span class="line">down_file($filename);</span><br></pre></td></tr></table></figure><ul><li>单文件上传</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">upload_file</span><span class="params">(array $fileInfo,string $uploadPath=<span class="string">'./uploads'</span>,bool $imageFlag=true,array $allowExt=array<span class="params">(<span class="string">'jpeg'</span>,<span class="string">'jpg'</span>,<span class="string">'png'</span>,<span class="string">'gif'</span>)</span>,int $maxSize=<span class="number">2097152</span>)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  define(<span class="string">'UPLOAD_ERRS'</span>,[</span><br><span class="line">    <span class="string">'upload_max_filesize'</span>=&gt;<span class="string">'超过了PHP配置文件中upload_max_filesize选项的值'</span>,</span><br><span class="line">    <span class="string">'form_max_size'</span>=&gt;<span class="string">'超过了表单MAX_FILE_SIZE选项的值'</span>,</span><br><span class="line">    <span class="string">'upload_file_partial'</span>=&gt;<span class="string">'文件部分被上传'</span>,</span><br><span class="line">    <span class="string">'no_upload_file_select'</span>=&gt;<span class="string">'没有选择上传文件'</span>,</span><br><span class="line">    <span class="string">'upload_system_error'</span>=&gt;<span class="string">'系统错误'</span>,</span><br><span class="line">    <span class="string">'no_allow_ext'</span>=&gt;<span class="string">'非法文件类型'</span>,</span><br><span class="line">    <span class="string">'exceed_max_size'</span>=&gt;<span class="string">'超出允许上传的最大值'</span>,</span><br><span class="line">    <span class="string">'not_true_image'</span>=&gt;<span class="string">'文件不是真实图片'</span>,</span><br><span class="line">    <span class="string">'not_http_post'</span>=&gt;<span class="string">'文件不是通过HTTP POST方式上传上来的'</span>,</span><br><span class="line">    <span class="string">'move_error'</span>=&gt;<span class="string">'文件移动失败'</span></span><br><span class="line">  ]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//检测是否上传是否有错误</span></span><br><span class="line">  <span class="keyword">if</span>($fileInfo[<span class="string">'error'</span>]===UPLOAD_ERR_OK)&#123;</span><br><span class="line">    <span class="comment">//检测上传文件类型</span></span><br><span class="line">    $ext=strtolower(pathinfo($fileInfo[<span class="string">'name'</span>],PATHINFO_EXTENSION));</span><br><span class="line">    <span class="keyword">if</span>(!in_array($ext,$allowExt))&#123;</span><br><span class="line">      <span class="keyword">echo</span>  UPLOAD_ERRS[<span class="string">'no_allow_ext'</span>];</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//检测上传文件大小是否符合规范</span></span><br><span class="line">    <span class="keyword">if</span>($fileInfo[<span class="string">'size'</span>]&gt;$maxSize)&#123;</span><br><span class="line">      <span class="keyword">echo</span> UPLOAD_ERRS[<span class="string">'exceed_max_size'</span>];</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//检测是否是真实图片</span></span><br><span class="line">    <span class="keyword">if</span>($imageFlag)&#123;</span><br><span class="line">      <span class="keyword">if</span>(@!getimagesize($fileInfo[<span class="string">'tmp_name'</span>]))&#123;</span><br><span class="line">        <span class="keyword">echo</span> UPLOAD_ERRS[<span class="string">'not_true_image'</span>];</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//检测文件是否通过HTTP POST方式上传上来的</span></span><br><span class="line">    <span class="keyword">if</span>(!is_uploaded_file($fileInfo[<span class="string">'tmp_name'</span>]))&#123;</span><br><span class="line">      <span class="keyword">return</span> UPLOAD_ERRS[<span class="string">'not_http_post'</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//检测目标目录是否存在，不存在则创建</span></span><br><span class="line">    <span class="keyword">if</span>(!is_dir($uploadPath))&#123;</span><br><span class="line">      mkdir($uploadPath,<span class="number">0777</span>,<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//生成唯一文件名，防止重名产生覆盖</span></span><br><span class="line">    $uniName=md5(uniqid(microtime(<span class="keyword">true</span>),<span class="keyword">true</span>)).<span class="string">'.'</span>.$ext;</span><br><span class="line">    $dest=$uploadPath.DIRECTORY_SEPARATOR.$uniName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//移动文件</span></span><br><span class="line">    <span class="keyword">if</span>(@!move_uploaded_file($fileInfo[<span class="string">'tmp_name'</span>],$dest))&#123;</span><br><span class="line">      <span class="keyword">echo</span> UPLOAD_ERRS[<span class="string">'move_error'</span>];</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'文件上传成功'</span>;</span><br><span class="line">    <span class="keyword">return</span> $dest;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>($fileInfo[<span class="string">'error'</span>])&#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">      <span class="comment">// $mes='超过了PHP配置文件中upload_max_filesize选项的值';</span></span><br><span class="line">      $mes=UPLOAD_ERRS[<span class="string">'upload_max_filesize'</span>];</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">      $mes=UPLOAD_ERRS[<span class="string">'form_max_size'</span>];</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">      $mes=UPLAOD_ERRS[<span class="string">'upload_file_partial'</span>];</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">      $mes=UPLOAD_ERRS[<span class="string">'no_upload_file_select'</span>];</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">      $mes=UPLAOD_ERRS[<span class="string">'upload_system_error'</span>];</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> $mes;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>压缩单个文件<ul><li><code>ZipArchive()</code>一个用 Zip 压缩的文件存档类</li><li>压缩包要打开后将文件添加到压缩包中</li></ul></li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">zip_file</span><span class="params">(string $filename)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!is_file($filename))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  $zip=<span class="keyword">new</span> ZipArchive();</span><br><span class="line">  $zipName=basename($filename).<span class="string">'.zip'</span>;</span><br><span class="line">  <span class="comment">//打开指定压缩包，不存在则创建，存在则覆盖</span></span><br><span class="line">  <span class="keyword">if</span>($zip-&gt;open($zipName,ZipArchive::CREATE|ZipArchive::OVERWRITE))&#123;</span><br><span class="line">    <span class="comment">//将文件添加到压缩包中并删除文件</span></span><br><span class="line">    <span class="keyword">if</span>($zip-&gt;addFile($filename))&#123;</span><br><span class="line">      @unlink($filename);</span><br><span class="line">    &#125;</span><br><span class="line">    $zip-&gt;close();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>多文件压缩</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">zip_files</span><span class="params">(string $zipName,...$files)</span></span>&#123;</span><br><span class="line">  <span class="comment">//检测压缩包名称是否正确</span></span><br><span class="line">  $zipExt=strtolower(pathinfo($zipName,PATHINFO_EXTENSION));</span><br><span class="line">  <span class="keyword">if</span>(<span class="string">'zip'</span>!==$zipExt)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  $zip=<span class="keyword">new</span> ZipArchive();</span><br><span class="line">  <span class="keyword">if</span>($zip-&gt;open($zipName,ZipArchive::CREATE|ZipArchive::OVERWRITE))&#123;</span><br><span class="line">    <span class="keyword">foreach</span>($files <span class="keyword">as</span> $file)&#123;</span><br><span class="line">      <span class="keyword">if</span>(is_file($file))&#123;</span><br><span class="line">        $zip-&gt;addFile($file);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    $zip-&gt;close();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>解压缩</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unzip_file</span><span class="params">(string $zipName,string $dest)</span></span>&#123;</span><br><span class="line">  <span class="comment">//检测要解压压缩包是否存在</span></span><br><span class="line">  <span class="keyword">if</span>(!is_file($zipName))&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//检测目标路径是否存在</span></span><br><span class="line">  <span class="keyword">if</span>(!is_dir($dest))&#123;</span><br><span class="line">    mkdir($dest,<span class="number">0777</span>,<span class="keyword">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  $zip=<span class="keyword">new</span> ZipArchive();</span><br><span class="line">  <span class="keyword">if</span>($zip-&gt;open($zipName))&#123;</span><br><span class="line">    $zip-&gt;extractTo($dest);</span><br><span class="line">    $zip-&gt;close();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <a href="https://hyqskevin.github.io//code/lib/file.func.php">函数和类的封装源码: code/lib/file.func.php</a></p><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><p> <a href="https://hyqskevin.github.io/2018/10/28/w3school-php/#3-mySQL">具体参考PHP &amp; MySQL learning notes (1)-&gt;3.mySQL</a></p><h3 id="PHP操作MySQL"><a href="#PHP操作MySQL" class="headerlink" title="PHP操作MySQL"></a>PHP操作MySQL</h3><ul><li>MySQL：非永久链接，性能低，PHP5.5之后废弃</li><li>MySQLi：永久链接，减轻了服务器压力</li><li>PDO：实现MySQLi常用功能，支持大部分数据库</li></ul><p>连接数据库：<code>mysql -uroot -p password</code><br>选择数据库：<code>use db</code><br>设置字符集：<code>set names utf8</code></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">mysql_select_db(<span class="string">"DATABASE NAME"</span>, $con)</span><br><span class="line"></span><br><span class="line">mysql_connect($server,$username,$password)  <span class="comment">//链接数据库</span></span><br><span class="line">mysql_select_db($database_name)  <span class="comment">//选择数据库名</span></span><br><span class="line">mysql_set_charset($charset)  <span class="comment">//设置字符集</span></span><br><span class="line"></span><br><span class="line">mysql_query($query)  <span class="comment">//执行INSERT，UPDATE，DELETE，DROP之类的操作，返回bool</span></span><br><span class="line"></span><br><span class="line">mysql_query($query)  <span class="comment">//执行SELECT操作，成功返回resource，失败返回FALSE</span></span><br></pre></td></tr></table></figure><p>代码示例</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">header(<span class="string">'content-type:text/html;charset=utf-8'</span>);</span><br><span class="line"><span class="comment">//1、连接数据库</span></span><br><span class="line">$link = @mysql_connect(<span class="string">'localhost'</span>,<span class="string">'root'</span>,<span class="string">''</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">'数据库连接失败！'</span>);</span><br><span class="line"><span class="comment">//2、选择数据库</span></span><br><span class="line">mysql_select_db(<span class="string">'test'</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">'选择的数据库不存在！'</span>);</span><br><span class="line"><span class="comment">//3、设置字符集</span></span><br><span class="line">mysql_set_charset(<span class="string">'utf8'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加数据</span></span><br><span class="line">$result = mysql_query(<span class="string">"INSERT INTO users VALUES(NULL ,'李四',20)"</span>);</span><br><span class="line"><span class="comment">//var_dump($result);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改数据</span></span><br><span class="line">$result = mysql_query(<span class="string">"UPDATE users SET money=25 where id=3"</span>);</span><br><span class="line"><span class="comment">//var_dump($result);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//删除单条数据</span></span><br><span class="line">$result = mysql_query(<span class="string">"DELETE FROM users where id=3"</span>);</span><br><span class="line"><span class="comment">//var_dump($result);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//删除数据表</span></span><br><span class="line">$result = mysql_query(<span class="string">"DROP TABLE test"</span>);</span><br><span class="line"><span class="comment">//var_dump($result);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//查询</span></span><br><span class="line">$result = mysql_query(<span class="string">"SELECT * FROM users"</span>);</span><br><span class="line"><span class="comment">//$line = mysql_fetch_row($result);</span></span><br><span class="line"><span class="comment">//$line = mysql_fetch_assoc($result);</span></span><br><span class="line"><span class="keyword">while</span>($line = mysql_fetch_array($result,MYSQL_ASSOC))&#123;</span><br><span class="line">    $data[] = $line;</span><br><span class="line">&#125;</span><br><span class="line">var_dump($data);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//array (size=3)</span></span><br><span class="line"><span class="comment">//  'id' =&gt; string '1' (length=1)</span></span><br><span class="line"><span class="comment">//  'name' =&gt; string '慕课' (length=6)</span></span><br><span class="line"><span class="comment">//  'money' =&gt; string '100' (length=3)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭数据库连接</span></span><br><span class="line">mysql_close($link);</span><br></pre></td></tr></table></figure><h3 id="MySQLi操作"><a href="#MySQLi操作" class="headerlink" title="MySQLi操作"></a>MySQLi操作</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$connect = mysqli_connect(<span class="string">'host'</span>,<span class="string">'username'</span>,<span class="string">'password'</span>.<span class="string">'database'</span>);  <span class="comment">//面向过程方式链接数据库</span></span><br><span class="line">$result = mysqli_query($connect,$sql);  <span class="comment">//执行SQL语句</span></span><br><span class="line">mysqli_fetch_all($result)  <span class="comment">//获取结果集</span></span><br></pre></td></tr></table></figure><h2 id="错误及常用命令"><a href="#错误及常用命令" class="headerlink" title="错误及常用命令"></a>错误及常用命令</h2><ul><li>Parse error（解析错误）: syntax error(语法错误), unexpected ‘&lt;’, expecting end of file</li><li>Notice(通知): Undefined variable（未定义的变量）: sdkljflskdjflksdjflksdjfklj </li><li>Catchable fatal(致命) error: Object of class stdClass could not be converted to string</li><li>Warning(警告): settype(): Invalid(非法) type<br><br></li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">header(<span class="string">'content-type:text/html;charset=utf-8'</span>);</span><br><span class="line">date_defalut_timezone_set(<span class="string">'PRC'</span>);</span><br><span class="line"></span><br><span class="line">@ <span class="comment">//PHP提供的错误信息屏蔽的专用符号</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span>($var,....)  <span class="comment">//输出一个或者多个字符串</span></span><br><span class="line">var_dump($var)  <span class="comment">//打印变量的详细信息,可以一次打印一个或者多个变量的详细信息</span></span><br><span class="line">print_r($var)  <span class="comment">//打印数组的信息</span></span><br><span class="line"><span class="keyword">unset</span>($var,...)  <span class="comment">//销毁变量，可以一次销毁一个或者多个，销毁之后变量的值为null</span></span><br><span class="line">time()  <span class="comment">//返回当前的 Unix 时间戳</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">is_[int|float|double|bool...]($var)  <span class="comment">//判断变量的类型</span></span><br><span class="line"><span class="keyword">isset</span>()  <span class="comment">//检测变量是否存在</span></span><br><span class="line">function_exists()  <span class="comment">//判断函数谁否存在</span></span><br><span class="line">file_exists()  <span class="comment">//判断文件是否存在</span></span><br><span class="line">$var = file_get_contents($filename)  <span class="comment">//得到文件中的内容，返回的是字符串</span></span><br><span class="line"></span><br><span class="line">serialize()  <span class="comment">//产生一个可存储的值的表示</span></span><br><span class="line">unserialize()  <span class="comment">//从已存储的表示中创建 PHP 的值</span></span><br><span class="line">setcookie(string $name, string $value, int $expire = <span class="number">0</span>, string $path = <span class="string">""</span>, string $domain = <span class="string">""</span>)  <span class="comment">//设置coockie：$name名称 $value值 $expire生命周期 $path可用路径 $domain可用域名范围</span></span><br><span class="line">$var = strip_tags()  <span class="comment">//从字符串中去除 HTML 和 PHP 标记</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">exit</span>()|<span class="keyword">die</span>();  <span class="comment">//输出一个消息并且退出当前脚本</span></span><br></pre></td></tr></table></figure><hr><p>相关链接：<br><a href="https://hyqskevin.github.io/2019/02/15/mysql/">mysql笔记</a><br><a href="https://hyqskevin.github.io/2019/01/21/php-notes/">PHP &amp; MySQL learning notes (2)</a><br><a href="https://hyqskevin.github.io/2018/10/28/w3school-php/">PHP &amp; MySQL learning notes (1)</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;-基础笔记-&lt;br&gt;慕课网 PHP基础语法巩固(2) 课堂笔记，包含会话，文件，数据库操作等细碎的摘要&lt;/p&gt;
    
    </summary>
    
      <category term="study" scheme="https://hyqskevin.github.io/categories/study/"/>
    
    
      <category term="php" scheme="https://hyqskevin.github.io/tags/php/"/>
    
      <category term="mysql" scheme="https://hyqskevin.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Machine Learning API Collection</title>
    <link href="https://hyqskevin.github.io/2019/01/15/ml-api/"/>
    <id>https://hyqskevin.github.io/2019/01/15/ml-api/</id>
    <published>2019-01-15T12:02:16.000Z</published>
    <updated>2019-02-25T12:07:32.457Z</updated>
    
    <content type="html"><![CDATA[<p>无聊收集的一个机器学习的api仓库，不定期更新<br><a id="more"></a></p><h3 id="人脸与图片识别api"><a href="#人脸与图片识别api" class="headerlink" title="人脸与图片识别api"></a>人脸与图片识别api</h3><ul><li>Animetrics Face Recognition: 该 API 能够用于图片中的人脸检测，并且将其与已知的部分人脸进行匹配分析；该 API 还支持从某个待搜索的集合中添加或者移除某个分类，或者从某个分类中添加或者删除某张人脸图片。</li><li>Betaface: 同样是提供人脸识别与检测的在线服务。它支持多人脸检测、人脸裁剪、123 个人脸特征点提取、人脸验证、识别以及大型数据库中的相似性搜索提取。</li><li>Eyedea Recognition: 致力于提供高阶的计算机视觉解决方案，主要包括对象检测与识别。其识别服务提供了常见的眼部、人脸、车辆、版权以及果盘识别，该 API 主要的价值在于对于对象、用户以及行为的快速识别。</li><li>Face++: 为应用提供面部的检测、识别以及分析服务，用户可以通过 API 调用训练模型，进行人脸检测、人脸识别、人脸分类、图像修正、创建人脸分组等等服务。</li><li>FaceMark: 提供了能够在正面照片中检测 68 个特征点以及侧面照片中检测 35 个特征点的服务。</li><li>FaceRect: 提供了非常强力与完整的面部检测的 API ，包括在正面照片与侧面照片中检测面部以及在单张照片中提取多个面部的功能；它还能将结果以 JSON 格式输出，包括检测到的眼睛、鼻子、嘴等等面部特征。</li><li>Google Cloud Vision API: 架构于著名的 TensorFlow 之上，能够高效地学习与预测图片中的内容。它能够有助于用户搜索最爱的图片，并且获取图片中丰富的注释。它还能将图片按照船、狮子、埃菲尔铁塔等等不同的类别进行分类，并且对照片中不同表情的面部进行识别，除此之外它还能将图片中不同国家的语言打印出来。</li><li>IBM Watson Visual Recognition: 该 API 能够辅助理解图片内容，包括图片标记、人脸识别、年龄估计以及性别判断，还能根据人脸相似度进行搜索。开发者能够在该服务的基础上结合自身业务特点定制出各式各样奇妙的产品。</li><li>Kairos: 该平台方便开发者快速添加 情感分析 与 人脸识别 的功能到应用与服务中。</li><li>Microsoft Cognitive Service – Computer Vision: 该 API 能够根据用户输入与用户选择分析可视化内容。譬如根据内容来标记图片、进行图片分类、人类识别并且返回他们的相似性、进行领域相关的内容识别、创建图片的内容描述、定位图片中的文本、对图片内容进行成人分级等。</li><li>Rekognition: 该 API 能够根据社交图片应用的特点提供快速面部识别与场景识别。譬如基于人眼、嘴、面部以及鼻子等等特征进行性别、年龄以及情绪预测。</li><li>Skybiometry Face Detection and Recognition: 该 API 提供人脸检测与识别服务，新版本的 API 还提供了深色微分功能.</li></ul><h3 id="文本分析，自然语言处理，情感分析api"><a href="#文本分析，自然语言处理，情感分析api" class="headerlink" title="文本分析，自然语言处理，情感分析api"></a>文本分析，自然语言处理，情感分析api</h3><ul><li>Bitext 提供了目前市场上来说几乎最准确的基于情感的多主题识别，目前包括四个语义服务：实体与概念抽取、情感分析与文本分类；该 API 总共支持 8 种不同的语言。</li><li>Diffbot Analyze: 为开发者提供了从任何网页中识别、分析以及提取主要内容与区块的功能。</li><li>Free Natural Language Processing Service: 提供了包括情感分析、内容提取以及语言检测等功能。它同样是 mashape.com 这个大型云 API 市场中的畅销产品之一。</li><li>Google Cloud Natural Language API: 该 API 提供了对于文档的架构与含义进行分析的功能，包括情感分析、实体识别以及文本标注等。</li><li>IBM Watson Alchemy Language: 该 API 能够辅助电脑学习如何阅读以及进行一些文本分析任务。譬如将非结构化数据按照领域模型转化为结构化数据，使其能够服务于社交媒体监测、商业智能、内容推荐、商业交易以及定向广告等等服务。</li><li>MeaningCloud Text Classification: 该 API 提供了部分预分类的功能：文本提取、分词、停用词设置以及同义词提取等等。</li><li>Microsoft Azure Text Analytics API 基于 Azure Machine Learning 实现的一系列文本分析服务。该 API 能够用于情感分析、关键语句提取、语言检测以及主题识别这些非结构化文本的处理任务。该 API 并不需要使用者提供相关的训练数据，能够大大降低使用门槛。</li><li>Microsoft Cognitive Service – Text Analytics: 提供了情感检测、关键语句提取、主题以及语言分析等功能。该分组中其他的 API 还包括 Bing 拼写检测、语言理解、文本分析、Web 语言模型等等。</li><li>nlpTools: 简单的采用 JSON 传输格式的提供了自然语言处理功能的 HTTP RESTful 服务。它能够提供对于在线媒体的情感分析与文本分类等服务。</li><li>Semantic Biomedical Tagger: 能够利用文本分析技术提取出文档中的 133 个生物医药学相关的实体词汇并且将它们链接到知识库中。</li><li>Thomson Reuters Open Calais™: Calais 基于自然语言处理与机器学习技术，能够分类与关联文档中的实体信息（人名、地名、组织名等）、事实信息（员工 x 为公司 y 工作）、事件信息（员工 z 在 x 日被任命为 y 公司的主席） 。</li><li>Yactraq Speech2Topics 提供了基于语音识别与自然语言处理技术的将语音内容转化为主题数据的云服务。</li></ul><h3 id="语言翻译api"><a href="#语言翻译api" class="headerlink" title="语言翻译api"></a>语言翻译api</h3><ul><li>Google Cloud Translation: 能够在数以千计的语言之间完成文本翻译工作。该 API 允许网页或者程序方便地接入这些翻译服务。</li><li>IBM Watson Language Translator: 能够在不同语言之间进行文本翻译，该服务允许开发者基于独特的领域术语与语言特性进行自定义模型开发。</li><li>LangId: 能够快速地从多语言中检索结果的服务，并不需要使用者指定哪种语言，并且能够返回结果对应的语言类型。</li><li>Microsoft Cognitive Service – Translator: 能够自动地在翻译之前进行语言类型检测，支持 9 种语言的语音翻译以及 60 种语言的文本翻译。</li><li>MotaWord: 快速地人工翻译平台，提供了超过 70 种语言支持。该 API 同样允许开发者查询翻译报价、上传带有文档说明与样式指南的翻译项目请求、自动追踪翻译进度以及进行实时反馈等。</li><li>WritePath Translation: API 允许开发者将 WritePath 功能集成到自定义应用中，包括字数检索、提交文本翻译任务、以及获取翻译信息等等。</li></ul><h3 id="预测与其他机器学习api"><a href="#预测与其他机器学习api" class="headerlink" title="预测与其他机器学习api"></a>预测与其他机器学习api</h3><ul><li>Amazon Machine Learning: 寻找数据中的隐藏模式信息，典型的用法包括诈骗检测、天气预报、市场营销以及点击预测等。</li><li>BigML: 提供基于云的机器学习与数据分析服务，允许用户以 HTTP 请求的方式自己创建数据源以及选择合适的模型来处理有监督或者无监督的机器学习任务。</li><li>Ersatz: 基于 GPU 支持的深度神经网络提供的预测服务，允许用户以 API 方式进行交互。Ersatz 中还利用增强学习来合并不同的神经网络模型来提升整体的效果。</li><li>Google Cloud Prediction: 提供了用于构建机器学习模型的 RESTful API 。这些工具能够通过分析数据来提取出应用中数据的不同特征，譬如用户情感、垃圾信息检测、推荐系统等等。</li><li>Google Cloud Speech API: 能够提供超过 80 种语言的快速与准确的语音识别以及转化服务。</li><li>Guesswork.co: 能够为电商网站提供产品推荐引擎，Guesswork 可以通过基于 Google 预测 API 构建的语义化引擎来对用户行为进行预测。</li><li>Hu:toma: 帮助世界各地的开发者构建商用级别的深度学习聊天机器人。</li><li>IBM Watson Conversation : 帮助构建可以部署在多个消息平台或者网页上的，能够理解自然语言的聊天机器人。其他类似的 API 还包括 Dialog、Natural Language Classifier、Personality Insights、Document Conversion以及 Tone Analyzer.</li><li>IBM Watson Speech : 包含了 语音到文本 以及 文本到语音 之间的转化功能（譬如创建语音控制的应用）。</li><li>IBM Watson Data Insights: 该系列的服务包含了三个 API ：AlchemyData News、Discovery 以及 Tradeoff Analytics。AlchemyData 提供了对于大量的新闻、博客内容的高级别定向搜索与趋势分析的服务。Tradeoff Analytics 则是帮助用户在多目标优化时进行有效抉择。</li><li>IBM Watson Retrieve and Rank: 开发者可以将自定义数据导入到服务中，并且使用相关的关联发算法来训练机器学习模型。服务的输出包括了一系列相关的文档与元数据，譬如某个联络中心的代理能够基于该服务提高呼叫的平均处理时间。</li><li>Imagga: 能够为你的图片自动打标签，从而允许你的图片可以被关联搜索到。</li><li>indico: 提供了文本分析（情感分析、Twitter 参与度、表情分析等）以及 图片分析（面部表情识别、面部定位）。indico 的 API 可以免费试用并且不需要任何的训练数据。</li><li>Microsoft Azure Cognitive Service API : 基于预测分析提供机器学习推荐服务，譬如个性化产品推荐等，可以用来代替传统的 Azure Machine Learning Recommendations 服务。新版本提供了批处理支持，更好地 API 检索服务、更清晰的 API 使用界面以及更好的注册与账单界面等。</li><li>Microsoft Azure Anomaly Detection API : 能够在序列数据中检测出异常数据，譬如检测内存使用过程中是否存在内存泄露的情况。</li><li>Microsoft Cognitive Service – QnA Maker: 将信息提取为会话式的、易于浏览的数据形式。其他类似的 API 还包括 Academic Knowledge、Entity Linking、Knowledge Exploration以及Recommendations。</li><li>Microsoft Cognitive Service – Speaker Recognition: 帮助应用来分析检测出当前的发言者。其他的类似于的 API 还包括Bing Speech （将语音转化为文本并且理解其大致含义）、 Custom Recognition 等等。</li><li>NuPIC : 由 NuPIC 社区运行与维护的开源项目，其基于 Python/C++ 实现了 Numenta’s Cortical Learning 算法并对外提供 API 服务。该 API 允许开发者能够使用基本算法或者分层算法，也可以选择使用其他的平台功能。</li><li>PredicSis: 能够通过预测分析与大数据技术提供市场营销的效用与收益。</li><li>PredictionIO: 基于 Apache Spark、HBase 以及 Spray 这些著名的开源项目搭建的开源机器学习服务。典型的 API 包括了创建与管理用户信息及其行为记录、检索项目与内容、基于用户进行个性推荐等等。</li><li>RxNLP – Cluster Sentences and Short Texts: 提供了文本挖掘与自然语言处理的服务。其中语句聚类 API 能够将不同的语句进行分类，譬如将不同新闻文章中的语句或者 Twitter、Facebook 上提取出来的短文本划分到不同的分组中。</li><li>Sightcorp F.A.C.E.: 该 API 能够帮助第三方应用来更好地理解用户行为，并且根据年龄、性别、面部表情、头部姿势以及种族划分来进行相似面部的分析与搜索。</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;无聊收集的一个机器学习的api仓库，不定期更新&lt;br&gt;
    
    </summary>
    
      <category term="repo" scheme="https://hyqskevin.github.io/categories/repo/"/>
    
    
      <category term="machine_learning" scheme="https://hyqskevin.github.io/tags/machine-learning/"/>
    
  </entry>
  
  <entry>
    <title>基于RGB-D相机数据的三维场景构建</title>
    <link href="https://hyqskevin.github.io/2019/01/10/slam-rgbd/"/>
    <id>https://hyqskevin.github.io/2019/01/10/slam-rgbd/</id>
    <published>2019-01-10T12:23:47.000Z</published>
    <updated>2019-02-25T12:40:30.001Z</updated>
    
    <content type="html"><![CDATA[<p>-研究笔记-<br>简要介绍通过RGB-D相机采集到的一个场景的图像数据和深度数据，对这个场景进行三维点云地图的简单构建。<br>整个步骤分为特征提取，特征匹配，位姿估计，三维重建。首先从图像中提取ORB特征，采用暴力匹配的方法得到图像间特征点的匹配结果，然后采用PnP估计相机的位姿筛选出关键帧，最后利用当前帧简历三维场景地图。后端使用Eigen加速矩阵计算，g2o对相机位姿进行优化，使用PCL拼接点云。实验数据采用TUM的RGB-D数据集。<br><a id="more"></a></p><h2 id="RGB-D相机模型"><a href="#RGB-D相机模型" class="headerlink" title="RGB-D相机模型"></a>RGB-D相机模型</h2><p>RGB-D 相机能够主动测量每个像素的深度，比双目相机通过视差计算更为主动。相比较单目相机，RGB-D相机没有复杂的深度恢复过程，使得算法更为简单；相较其它于双目相机，RGB-D相机有着更好的经济性，节省了不少成本。但是 RGB-D 相机的深度测量范围有限，只能用于室内，从一定程度上限制了其适用性。<br>RGB-D相机向探测目标发射一束光线，根据返回的结构光图案，计算物体与自身之间的距离。在测量完深度后，自己完成深度与彩色图像像素之间的配对，输出一一对应的彩色图和深度图。<br>之后通过得到的距离和色彩信息，计算像素的三维相机坐标，进行点云构建。</p><img src="https://hyqskevin.github.io/pic/slam_rgbd/camera.png" class="[camera]"><h2 id="ORB特征提取和匹配"><a href="#ORB特征提取和匹配" class="headerlink" title="ORB特征提取和匹配"></a>ORB特征提取和匹配</h2><p>直接从图像本身考虑运动估计会比较复杂，也会消耗大量计算资源，所以一般采用选取图像中比较有代表性的点，在这些点的基础上讨论相机的位姿变化并进行定位。<br>特征点由关键点和描述子两部分组成。视觉领域常用的特征检测算法有SIFT、SURF、ORB等。SIFT和SURF算法提取效率和匹配效率都不高，本实验选择实时性更好的ORB (Oriented FAST and Rotated BRIEF) 特征。</p><p>ORB算法是Ethan Rublee在2011年提出的，是一种新的特征检测和描述算法。它改进了FAST检测子，并采用速度极快的BRIEF描述子，使图像提取环节得到加速。</p><p>FAST主要检测局部像素灰度变化过于明显的地方，如果一个像素和邻域的像素差别比较大，那么他更可能是角点。ORB中对原始的FAST进行改进，ORB指定了要提取的角点数量N，对原始的FAST角点分别计算Harris响应值，然后取Top-N个具有最大响应值得角点作为最终的角点集合。</p><p>另外ORB使FAST角点具有尺度和旋转的描述。通过对图像进行不同层次的降采样，获得不同分辨率的图像，并在每一层次进行角点检测得到尺度不变性；特征旋转通过灰度质心法 (Intensity Centroid) 实现：</p><ul><li>定义图像块的矩为<img src="https://hyqskevin.github.io/pic/slam_rgbd/square.png" class="[square]"></li><li>通过矩可以找到图像块的质心<img src="https://hyqskevin.github.io/pic/slam_rgbd/centroid.png" class="[centroid]"></li><li>连接图像块的几何中心O与质心C，得到从O到C的方向向量，则特征点的方向可以定义为<img src="https://hyqskevin.github.io/pic/slam_rgbd/theta.png" class="[theta]">通过以上方法，FAST具备尺度和旋转描述</li></ul><p>本实验采用暴力匹配 (Brute-Force Matcher) 的方法，计算每一个特征点与所有描述子的距离，然后排序。由于描述子距离表示了两个特征之间的相似程度，所以取最近的作为特征点。对于二进制描述子BRIEF采用汉明距离 (Hamming distance) 作为度量。</p><h2 id="PnP位姿估计"><a href="#PnP位姿估计" class="headerlink" title="PnP位姿估计"></a>PnP位姿估计</h2><p>PnP (Perspective-n-Point) 是求解三维到二维点对运动的方法，不需要使用对极约束（存在初始化，纯旋转和尺度问题，且一般需要8对点），可以在较少的匹配点（最少3对点）中获得较好的运动估计。特征点的三维位置可以直接由RGB-D相机的深度图确定。</p><p>常用的PnP问题求解有3对点估计位姿P3P、直接线性变换 (DLT) 、EPnP (Efficient PnP) 、UPnP以及非线性优化建立最小二乘求解 (Bundle Adjustment)。本实验采用OpenCV提供的EPnP筛选匹配点来求解相机位姿。将数据集中相邻两帧图像之间进行比较，确认相机的旋转参数和平移参数。</p><h2 id="场景地图重建"><a href="#场景地图重建" class="headerlink" title="场景地图重建"></a>场景地图重建</h2><p>根据估算的相机位姿记录下的相机旋转平移参数，即相机的内参数和外参数，将RGB-D数据转化为点云 (Point Cloud)，然后通过PCL (Point Cloud Library) 进行拼接，最后得到由离散点组成的点云地图。把生成的点云地图以PCD格式存储，可通过PCL可视化程序打开相应文件。</p><img src="https://hyqskevin.github.io/pic/slam_rgbd/point_cloud.png" class="[point_cloud]"><h2 id="后端优化"><a href="#后端优化" class="headerlink" title="后端优化"></a>后端优化</h2><p>Eigen：C++开源线性代数库，提供有关矩阵的线性代数运算。<br>g2o：C++开源框架，利用图优化框架对PnP和位姿图进行优化，使用Eigen进行矩阵计算。<br>PCL：C++开源编程库，实现了大量点云相关的通用算法和高效数据结构，涉及到点云获取、滤波、分割、配准、检索、特征提取、识别、追踪、曲面重建、可视化等。</p><h2 id="实验结果"><a href="#实验结果" class="headerlink" title="实验结果"></a>实验结果</h2><p>通过FAST计算出的所有特征结点并通过BRIEF描述子进行配对<br><img src="https://hyqskevin.github.io/pic/slam_rgbd/match.png" class="[match]"><br>暴力匹配计算特征点和描述子的距离，进行优化后筛选有效的特征点<br><img src="https://hyqskevin.github.io/pic/slam_rgbd/feature.png" class="[feature]"><br><img src="https://hyqskevin.github.io/pic/slam_rgbd/feature2.png" class="[feature2]"><br>通过PnP算法估计相机的匹配点并计算出相机的旋转参数R和位移参数t<br><img src="https://hyqskevin.github.io/pic/slam_rgbd/paramenter.png" class="[paramenter]"><br>将Tum数据集中的图片信息和深度信息进行两两帧特征提取和匹配，得到一组特征点和相机的位姿变换矩阵，利用PCL进行点云地图构建<br><img src="https://hyqskevin.github.io/pic/slam_rgbd/point_cloud.png" class="[point_cloud]"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>关键点的提取和描述子的计算非常耗时，尽管ORB已经做到了一定的优化，但进行特征提取仍然会占去实时三维建图的大部分时间。一幅图可以有几十万个像素，只提取特征点会丢弃大部分有用的图像信息，另外面对没有明显纹理的场景，室外亮环境，现有的RGB-D和PnP方案明显还有待完善的地方。<br>两辆帧的比较只能满足局部地图的匹配和优化，面对一个完整的场景还需要对全局进行更加真实和实时的建模。<br>点云建图也需要利用如深度滤波等滤波算法对结果进行优化，最终达到对相机拍摄到的场景进行半稠密地图和稠密地图重建的效果。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;-研究笔记-&lt;br&gt;简要介绍通过RGB-D相机采集到的一个场景的图像数据和深度数据，对这个场景进行三维点云地图的简单构建。&lt;br&gt;整个步骤分为特征提取，特征匹配，位姿估计，三维重建。首先从图像中提取ORB特征，采用暴力匹配的方法得到图像间特征点的匹配结果，然后采用PnP估计相机的位姿筛选出关键帧，最后利用当前帧简历三维场景地图。后端使用Eigen加速矩阵计算，g2o对相机位姿进行优化，使用PCL拼接点云。实验数据采用TUM的RGB-D数据集。&lt;br&gt;
    
    </summary>
    
      <category term="study" scheme="https://hyqskevin.github.io/categories/study/"/>
    
    
      <category term="slam" scheme="https://hyqskevin.github.io/tags/slam/"/>
    
  </entry>
  
  <entry>
    <title>使用 layoutit 设计简易留言板功能</title>
    <link href="https://hyqskevin.github.io/2018/11/18/layoutit/"/>
    <id>https://hyqskevin.github.io/2018/11/18/layoutit/</id>
    <published>2018-11-18T07:32:06.000Z</published>
    <updated>2019-02-21T09:33:28.666Z</updated>
    
    <content type="html"><![CDATA[<p>-基础练习-<br><a href="http://www.layoutit.com/" target="_blank" rel="noopener">Layoutit</a>是基于bootstrap2.0的一个可视化布局模板, 可以点击模板里的文字进行修改, 也可以通过点击弹出的编辑框进行富文本修改. 拖动区块能实现排序。<br>尝试用Layoutit进行快速可视化布局，练习PHP的_POST和_GET，后台数据用文件存储，未使用数据库<br><a id="more"></a></p><h3 id="后台步骤"><a href="#后台步骤" class="headerlink" title="后台步骤"></a>后台步骤</h3><ol><li>创建<code>msg.md</code>，将文件中的内容创建成 PHP 的值，读取到<code>$msgs</code>：$msgs=unserialize($string);</li></ol><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">header(<span class="string">'content-type:text/html;charset=utf-8'</span>);</span><br><span class="line">date_default_timezone_set(<span class="string">'PRC'</span>);</span><br><span class="line">$filename=<span class="string">"msg.md"</span>;</span><br><span class="line">$msgs=[];</span><br><span class="line"><span class="comment">//检测文件是否存在</span></span><br><span class="line"><span class="keyword">if</span>(file_exists($filename))&#123;</span><br><span class="line">  <span class="comment">//读取文件中的内容</span></span><br><span class="line">  $string=file_get_contents($filename);</span><br><span class="line">  <span class="keyword">if</span>(strlen($string)&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    $msgs=unserialize($string);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>检测到用户提交留言<ul><li>读取<code>$username, $title, $content, $time</code></li><li>组成关联数组: <code>$data=compact(&#39;username&#39;,&#39;title&#39;,&#39;content&#39;,&#39;time&#39;);</code></li><li>写入新的数据到<code>$msgs: array_push($msgs,$data);</code></li><li>产生一个存储的值: <code>$msgs=serialize($msgs);</code></li><li>报告留言成功或失败</li></ul></li></ol><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'pubMsg'</span>]))&#123;</span><br><span class="line">  $username=$_POST[<span class="string">'username'</span>];</span><br><span class="line">  $title=strip_tags($_POST[<span class="string">'title'</span>]);</span><br><span class="line">  $content=strip_tags($_POST[<span class="string">'content'</span>]);</span><br><span class="line">  $time=time();</span><br><span class="line">  <span class="comment">//将其组成关联数组</span></span><br><span class="line">  $data=compact(<span class="string">'username'</span>,<span class="string">'title'</span>,<span class="string">'content'</span>,<span class="string">'time'</span>);</span><br><span class="line">  array_push($msgs,$data);</span><br><span class="line">  $msgs=serialize($msgs);</span><br><span class="line">  <span class="keyword">if</span>(file_put_contents($filename,$msgs))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;script&gt;alert('留言成功！');location.href='22-msg.php';&lt;/script&gt;"</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;script&gt;alert('留言失败！');location.href='22-msg.php';&lt;/script&gt;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>将$msgs中的内容显示在留言板上<ul><li>检测到$msgs存在且数组有内容</li><li>将$msgs中的所有数组键名按顺序读取，分别在网页中输出：foreach($msgs as $val)</li></ul></li></ol><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span>(is_array($msgs)&amp;&amp;count($msgs)&gt;<span class="number">0</span>):<span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span> $i=<span class="number">1</span>;<span class="keyword">foreach</span>($msgs <span class="keyword">as</span> $val):<span class="meta">?&gt;</span></span><br><span class="line">  &lt;tr class="success"&gt;</span><br><span class="line">    &lt;td&gt;</span><br><span class="line">      <span class="meta">&lt;?php</span> <span class="keyword">echo</span> $i++;<span class="meta">?&gt;</span></span><br><span class="line">    &lt;/td&gt;</span><br><span class="line">    &lt;td&gt;</span><br><span class="line">      <span class="meta">&lt;?php</span> <span class="keyword">echo</span> $val[<span class="string">'username'</span>];<span class="meta">?&gt;</span></span><br><span class="line">    &lt;/td&gt;</span><br><span class="line">    &lt;td&gt;</span><br><span class="line">      <span class="meta">&lt;?php</span> <span class="keyword">echo</span> $val[<span class="string">'title'</span>];<span class="meta">?&gt;</span></span><br><span class="line">    &lt;/td&gt;</span><br><span class="line">    &lt;td&gt;</span><br><span class="line">      <span class="meta">&lt;?php</span> <span class="keyword">echo</span> date(<span class="string">"m/d/Y H:i:s"</span>,$val[<span class="string">'time'</span>]);<span class="meta">?&gt;</span></span><br><span class="line">    &lt;/td&gt;</span><br><span class="line">    &lt;td&gt;</span><br><span class="line">      <span class="meta">&lt;?php</span> <span class="keyword">echo</span> $val[<span class="string">'content'</span>];<span class="meta">?&gt;</span></span><br><span class="line">    &lt;/td&gt;</span><br><span class="line">  &lt;/tr&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endforeach</span>;<span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">endif</span>;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ol start="4"><li>表格输出</li></ol><table class="table"><br>  <thead><br>    <tr><br>      <th><br>        编号<br>      </th><br>      <th><br>        用户<br>      </th><br>      <th><br>        标题<br>      </th><br>      <th><br>        时间<br>      </th><br>      <th><br>        内容<br>      </th><br>    </tr><br>  </thead><br>  <tbody><br>      <tr class="success"><br>        <td><br>        1<br>        </td><br>        <td><br>        KevinW<br>        </td><br>        <td><br>        test<br>        </td><br>        <td><br>        11/18/2018 15:59:25<br>        </td><br>        <td><br>        测试留言<br>        </td><br>      </tr><br>  </tbody><br></table><hr><h3 id="Layoutit页面设计"><a href="#Layoutit页面设计" class="headerlink" title="Layoutit页面设计"></a>Layoutit页面设计</h3><p><head><meta name="generator" content="Hexo 3.8.0"></head></p><p><script type="text/javascript" src="http://www.francescomalagrino.com/BootstrapPageGenerator/3/js/jquery-2.0.0.min.js"></script></p><p><script type="text/javascript" src="http://www.francescomalagrino.com/BootstrapPageGenerator/3/js/jquery-ui"></script></p><p><link href="http://www.francescomalagrino.com/BootstrapPageGenerator/3/css/bootstrap-combined.min.css" rel="stylesheet" media="screen"></p><p><script type="text/javascript" src="http://www.francescomalagrino.com/BootstrapPageGenerator/3/js/bootstrap.min.js"></script><br></p><body><br><div class="container-fluid"><br>    <div class="row-fluid"><br>        <div class="span12"><br>            <div class="page-header"><br>                <h4><br>                    Kevin_W的留言板-<span>V1.1.0</span><br>                </h4><br>            </div><br>            <div class="hero-unit"><br>                <h5><br>                    Hello, Layoutit!<br>                </h5><br>                <p><br>                    这是一个可视化布局模板, 你可以点击模板里的文字进行修改, 也可以通过点击弹出的编辑框进行富文本修改. 拖动区块能实现排序.<br>                </p><br>                <p><br>                    <a rel="nofollow" class="btn btn-primary btn-large" href="#">参看更多 »</a><br>                </p><br>            </div><br>      <form action="#" method="post"><br>        <fieldset><br>          <legend>请留言</legend><br>          <label>用户</label><input type="text" name="username" required><br>          <br><br>          <label>标题</label><input type="text" name="title" required><br>          <br><br>          <label>内容</label><textarea name="content" rows="5" cols="30" required></textarea><br>          <br><br>          <input type="submit" class="btn btn-primary btn-lg" name="pubMsg" value="发布留言"><br>        </fieldset><br>      </form><br>    </div><br>    </div><br></div><br><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"left","width":100,"height":200},"mobile":{"show":true},"log":false});</script></body><hr><p><a href="https://link" target="_blank" rel="noopener">msg.php</a><br><a href="https://link" target="_blank" rel="noopener">msg.md</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;-基础练习-&lt;br&gt;&lt;a href=&quot;http://www.layoutit.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Layoutit&lt;/a&gt;是基于bootstrap2.0的一个可视化布局模板, 可以点击模板里的文字进行修改, 也可以通过点击弹出的编辑框进行富文本修改. 拖动区块能实现排序。&lt;br&gt;尝试用Layoutit进行快速可视化布局，练习PHP的_POST和_GET，后台数据用文件存储，未使用数据库&lt;br&gt;
    
    </summary>
    
      <category term="study" scheme="https://hyqskevin.github.io/categories/study/"/>
    
    
      <category term="bootstrap2.0" scheme="https://hyqskevin.github.io/tags/bootstrap2-0/"/>
    
      <category term="php" scheme="https://hyqskevin.github.io/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>PHP &amp; MySQL learning notes (2)</title>
    <link href="https://hyqskevin.github.io/2018/11/05/php-notes/"/>
    <id>https://hyqskevin.github.io/2018/11/05/php-notes/</id>
    <published>2018-11-05T13:42:13.000Z</published>
    <updated>2019-02-21T09:02:59.700Z</updated>
    
    <content type="html"><![CDATA[<p>-基础笔记-<br>慕课网 PHP基础语法巩固(2) 课堂笔记，包含基本语法，变量和数据和函数等细碎的摘要</p><p>PHP使用环境和IDE</p><ul><li><strong>LAMP(build)</strong>: Linux+Apache+MySQL+PHP</li><li>LNMP: Linux+Nginx+MySQL+PHP</li><li>LNMPA: Linux+Nginx+MySQL+PHP+Apache</li><li><strong>WAMP(build)</strong>: Window+Apache+MySQL+PHP</li><li>集成环境: <strong>xampp</strong>, wampserver, phpstudy</li><li>IDE: <strong>vscode</strong>,Atom, Sublime Text3, PHPStorm, ZendStudio</li></ul><a id="more"></a><h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><ul><li><p>标准风格：<code>&lt;?php  代码段; ?&gt;</code><br>如果文档中只有PHP代码，结束标记要省略掉<br>如果文档中不只有PHP代码，一定要保证PHP的开始和结束标记成对出现，可以出现任意位置，任意多次都可以</p></li><li><p>短风格：<code>&lt;? 代码段; ?&gt;</code><br>需要配置PHP配置文件php.ini中short_open_tag=On,重启Apache服务器即可</p></li><li><p>ASP风格：<code>&lt;% 代码段; %&gt;</code><br>需要配置PHP配置文件php.ini中asp_tags=On,重启Apache服务器即可</p></li></ul><h2 id="常量-amp-变量"><a href="#常量-amp-变量" class="headerlink" title="常量 &amp; 变量"></a>常量 &amp; 变量</h2><h3 id="定义常量"><a href="#定义常量" class="headerlink" title="定义常量"></a>定义常量</h3><ul><li>define($name, $value)</li><li>const NAME=值<br><br><br>常量名称不加$<br>常量名称最好大写，以字母或者下划线开始<br>常量默认区分大小写<br>常量作用域是全局<br>常量一经定义，在脚本执行期间是不能改变的<br>常量的值可以是标量类型，也可以是数组<br><br></li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">- constant($name)  <span class="comment">//根据常量的名称获取常量的值</span></span><br><span class="line">- defined($name)  <span class="comment">//检测常量名称是否存在，如果存在返回true，否则返回false</span></span><br><span class="line">- get_defined_constants()  <span class="comment">//返回的是包含系统常量和自定义常量的数组</span></span><br></pre></td></tr></table></figure><h3 id="魔术常量"><a href="#魔术常量" class="headerlink" title="魔术常量"></a>魔术常量</h3><p>  <code>__LINE__</code>  //得到当前的行号<br>  <code>__FILE__</code>  //得到当前文件的完整绝对路径和文件名<br>  <code>__DIR__</code>  //得到文件的完整绝对路径<br>  <code>__FUNCTION__</code>  //得到当前函数的名称<br>  <code>__CLASS__</code>  //得到当前类的类名<br>  <code>__METHOD__</code>  //得到当前类的方法名称<br>  <code>__TRAIT__</code>  //得到当前的TRAIT名称<br>  <code>__NAMESPACE__</code>  //得到当前明明空间的名称</p><h3 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h3><ul><li>通过美元$变量名称来表示变量</li><li>PHP是弱类型语言，可以声明变量在使用，也可以不声明，可以一次声明一个，也可以一次声明多个</li></ul><h3 id="变量命名法"><a href="#变量命名法" class="headerlink" title="变量命名法"></a>变量命名法</h3><ul><li><p>驼峰标记法<br>小骆驼: firstName,lastName,zendControllerFront<br>大骆驼: irstName,LastName,ZendControllerFront</p></li><li><p>下划线法<br>first_name,last_name,zend_controller_front</p></li></ul><h3 id="预定义变量"><a href="#预定义变量" class="headerlink" title="预定义变量"></a>预定义变量</h3><p>  <code>$GLOBALS</code>  //超全局变量，包含以下所有的预定义变量<br>  <code>$_SERVERS</code>  //服务器和执行环境信息变量<br>  <code>$_ENV</code>  //环境变量<br>  <code>$_COOKIE</code>  //HTTP Cookies<br>  <code>$_SESSION</code>  //HTTP Session变量<br>  <code>$_FILES</code>  //文件上传信息变量<br>  <code>$_GET[&#39;名称&#39;]</code> //主要接收以?形式传递的数据，像表单以get形式发送数据，包括像超链接典型的?形式传递参数<br>  <code>$_POST[&#39;名称&#39;]</code>  //主要接收表单以post形式发送的数据<br>  <code>$_REQUEST</code>  //$_GET+$_POST+$_COOKIE</p><h2 id="数据类型-amp-转换"><a href="#数据类型-amp-转换" class="headerlink" title="数据类型 &amp; 转换"></a>数据类型 &amp; 转换</h2><h3 id="临时转换"><a href="#临时转换" class="headerlink" title="临时转换"></a>临时转换</h3><p>整型: (int)$变量名称|(integer)$变量名称<br>浮点型: (float|double|real)$变量名称<br>字符型: (string)$变量名称<br>布尔型: (bool|boolean)$变量名称<br>空: (unset)$变量名称<br>数组: (array)$变量名称<br>对象: (object)$变量名称</p><p><strong>通过系统函数实现</strong><br>intval($var)  //返回变量转换成整型之后的值<br>floatval($var)|doubleval($var)  //返回变量转换成浮点型的值<br>strval($var)  //返回变量转换成字符串的值<br>boolval($var)  //返回变量转换成布尔类型的值</p><h3 id="永久转换"><a href="#永久转换" class="headerlink" title="永久转换"></a>永久转换</h3><p>settype($var,$type)  //设置变量的类型<br>gettype($var)  //返回变量的类型</p><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="函数变量"><a href="#函数变量" class="headerlink" title="函数变量"></a>函数变量</h3><p>局部变量</p><ol><li>局部动态变量: 变量只在函数内部执行，执行完毕则被销毁</li><li>局部静态变量: 在函数内部设置static时，执行完毕变量不被销毁</li></ol><p>全局变量: 使用global，在函数内部定义全局变量，当函数执行时先调用函数外面已经定义好的变量再执行，如函数内部有重复定义相同变量不同值，执行出的是函数内部修改过的值</p><h3 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h3><ol><li>值传递: 在函数内部修改变量的值的情况下，在函数调用时调用函数外部的变量，值不变</li><li><p>引用传递: 在函数内部修改变量的值的情况下，在函数调用时，函数的参数前面加一个&amp;符号，值发生改变</p><p> <strong>在对象中，不加&amp;符号，对象的值也会发生改变</strong><br> <strong>堆内存: 存放占用内存比较大的，如对象  new xxx()</strong><br> <strong>栈内存: 存放基本类型  $obj</strong></p></li></ol><p>可变参数列表<br>    func_num_args：实参个数；<br>    func_get_arg：返回某一个实参，必须事实参数组的索引；<br>    func_get_args：返回实参数组;<br>    可以返回整型，字符串型，数组等数据类型</p><h3 id="复杂函数类型"><a href="#复杂函数类型" class="headerlink" title="复杂函数类型"></a>复杂函数类型</h3><p>可变函数：通过变量改变函数的名字并调用，让函数的调用更具有多样性</p><p>匿名函数：<br>使用变量 = function(){}; ，调用时也是用变量加小括号来进行调用，<strong>变量后面要加上分号结尾</strong><br>声明一个函数不给函数起名字，用来以后做回调函数时用</p><p><strong>嵌套函数访问外部局部变量：变量名1 = function() use ($变量名2){};</strong></p><h3 id="系统库函数"><a href="#系统库函数" class="headerlink" title="系统库函数"></a>系统库函数</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">int strlen(string $str)  <span class="comment">//返回字符串长度</span></span><br><span class="line">string strtolower(string $str)  <span class="comment">//转换成小写</span></span><br><span class="line">string strtoupper(string $str)  <span class="comment">//转换成大写</span></span><br><span class="line">string ucfirst(string $str)  <span class="comment">//句首字母转换成大写</span></span><br><span class="line">string ucwords(string $str)  <span class="comment">//每个单词首字母转换成大写</span></span><br><span class="line">mixed str_replace(mixed $search, mixed replace, mixed $subject, [int &amp;$count])  <span class="comment">//实现字符替换，区分大小写</span></span><br><span class="line">mixed str_ireplace(mixed $search, mixed replace, mixed $subject, [int &amp;$count]) <span class="comment">//实现字符替换，不区分大小写</span></span><br><span class="line">float floor(float $svalue)  <span class="comment">//舍去</span></span><br><span class="line">float ceil(float $svalue)  <span class="comment">//进位</span></span><br><span class="line">int mt_rand(int $min, int $max)  <span class="comment">//随机数，比rand()更好</span></span><br></pre></td></tr></table></figure><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h3><ol><li><p>通过array()形式</p><p>array()空数组<br>array(值,…)下标连续的索引数组，下标从0开始<br>array(键名=&gt;键值,…)指定下标的索引数组、关联数组、混合数组<br>通过[]的形式定义数组，代替array()</p></li><li><p>通过[ ]动态创建</p></li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$数组名称[]=值  //下标连续的索引数组</span><br><span class="line">$数组名称[键名]=值  //指定下标的索引数组和关联数组</span><br></pre></td></tr></table></figure><ol start="3"><li><p>通过range()和compact()快速创建</p><p>range()  //快速创建下标连续的索引数组<br>compact()  //快速创建关联数组,只能写已经存在的变量名称，不能加$</p></li><li><p>通过define(), const定义常量数组</p></li></ol><h3 id="数组转换"><a href="#数组转换" class="headerlink" title="数组转换"></a>数组转换</h3><p>临时转换: (array)$var<br>永久转换: settype($var,$type)</p><h3 id="数组运算符"><a href="#数组运算符" class="headerlink" title="数组运算符"></a>数组运算符</h3><p><code>+</code>  合并数组，如果键名相同，使用前面数组的键值<br><code>==</code>  只比较键名和键值是否相同，如果相同返回true，否则返回false<br><code>===</code>  既要比较键名和键值是否相同，还要比较类型和顺序</p><h3 id="数组遍历"><a href="#数组遍历" class="headerlink" title="数组遍历"></a>数组遍历</h3><h4 id="通过foreach遍历数组"><a href="#通过foreach遍历数组" class="headerlink" title="通过foreach遍历数组"></a>通过foreach遍历数组</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">foreach</span>($数组名称 <span class="keyword">as</span> $val)&#123;循环体;&#125;  <span class="comment">//只要键值</span></span><br><span class="line"><span class="keyword">foreach</span>($数组名称 <span class="keyword">as</span> $key=&gt;$val)&#123;循环体;&#125;  <span class="comment">//既要键名又要键值</span></span><br><span class="line"><span class="keyword">foreach</span>($数组名称 <span class="keyword">as</span> $key=&gt;&amp;$val)&#123;循环体;&#125;  <span class="comment">//引用传递</span></span><br></pre></td></tr></table></figure><p><a href="http://www.laruence.com/2008/11/20/630.html" target="_blank" rel="noopener">深入理解PHP原理之foreach</a></p><ul><li><p><strong>可以通过:和endforeach代替{ }</strong></p></li><li><p><strong>PHP7中foreach的改变</strong></p><ul><li>foreach遍历对数组内部指针不再起作用</li><li>按照值进行遍历的时候，foreach操作的值是数组的副本</li><li>按照引用进行遍历的时候，有更好的迭代特性，在遍历体内修改数组对遍历有影响</li></ul></li></ul><h4 id="通过指针函数遍历"><a href="#通过指针函数遍历" class="headerlink" title="通过指针函数遍历"></a>通过指针函数遍历</h4><p>key($array)  //得到当前指针所在位置的键名<br>current($array)  //得到当前指针所在位置的键值<br>next($array)  //将数组指针向下移动一位，返回当前指针所在位置的键值，否则返回false<br>prev($array)  //将数组指针向上移动一位，返回当前指针所在位置的键值，否则返回false<br>end($array)  //将数组指针移动到末尾，返回当前指针所在位置的键值，否则返回false<br>reset($array)  //将数组指针移动到开始，返回当前指针所在位置的键值，否则返回false</p><h4 id="通过each-和list-函数遍历数组"><a href="#通过each-和list-函数遍历数组" class="headerlink" title="通过each()和list()函数遍历数组"></a>通过each()和list()函数遍历数组</h4><p>each()<br>list()</p><h3 id="数组库API"><a href="#数组库API" class="headerlink" title="数组库API"></a>数组库API</h3><h4 id="创建数组操作"><a href="#创建数组操作" class="headerlink" title="创建数组操作"></a>创建数组操作</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">range($min,$max[,$step=<span class="number">1</span>]):快速创建下标连续的索引数组</span><br><span class="line">compact($varname,$varname...):快速创建关联数组</span><br><span class="line">array_fill($start_index,$num,$value):用给定的值填充数组</span><br><span class="line">array_fill_keys($keys,$value):使用指定的键和值填充数组</span><br><span class="line">array_combine($keys,$values):创建一个数组，用一个数组的值作为其键名，另外一个值作为其键值</span><br></pre></td></tr></table></figure><h4 id="键值相关操作"><a href="#键值相关操作" class="headerlink" title="键值相关操作"></a>键值相关操作</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">count($var[,$mode=COUNT_NORMAL])/sizeof():计算数组中的单元数目或对象中的属性个数 </span><br><span class="line">array_keys($array):取得数组的键名作为下标连续的索引数组返回</span><br><span class="line">array_values($array):取得数组的键值作为下标连续的索引数组返回</span><br><span class="line">array_flip($array):交换数组中的键名和键值</span><br><span class="line">in_array($search,$array[,$strict]):检测数组中是否存在某个值</span><br><span class="line">array_search($search,$array[,$strict]):在数组中搜索给定的值，如果成功则返回相应的键名</span><br><span class="line">array_key_exists($search,$array):检查给定的键名或索引是否存在于数组中</span><br><span class="line">array_reverse($array[,$preserve_keys=<span class="keyword">false</span>]):数组倒置</span><br><span class="line">shuffle($array):打乱数组的元素</span><br><span class="line">array_rand($array[,$num_req=<span class="number">1</span>]):随机取出数组的键名</span><br><span class="line">array_unique($array[,$sort_flag=SORT_STRING]):移除数组中重复的值</span><br><span class="line">array_sum($array):统计数组中元素值的总和</span><br><span class="line">array_product($array):计算数组中所有值的乘积</span><br><span class="line">array_count_values($array):统计数组中值出现的次数</span><br><span class="line">extract($array[,$extract_type=EXTR_OVERWRITE[,$prefix=<span class="keyword">null</span>]]):从数组中将变量导入到当前的符号表 </span><br><span class="line">array_pad($array,$size,$value):用值将数组填补到指定长度</span><br></pre></td></tr></table></figure><h4 id="数组指针函数"><a href="#数组指针函数" class="headerlink" title="数组指针函数"></a>数组指针函数</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">key($array):得到当前指针所在位置元素的键名</span><br><span class="line">current($array)|pos($array):得到当前指针所在位置元素的键值</span><br><span class="line">next($array):将数组指针向下移动一位，并且返回当前指针所在位置元素的键值</span><br><span class="line">prev($array):将数组指针向上移动一位，并且返回当前指针所在位置元素的键值</span><br><span class="line">end($array):将数组指针移动倒数组的末尾，并且返回当前指针所在位置元素的键值</span><br><span class="line">reset($array):将数组指针移动到数组的开始，并且返回当前指针所在位置元素的键值</span><br><span class="line">each($array):返回数组中当前的键值对，并将数组指针向下移动一位</span><br><span class="line"><span class="keyword">list</span>($var,...):将数组中元素的值赋给对应的变量</span><br><span class="line">array_unshift($array,$value...):在数组开头插入一个元素或者多个元素</span><br><span class="line">array_shift($array):弹出数组的第一个元素</span><br><span class="line">array_push($array,$value...):在数组末尾压入一个元素或者多个元素</span><br><span class="line">array_pop($array):弹出数组的最后一个元素</span><br></pre></td></tr></table></figure><h4 id="数组的排序函数"><a href="#数组的排序函数" class="headerlink" title="数组的排序函数"></a>数组的排序函数</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">sort($array[,$sort_flag=SORT_REGULAR]):对数组的键值按照升序排列，不保留键名</span><br><span class="line">rsort($array[,$sort_flag=SORT_REGULAR]):对数组键值按照降序排列，不保留键名</span><br><span class="line">asort($array[,$sort_flag=SORT_REGULAR]):对数组键值按照升序排列，保留键值对关系</span><br><span class="line">arsort($array[,$sort_flag=SORT_REGULAR]):对数组键值按照降序排列，保留键值对关系</span><br><span class="line">ksort($array[,$sort_flag=SORT_REGULAR]):对数组的键名按照升序排列</span><br><span class="line">krsort($array[,$sort_flag=SORT_REGULAR]):对数组的键名按照降序排列</span><br><span class="line">natsort($array):用自然排序法排序</span><br><span class="line">natcasesort($array):用自然排序算法对数组进行不区分大小写字母的排序 </span><br><span class="line">array_multisort($arr[,$arg=SORT_STRING...]):对多个数组或多维数组进行排序</span><br></pre></td></tr></table></figure><h4 id="数组的交集与差集"><a href="#数组的交集与差集" class="headerlink" title="数组的交集与差集"></a>数组的交集与差集</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">array_diff($array1,$array2[...]):计算数组的差集</span><br><span class="line">array_diff_assoc($array1,$array2[,...]):带索引检查计算数组的差集 </span><br><span class="line">array_intersect($array1,$array2[...]):计算数组的交集</span><br><span class="line">array_intersect_assoc($array1,$array2[...]):带索引检查计算数组的交集</span><br></pre></td></tr></table></figure><h4 id="数组的拆分与合并"><a href="#数组的拆分与合并" class="headerlink" title="数组的拆分与合并"></a>数组的拆分与合并</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">array_slice($array,$offset[$length=<span class="keyword">null</span>[,$preserve_keys=<span class="keyword">false</span>]]):截取数组</span><br><span class="line">array_splice($array,$offset[,$length=<span class="number">0</span>,$replacement]]):将数组中一部分去掉并用其它值替代</span><br><span class="line">array_merge($arr1[,$arr2...]):合并数组</span><br><span class="line">array_chunk($array,$size[,$preserve_keys=<span class="keyword">false</span>]):将一个数组分割成多个</span><br><span class="line">array_column($array,$column_key[,$index_key]):返回数组中指定的一列</span><br></pre></td></tr></table></figure><h2 id="错误及常用命令"><a href="#错误及常用命令" class="headerlink" title="错误及常用命令"></a>错误及常用命令</h2><ul><li>Parse error（解析错误）: syntax error(语法错误), unexpected ‘&lt;’, expecting end of file</li><li>Notice(通知): Undefined variable（未定义的变量）: sdkljflskdjflksdjflksdjfklj </li><li>Catchable fatal(致命) error: Object of class stdClass could not be converted to string</li><li>Warning(警告): settype(): Invalid(非法) type<br><br></li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">header(<span class="string">'content-type:text/html;charset=utf-8'</span>);</span><br><span class="line">date_defalut_timezone_set(<span class="string">'PRC'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span>($var,....)  <span class="comment">//输出一个或者多个字符串</span></span><br><span class="line">var_dump($var)  <span class="comment">//打印变量的详细信息,可以一次打印一个或者多个变量的详细信息</span></span><br><span class="line">print_r($var)  <span class="comment">//打印数组的信息</span></span><br><span class="line"><span class="keyword">unset</span>($var,...)  <span class="comment">//销毁变量，可以一次销毁一个或者多个，销毁之后变量的值为null</span></span><br><span class="line">time()  <span class="comment">//返回当前的 Unix 时间戳</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">is_[int|float|double|bool...]($var)  <span class="comment">//判断变量的类型</span></span><br><span class="line"><span class="keyword">isset</span>()  <span class="comment">//检测变量是否存在</span></span><br><span class="line">function_exists()  <span class="comment">//判断函数谁否存在</span></span><br><span class="line">file_exists()  <span class="comment">//判断文件是否存在</span></span><br><span class="line">$var = file_get_contents($filename)  <span class="comment">//得到文件中的内容，返回的是字符串</span></span><br><span class="line"></span><br><span class="line">serialize()  <span class="comment">//产生一个可存储的值的表示</span></span><br><span class="line">unserialize()  <span class="comment">//从已存储的表示中创建 PHP 的值</span></span><br><span class="line">setcookie(string $name, string $value, int $expire = <span class="number">0</span>, string $path = <span class="string">""</span>, string $domain = <span class="string">""</span>)  <span class="comment">//设置coockie：$name名称 $value值 $expire生命周期 $path可用路径 $domain可用域名范围</span></span><br><span class="line">$var = strip_tags()  <span class="comment">//从字符串中去除 HTML 和 PHP 标记</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;-基础笔记-&lt;br&gt;慕课网 PHP基础语法巩固(2) 课堂笔记，包含基本语法，变量和数据和函数等细碎的摘要&lt;/p&gt;
&lt;p&gt;PHP使用环境和IDE&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;LAMP(build)&lt;/strong&gt;: Linux+Apache+MySQL+PHP&lt;/li&gt;
&lt;li&gt;LNMP: Linux+Nginx+MySQL+PHP&lt;/li&gt;
&lt;li&gt;LNMPA: Linux+Nginx+MySQL+PHP+Apache&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;WAMP(build)&lt;/strong&gt;: Window+Apache+MySQL+PHP&lt;/li&gt;
&lt;li&gt;集成环境: &lt;strong&gt;xampp&lt;/strong&gt;, wampserver, phpstudy&lt;/li&gt;
&lt;li&gt;IDE: &lt;strong&gt;vscode&lt;/strong&gt;,Atom, Sublime Text3, PHPStorm, ZendStudio&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="study" scheme="https://hyqskevin.github.io/categories/study/"/>
    
    
      <category term="php" scheme="https://hyqskevin.github.io/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>Adobe 2019 crack</title>
    <link href="https://hyqskevin.github.io/2018/11/01/Adobe2019/"/>
    <id>https://hyqskevin.github.io/2018/11/01/Adobe2019/</id>
    <published>2018-11-01T05:54:39.000Z</published>
    <updated>2019-02-22T02:09:28.209Z</updated>
    
    <content type="html"><![CDATA[<p>Adobe 2019 全家桶和破解包百度云链接，所有安装包和破解未验证具体完整性和安全性，<strong>可能出现不完全破解，请谨慎使用</strong><br>文章内容和链接非原创，在此感谢 <code>vposy</code> <code>胡萝卜周</code> 和 <code>painter</code> 大神们，还有学校 摄影工作室 的小伙伴们。关于破解的最新内容会搬运过来同步更新，不一定及时，有需要可以去关注一下大神们<br>微博：<a href="https://weibo.com/vposy?is_all=1" target="_blank" rel="noopener">vposy</a>，<a href="https://weibo.com/huluobozhou?nick=%E8%83%A1%E8%90%9D%E5%8D%9C%E5%91%A8&amp;is_hot=1" target="_blank" rel="noopener">胡萝卜周</a>，twitter：<a href="https://twitter.com/painter701" target="_blank" rel="noopener">@painter701</a><br><a id="more"></a></p><h4 id="2月更新-转自微博"><a href="#2月更新-转自微博" class="headerlink" title="2月更新 转自微博"></a>2月更新 转自微博</h4><ul><li>2.18<ul><li>SP版已更新，为 Illustrator CC 2019 添加了库功能。Photoshop CC 2019 直接支持视频模块，不再需要登录后激活</li></ul></li><li>2.7<ul><li>Adobe Lightroom Classic CC 8.2</li></ul></li><li>2.6<ul><li>Adobe Photoshop CC 2019 (20.0.3.24950) </li></ul></li><li>2.4<ul><li>CC 2018 WIN SP版/大师版，CC 2019 WIN/MAC SP版/大师版</li></ul></li></ul><h4 id="1月更新"><a href="#1月更新" class="headerlink" title="1月更新"></a>1月更新</h4><ul><li>1.31<ul><li>Camera Raw CC 11.2.0.36 ​​​​</li></ul></li><li>1.12<ul><li>为 Animate、Dreamweaver、Illustrator、InCopy、InDesign、Lightroom Classic 添加了文件夹图标</li></ul></li><li>1.10<ul><li>Adobe Photoshop CC 2019 (20.0.2.22488)</li></ul></li></ul><h4 id="12月更新"><a href="#12月更新" class="headerlink" title="12月更新"></a>12月更新</h4><ul><li>12.22<ul><li>AE16.0.1.48修正HEVC,建议按住ctrl+alt+shift启动程序重置一次</li><li>PR修正主页</li></ul></li><li>12.13<ul><li>Adobe Acrobat Pro DC 2019 连续版 (2019.010.20064) SP 2018.12.13更新</li></ul></li></ul><h4 id="11月更新"><a href="#11月更新" class="headerlink" title="11月更新"></a>11月更新</h4><ul><li>11.11<ul><li>Lightroom Classic 8.0 要求重新登录，但不影响正常使用，功能完整。</li></ul></li><li>11.8<ul><li>Adobe Photoshop CC 2019.0.1 (20.0.1.17836)</li></ul></li><li>11.2<ul><li>更新 Adobe Bridge CC 2019.0.1 (9.0.1.216)</li><li>更新 Adobe InDesign CC 2019.0.1 (14.0.1.202)</li><li>更新 Adobe Media Encoder CC 2019.0.1 (13.0.1.12)</li><li>更新 Adobe Premiere Pro CC 2019.0.1 (13.0.1.13)</li></ul></li></ul><hr><h3 id="到10月28日，目前除Lightroom-Classic-CC没有照片编辑功能外，vposy破解的版本其它貌似都能勉勉强强使用，具体会出现的BUG和解决方案也会持续更新出来（如果有的话）"><a href="#到10月28日，目前除Lightroom-Classic-CC没有照片编辑功能外，vposy破解的版本其它貌似都能勉勉强强使用，具体会出现的BUG和解决方案也会持续更新出来（如果有的话）" class="headerlink" title="到10月28日，目前除Lightroom Classic CC没有照片编辑功能外，vposy破解的版本其它貌似都能勉勉强强使用，具体会出现的BUG和解决方案也会持续更新出来（如果有的话）"></a>到10月28日，<del>目前除Lightroom Classic CC没有照片编辑功能外，vposy破解的版本其它貌似都能勉勉强强使用，具体会出现的BUG和解决方案也会持续更新出来（如果有的话）</del></h3><h3 id="下载链接"><a href="#下载链接" class="headerlink" title="下载链接"></a>下载链接</h3><h4 id="vposy的原版和SP版（只有win10）百度云下载链接："><a href="#vposy的原版和SP版（只有win10）百度云下载链接：" class="headerlink" title="vposy的原版和SP版（只有win10）百度云下载链接："></a>vposy的原版和SP版（只有win10）百度云下载链接：</h4><p><del><a href="https://pan.baidu.com/share/init?surl=F1iCpjajAz-Ez5QsJZP5zQ" target="_blank" rel="noopener">https://pan.baidu.com/share/init?surl=F1iCpjajAz-Ez5QsJZP5zQ</a></del><br><a href="https://pan.baidu.com/s/1F1iCpjajAz-Ez5QsJZP5zQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1F1iCpjajAz-Ez5QsJZP5zQ</a><br>提取密码: <code>ewyu</code></p><h4 id="vposy的-Adobe-CC-2018-大师版百度云下载链接："><a href="#vposy的-Adobe-CC-2018-大师版百度云下载链接：" class="headerlink" title="vposy的 Adobe CC 2018 大师版百度云下载链接："></a>vposy的 Adobe CC 2018 大师版百度云下载链接：</h4><p><a href="https://pan.baidu.com/s/1dio1Z4" target="_blank" rel="noopener">https://pan.baidu.com/s/1dio1Z4</a><br>提取密码：<code>w7i4</code></p><h4 id="ZerOCod3-文件替换破解-百度云下载链接："><a href="#ZerOCod3-文件替换破解-百度云下载链接：" class="headerlink" title="ZerOCod3 文件替换破解 百度云下载链接："></a>ZerOCod3 文件替换破解 百度云下载链接：</h4><p><a href="https://pan.baidu.com/s/11msujRxnXgl5wJpHNjd6YA" target="_blank" rel="noopener">https://pan.baidu.com/s/11msujRxnXgl5wJpHNjd6YA</a><br>提取码: xjew</p><ul><li>破解文件为.exe文件，将Adobe根目录下的文件替换成破解文件就行</li><li>或者可以下载ZerOCod破解包合集。<a href="https://pan.baidu.com/s/1W3Jnd8w2wMLTVHlsrvYQhw" target="_blank" rel="noopener">https://pan.baidu.com/s/1W3Jnd8w2wMLTVHlsrvYQhw</a> 提取码: zi2u</li></ul><h4 id="CC-Maker-早期版本汇总-百度云下载链接："><a href="#CC-Maker-早期版本汇总-百度云下载链接：" class="headerlink" title="CC Maker 早期版本汇总 百度云下载链接："></a>CC Maker 早期版本汇总 百度云下载链接：</h4><p>链接: <a href="https://pan.baidu.com/s/14ubOSVQkltVFarvbB7vUXQ" target="_blank" rel="noopener">https://pan.baidu.com/s/14ubOSVQkltVFarvbB7vUXQ</a><br>提取码: cuvr</p><ul><li>CC Maker汇总了早期版本的Adobe软件下载，早期版本可用amtlib破解程序破解</li></ul><h3 id="关于Adobe-CC-2019"><a href="#关于Adobe-CC-2019" class="headerlink" title="关于Adobe CC 2019"></a>关于Adobe CC 2019</h3><ul><li>系统需求WIN10最新版本。旧版WIN10，WIN8.1不支持，WIN7部分支持（不建议）</li><li>CC2019开始ADOBE抛弃了十几年的amtlib，新激活模块内置于主程序，正版必须登录ID，所有之前的破解程序都没用,新版本的破解也只是是跳过ID登录，没有授权信息</li><li>WIN新版破解会很快，但MAC版短时间就难说了。全系列完美破解短时间就不要想了，只有本地功能，与ACC有关的在线功能如库能否正常使用取决于ADOBE。ACC需单独破解</li><li>官方今年还没有给出完整版地址，同时也封掉了CCP。新版版发布时间还不长，不清楚官方是否不打算给完整包了。</li><li>新版本BUG问题可以去Adobe官方社区论坛上讨论</li></ul><h3 id="painter的emu"><a href="#painter的emu" class="headerlink" title="painter的emu"></a>painter的emu</h3><ul><li>他本人说遇到了一点困难，至少目前没有</li><li>至少他是想在尽量不动主程序的情况下模拟ID授权激活的，而不是简单的跳过ID登录，完全规避无授权BUG，具体情况可以自己去推上问他</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Adobe 2019 全家桶和破解包百度云链接，所有安装包和破解未验证具体完整性和安全性，&lt;strong&gt;可能出现不完全破解，请谨慎使用&lt;/strong&gt;&lt;br&gt;文章内容和链接非原创，在此感谢 &lt;code&gt;vposy&lt;/code&gt; &lt;code&gt;胡萝卜周&lt;/code&gt; 和 &lt;code&gt;painter&lt;/code&gt; 大神们，还有学校 摄影工作室 的小伙伴们。关于破解的最新内容会搬运过来同步更新，不一定及时，有需要可以去关注一下大神们&lt;br&gt;微博：&lt;a href=&quot;https://weibo.com/vposy?is_all=1&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;vposy&lt;/a&gt;，&lt;a href=&quot;https://weibo.com/huluobozhou?nick=%E8%83%A1%E8%90%9D%E5%8D%9C%E5%91%A8&amp;amp;is_hot=1&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;胡萝卜周&lt;/a&gt;，twitter：&lt;a href=&quot;https://twitter.com/painter701&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;@painter701&lt;/a&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Adobe" scheme="https://hyqskevin.github.io/categories/Adobe/"/>
    
    
      <category term="others" scheme="https://hyqskevin.github.io/tags/others/"/>
    
  </entry>
  
</feed>
